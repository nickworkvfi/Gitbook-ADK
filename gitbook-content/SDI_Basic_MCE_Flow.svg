<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1862px" preserveAspectRatio="none" style="width:1197px;height:1862px;" version="1.1" viewBox="0 0 1197 1862" width="1197px" zoomAndPan="magnify"><defs><filter height="300%" id="f18sonarrv8a1u" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="404" x="392.25" y="22.9951">SDI: Basic Manual Card data Entry Transaction Flow</text><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="407.8594" style="stroke: #000000; stroke-width: 2.0;" width="1012.5" x="13" y="128.7266"/><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="398" x="610.5" y="181.9922"/><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="77.3984" style="stroke: #000000; stroke-width: 2.0;" width="707.5" x="23" y="242.2578"/><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="687.5" x="33" y="266.3906"/><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="394" x="610.5" y="333.6563"/><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="405" x="610.5" y="393.9219"/><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="402" x="610.5" y="454.1875"/><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="77.3984" style="stroke: #000000; stroke-width: 2.0;" width="707.5" x="23" y="724.25"/><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="687.5" x="33" y="748.3828"/><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="401" x="610.5" y="1396.0391"/><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="687.5" x="33" y="1528.5703"/><rect fill="#FFFFFF" filter="url(#f18sonarrv8a1u)" height="85.3984" style="stroke: #000000; stroke-width: 2.0;" width="1142.5" x="33" y="1719.3672"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="97" x2="97" y1="68.5938" y2="1821.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="665.5" x2="665.5" y1="68.5938" y2="1821.7656"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="964.5" x2="964.5" y1="68.5938" y2="1821.7656"/><rect fill="#FEFECE" filter="url(#f18sonarrv8a1u)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="43" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="50" y="53.292">Payment App</text><rect fill="#FEFECE" filter="url(#f18sonarrv8a1u)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="43" y="1820.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="50" y="1840.7607">Payment App</text><rect fill="#FEFECE" filter="url(#f18sonarrv8a1u)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="620.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="627.5" y="53.292">SDI-Server</text><rect fill="#FEFECE" filter="url(#f18sonarrv8a1u)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="620.5" y="1820.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="627.5" y="1840.7607">SDI-Server</text><rect fill="#FEFECE" filter="url(#f18sonarrv8a1u)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="934.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="941.5" y="53.292">PlugIn</text><rect fill="#FEFECE" filter="url(#f18sonarrv8a1u)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="934.5" y="1820.7656"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="941.5" y="1840.7607">PlugIn</text><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1182.5" x="3" y="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="99.1602" y2="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="102.1602" y2="102.1602"/><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="137" x="525.75" y="88.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="118" x="531.75" y="104.6606">Card Data Entry</text><path d="M13,128.7266 L137,128.7266 L137,135.7266 L127,145.7266 L13,145.7266 L13,128.7266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="407.8594" style="stroke: #000000; stroke-width: 2.0;" width="1012.5" x="13" y="128.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="28" y="141.7935">Mandatory</text><polygon fill="#A80036" points="653.5,162.9922,663.5,166.9922,653.5,170.9922,657.5,166.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="166.9922" y2="166.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="104.5" y="161.9263">MSR Card Data Entry Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="318.5" y="161.9263">21-02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="359.5" y="161.9263">)</text><path d="M610.5,181.9922 L680.5,181.9922 L680.5,188.9922 L670.5,198.9922 L610.5,198.9922 L610.5,181.9922 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="398" x="610.5" y="181.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="625.5" y="195.0591">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="308" x="695.5" y="194.2026">[If PlugIn for SDITrigger_ExtDataStore registerd]</text><polygon fill="#A80036" points="952.5,216.2578,962.5,220.2578,952.5,224.2578,956.5,220.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="665.5" x2="958.5" y1="220.2578" y2="220.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="672.5" y="215.1919">processTrigger()</text><path d="M23,242.2578 L93,242.2578 L93,249.2578 L83,259.2578 L23,259.2578 L23,242.2578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="77.3984" style="stroke: #000000; stroke-width: 2.0;" width="707.5" x="23" y="242.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="38" y="255.3247">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="108" y="254.4683">[Headless Mode]</text><path d="M33,266.3906 L110,266.3906 L110,273.3906 L100,283.3906 L33,283.3906 L33,266.3906 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="687.5" x="33" y="266.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="48" y="279.4575">loop</text><polygon fill="#A80036" points="108.5,300.6563,98.5,304.6563,108.5,308.6563,104.5,304.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="102.5" x2="664.5" y1="304.6563" y2="304.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="114.5" y="299.5903">Status Callback (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="222.5" y="299.5903">9F-xx</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="261.5" y="299.5903">)</text><path d="M610.5,333.6563 L680.5,333.6563 L680.5,340.6563 L670.5,350.6563 L610.5,350.6563 L610.5,333.6563 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="394" x="610.5" y="333.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="625.5" y="346.7231">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="266" x="695.5" y="345.8667">[If PlugIn for SDITrigger_CardId registerd]</text><polygon fill="#A80036" points="952.5,367.9219,962.5,371.9219,952.5,375.9219,956.5,371.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="665.5" x2="958.5" y1="371.9219" y2="371.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="672.5" y="366.856">processTrigger(PAN)</text><path d="M610.5,393.9219 L680.5,393.9219 L680.5,400.9219 L670.5,410.9219 L610.5,410.9219 L610.5,393.9219 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="405" x="610.5" y="393.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="625.5" y="406.9888">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="315" x="695.5" y="406.1323">[If PlugIn for SDITrigger_CardDataAvail registerd]</text><polygon fill="#A80036" points="952.5,428.1875,962.5,432.1875,952.5,436.1875,956.5,432.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="665.5" x2="958.5" y1="432.1875" y2="432.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="672.5" y="427.1216">processTrigger(Sensitive Data)</text><path d="M610.5,454.1875 L680.5,454.1875 L680.5,461.1875 L670.5,471.1875 L610.5,471.1875 L610.5,454.1875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="402" x="610.5" y="454.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="625.5" y="467.2544">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="312" x="695.5" y="466.3979">[If PlugIn for SDITrigger_CardDetected registerd]</text><polygon fill="#A80036" points="952.5,488.4531,962.5,492.4531,952.5,496.4531,956.5,492.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="665.5" x2="958.5" y1="492.4531" y2="492.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="672.5" y="487.3872">processTrigger(Data)</text><polygon fill="#A80036" points="108.5,524.5859,98.5,528.5859,108.5,532.5859,104.5,528.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="528.5859" y2="528.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="209" x="114.5" y="523.52">MSR Card Data Entry Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="323.5" y="523.52">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="364.5" y="523.52">)</text><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1182.5" x="3" y="564.1523"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="564.1523" y2="564.1523"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="567.1523" y2="567.1523"/><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="133" x="527.75" y="553.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="533.75" y="569.6528">Card Validation</text><polygon fill="#A80036" points="653.5,603.8516,663.5,607.8516,653.5,611.8516,657.5,607.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="607.8516" y2="607.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="104.5" y="602.7856">performValidationChecks Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="344.5" y="602.7856">29-05</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="385.5" y="602.7856">)</text><polygon fill="#A80036" points="108.5,632.9844,98.5,636.9844,108.5,640.9844,104.5,636.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="636.9844" y2="636.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="114.5" y="631.9185">performValidationChecks Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="304" x="349.5" y="631.9185">Validation results and Best match record</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="653.5" y="631.9185">)</text><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1182.5" x="3" y="665.5508"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="665.5508" y2="665.5508"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="668.5508" y2="668.5508"/><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="87" x="550.75" y="654.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="556.75" y="671.0513">PIN Entry</text><polygon fill="#A80036" points="653.5,705.25,663.5,709.25,653.5,713.25,657.5,709.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="709.25" y2="709.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="104.5" y="704.1841">PED Get PIN Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="262.5" y="704.1841">22-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="303.5" y="704.1841">)</text><path d="M23,724.25 L93,724.25 L93,731.25 L83,741.25 L23,741.25 L23,724.25 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="77.3984" style="stroke: #000000; stroke-width: 2.0;" width="707.5" x="23" y="724.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="38" y="737.3169">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="108" y="736.4604">[Headless Mode]</text><path d="M33,748.3828 L110,748.3828 L110,755.3828 L100,765.3828 L33,765.3828 L33,748.3828 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="687.5" x="33" y="748.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="48" y="761.4497">loop</text><polygon fill="#A80036" points="108.5,782.6484,98.5,786.6484,108.5,790.6484,104.5,786.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="102.5" x2="664.5" y1="786.6484" y2="786.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="114.5" y="781.5825">Status Callback (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="222.5" y="781.5825">9F-xx</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="261.5" y="781.5825">)</text><polygon fill="#A80036" points="108.5,825.7813,98.5,829.7813,108.5,833.7813,104.5,829.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="829.7813" y2="829.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="114.5" y="824.7153">PED Get PIN Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="267.5" y="824.7153">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="308.5" y="824.7153">)</text><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1182.5" x="3" y="858.3477"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="858.3477" y2="858.3477"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="861.3477" y2="861.3477"/><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="155" x="516.75" y="847.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="522.75" y="863.8481">Get Encrypted PIN</text><polygon fill="#A80036" points="653.5,898.0469,663.5,902.0469,653.5,906.0469,657.5,902.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="902.0469" y2="902.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="104.5" y="896.981">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="264.5" y="896.981">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="305.5" y="896.981">)</text><polygon fill="#A80036" points="108.5,927.1797,98.5,931.1797,108.5,935.1797,104.5,931.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="931.1797" y2="931.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="114.5" y="926.1138">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="269.5" y="926.1138">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="375.5" y="926.1138">)</text><polygon fill="#A80036" points="653.5,956.3125,663.5,960.3125,653.5,964.3125,657.5,960.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="960.3125" y2="960.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="104.5" y="955.2466">Crypto Get encrypted Pin Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="344.5" y="955.2466">70-08</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="385.5" y="955.2466">)</text><polygon fill="#A80036" points="108.5,985.4453,98.5,989.4453,108.5,993.4453,104.5,989.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="989.4453" y2="989.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="114.5" y="984.3794">Crypto Get encrypted Pin Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="105" x="349.5" y="984.3794">Encrypted PIN</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="454.5" y="984.3794">)</text><polygon fill="#A80036" points="653.5,1014.5781,663.5,1018.5781,653.5,1022.5781,657.5,1018.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="1018.5781" y2="1018.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="104.5" y="1013.5122">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="265.5" y="1013.5122">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="306.5" y="1013.5122">)</text><polygon fill="#A80036" points="108.5,1043.7109,98.5,1047.7109,108.5,1051.7109,104.5,1047.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="1047.7109" y2="1047.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="114.5" y="1042.645">Crypto Close Response</text><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1182.5" x="3" y="1076.2773"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="1076.2773" y2="1076.2773"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="1079.2773" y2="1079.2773"/><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="304" x="442.25" y="1065.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="285" x="448.25" y="1081.7778">Fetch None Sensitive Transaction Data</text><polygon fill="#A80036" points="653.5,1115.9766,663.5,1119.9766,653.5,1123.9766,657.5,1119.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="1119.9766" y2="1119.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="104.5" y="1114.9106">fetchTrxTags Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="265.5" y="1114.9106">29-02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="306.5" y="1114.9106">)</text><polygon fill="#A80036" points="108.5,1145.1094,98.5,1149.1094,108.5,1153.1094,104.5,1149.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="1149.1094" y2="1149.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="114.5" y="1144.0435">fetchTrxTags Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="270.5" y="1144.0435">None sensitive Response Tags</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="495.5" y="1144.0435">)</text><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1182.5" x="3" y="1177.6758"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="1177.6758" y2="1177.6758"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="1180.6758" y2="1180.6758"/><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="337" x="425.75" y="1167.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="318" x="431.75" y="1183.1763">Get encrypted (sensitive) Transaction Data</text><polygon fill="#A80036" points="653.5,1217.375,663.5,1221.375,653.5,1225.375,657.5,1221.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="1221.375" y2="1221.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="104.5" y="1216.3091">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="264.5" y="1216.3091">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="305.5" y="1216.3091">)</text><polygon fill="#A80036" points="108.5,1246.5078,98.5,1250.5078,108.5,1254.5078,104.5,1250.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="1250.5078" y2="1250.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="114.5" y="1245.4419">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="269.5" y="1245.4419">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="375.5" y="1245.4419">)</text><polygon fill="#A80036" points="653.5,1275.6406,663.5,1279.6406,653.5,1283.6406,657.5,1279.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="1279.6406" y2="1279.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="104.5" y="1274.5747">getEncData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="259.5" y="1274.5747">29-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="300.5" y="1274.5747">)</text><polygon fill="#A80036" points="108.5,1304.7734,98.5,1308.7734,108.5,1312.7734,104.5,1308.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="1308.7734" y2="1308.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="114.5" y="1303.7075">getEncData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="264.5" y="1303.7075">Encrypted Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="379.5" y="1303.7075">)</text><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1182.5" x="3" y="1337.3398"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="1337.3398" y2="1337.3398"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="1340.3398" y2="1340.3398"/><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="236" x="476.25" y="1326.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="217" x="482.25" y="1342.8403">Get encrypted Message Data</text><polygon fill="#A80036" points="653.5,1377.0391,663.5,1381.0391,653.5,1385.0391,657.5,1381.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="1381.0391" y2="1381.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="104.5" y="1375.9731">getEncMsgData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="285.5" y="1375.9731">29-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="326.5" y="1375.9731">)</text><path d="M610.5,1396.0391 L680.5,1396.0391 L680.5,1403.0391 L670.5,1413.0391 L610.5,1413.0391 L610.5,1396.0391 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="401" x="610.5" y="1396.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="625.5" y="1409.106">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="311" x="695.5" y="1408.2495">[If PlugIn for SDITrigger_MsgDataAvail registerd]</text><polygon fill="#A80036" points="952.5,1430.3047,962.5,1434.3047,952.5,1438.3047,956.5,1434.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="665.5" x2="958.5" y1="1434.3047" y2="1434.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="672.5" y="1429.2388">processTrigger(Message Data in clear text)</text><polygon fill="#A80036" points="108.5,1466.4375,98.5,1470.4375,108.5,1474.4375,104.5,1470.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="1470.4375" y2="1470.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="114.5" y="1465.3716">getEncMsgData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="290.5" y="1465.3716">Encrypted Message Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="476.5" y="1465.3716">)</text><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1182.5" x="3" y="1499.0039"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="1499.0039" y2="1499.0039"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="1502.0039" y2="1502.0039"/><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="192" x="498.25" y="1488.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="504.25" y="1504.5044">Get Message Signature</text><path d="M33,1528.5703 L103,1528.5703 L103,1535.5703 L93,1545.5703 L33,1545.5703 L33,1528.5703 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="687.5" x="33" y="1528.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="48" y="1541.6372">opt</text><polygon fill="#A80036" points="653.5,1562.8359,663.5,1566.8359,653.5,1570.8359,657.5,1566.8359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="1566.8359" y2="1566.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="104.5" y="1561.77">getMsgSignature Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="293.5" y="1561.77">29-04</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="334.5" y="1561.77">)</text><polygon fill="#A80036" points="108.5,1591.9688,98.5,1595.9688,108.5,1599.9688,104.5,1595.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="1595.9688" y2="1595.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="114.5" y="1590.9028">getMsgSignature Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="298.5" y="1590.9028">Message Signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="440.5" y="1590.9028">)</text><polygon fill="#A80036" points="653.5,1628.1016,663.5,1632.1016,653.5,1636.1016,657.5,1632.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="1632.1016" y2="1632.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="104.5" y="1627.0356">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="265.5" y="1627.0356">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="306.5" y="1627.0356">)</text><polygon fill="#A80036" points="108.5,1657.2344,98.5,1661.2344,108.5,1665.2344,104.5,1661.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="1661.2344" y2="1661.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="114.5" y="1656.1685">Crypto Close Response</text><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1182.5" x="3" y="1689.8008"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="1689.8008" y2="1689.8008"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1185.5" y1="1692.8008" y2="1692.8008"/><rect fill="#EEEEEE" filter="url(#f18sonarrv8a1u)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="269" x="459.75" y="1679.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="250" x="465.75" y="1695.3013">Clear (sensitive) Transaction Data</text><path d="M33,1719.3672 L157,1719.3672 L157,1726.3672 L147,1736.3672 L33,1736.3672 L33,1719.3672 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="85.3984" style="stroke: #000000; stroke-width: 2.0;" width="1142.5" x="33" y="1719.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="48" y="1732.4341">Mandatory</text><polygon fill="#A80036" points="653.5,1758.6328,663.5,1762.6328,653.5,1766.6328,657.5,1762.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="97.5" x2="659.5" y1="1762.6328" y2="1762.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="104.5" y="1757.5669">clearDataStore Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="281.5" y="1757.5669">29-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="322.5" y="1757.5669">)</text><path d="M670,1741.5 L670,1766.5 L1156,1766.5 L1156,1751.5 L1146,1741.5 L670,1741.5 " fill="#FBFB77" filter="url(#f18sonarrv8a1u)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1146,1741.5 L1146,1751.5 L1156,1751.5 L1146,1741.5 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="465" x="676" y="1758.5669">automatically cleaned after 8 minutes or with the begining of the next trx</text><polygon fill="#A80036" points="108.5,1792.7656,98.5,1796.7656,108.5,1800.7656,104.5,1796.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="102.5" x2="664.5" y1="1796.7656" y2="1796.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="114.5" y="1791.6997">clearDataStore Response</text><!--
@startuml

title SDI: Basic Manual Card data Entry Transaction Flow

participant "Payment App" order 10
participant "SDI-Server" order 20
participant "PlugIn" order 30

== Card Data Entry ==

group Mandatory
  "Payment App" -> "SDI-Server": MSR Card Data Entry Command (<b>21-02</b>)
  opt If PlugIn for SDITrigger_ExtDataStore registerd
    "SDI-Server" -> "PlugIn": processTrigger()
  end
  opt Headless Mode
    loop
      "SDI-Server" -> "Payment App": Status Callback (<b>9F-xx</b>)
    end
  end
  opt If PlugIn for SDITrigger_CardId registerd
    "SDI-Server" -> "PlugIn": processTrigger(PAN)
  end
  opt If PlugIn for SDITrigger_CardDataAvail registerd
    "SDI-Server" -> "PlugIn": processTrigger(Sensitive Data)
  end
  opt If PlugIn for SDITrigger_CardDetected registerd
    "SDI-Server" -> "PlugIn": processTrigger(Data)
  end
  "SDI-Server" - -> "Payment App": MSR Card Data Entry Response (<b>90-00</b>)
end

== Card Validation ==

"Payment App" -> "SDI-Server": performValidationChecks Command (<b>29-05</b>)
"SDI-Server" - -> "Payment App": performValidationChecks Response (<b>Validation results and Best match record</b>)

== PIN Entry ==

"Payment App" -> "SDI-Server": PED Get PIN Command (<b>22-01</b>)
  opt Headless Mode
    loop
      "SDI-Server" -> "Payment App": Status Callback (<b>9F-xx</b>)
    end
  end
"SDI-Server" - -> "Payment App": PED Get PIN Response (<b>90-00</b>)

== Get Encrypted PIN ==

"Payment App" -> "SDI-Server": Crypto Open Command (<b>70-00</b>)
"SDI-Server" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "SDI-Server": Crypto Get encrypted Pin Command (<b>70-08</b>)
"SDI-Server" - -> "Payment App": Crypto Get encrypted Pin Response (<b>Encrypted PIN</b>)

"Payment App" -> "SDI-Server": Crypto Close Command (<b>70-01</b>)
"SDI-Server" - -> "Payment App": Crypto Close Response

== Fetch None Sensitive Transaction Data ==

"Payment App" -> "SDI-Server": fetchTrxTags Command (<b>29-02</b>)
"SDI-Server" - -> "Payment App": fetchTrxTags Response (<b>None sensitive Response Tags</b>)

== Get encrypted (sensitive) Transaction Data ==

"Payment App" -> "SDI-Server": Crypto Open Command (<b>70-00</b>)
"SDI-Server" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "SDI-Server": getEncData Command (<b>29-00</b>)
"SDI-Server" - -> "Payment App": getEncData Response (<b>Encrypted Data</b>)

== Get encrypted Message Data ==

"Payment App" -> "SDI-Server": getEncMsgData Command (<b>29-01</b>)
opt If PlugIn for SDITrigger_MsgDataAvail registerd
  "SDI-Server" -> "PlugIn": processTrigger(Message Data in clear text)
end
"SDI-Server" - -> "Payment App": getEncMsgData Response (<b>Encrypted Message Data</b>)

== Get Message Signature ==

opt
  "Payment App" -> "SDI-Server": getMsgSignature Command (<b>29-04</b>)
  "SDI-Server" - -> "Payment App": getMsgSignature Response (<b>Message Signature</b>)
end

"Payment App" -> "SDI-Server": Crypto Close Command (<b>70-01</b>)
"SDI-Server" - -> "Payment App": Crypto Close Response

== Clear (sensitive) Transaction Data ==

group Mandatory
  "Payment App" -> "SDI-Server": clearDataStore Command (<b>29-03</b>)
  note right: automatically cleaned after 8 minutes or with the begining of the next trx
  "SDI-Server" - -> "Payment App": clearDataStore Response
end

@enduml

PlantUML version 1.2019.03(Sun Mar 10 04:04:44 PDT 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.15+6-Ubuntu-0ubuntu120.04
Operating System: Linux
OS Version: 5.15.0-1089-azure
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>