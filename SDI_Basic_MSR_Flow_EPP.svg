<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2004px" preserveAspectRatio="none" style="width:1192px;height:2004px;" version="1.1" viewBox="0 0 1192 2004" width="1192px" zoomAndPan="magnify"><defs><filter height="300%" id="fmp5nwq53out2" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="292" x="445.75" y="24.5332">SDI: Basic MSR Transaction Flow with EPP</text><rect fill="#FFFFFF" filter="url(#fmp5nwq53out2)" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="613.5" x="13" y="1506.6328"/><rect fill="#FFFFFF" filter="url(#fmp5nwq53out2)" height="89.0547" style="stroke: #000000; stroke-width: 2.0;" width="1020" x="13" y="1704.7422"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="74" x2="74" y1="119.2188" y2="1915.8516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="571.5" x2="571.5" y1="119.2188" y2="1915.8516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1005.5" x2="1005.5" y1="119.2188" y2="1915.8516"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1157.5" x2="1157.5" y1="119.2188" y2="1915.8516"/><rect fill="#FEFECE" filter="url(#fmp5nwq53out2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="23" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="30" y="104.1426">Payment App</text><rect fill="#FEFECE" filter="url(#fmp5nwq53out2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="23" y="1914.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="30" y="1936.3848">Payment App</text><rect fill="#FEFECE" filter="url(#fmp5nwq53out2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="527.5" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="534.5" y="104.1426">Countertop</text><rect fill="#FEFECE" filter="url(#fmp5nwq53out2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="527.5" y="1914.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="534.5" y="1936.3848">Countertop</text><rect fill="#FEFECE" filter="url(#fmp5nwq53out2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="983.5" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="990.5" y="104.1426">EPP</text><rect fill="#FEFECE" filter="url(#fmp5nwq53out2)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="983.5" y="1914.8516"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="990.5" y="1936.3848">EPP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="1140.5" y="116.1426">User</text><ellipse cx="1158" cy="44.6094" fill="#FEFECE" filter="url(#fmp5nwq53out2)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1158,52.6094 L1158,79.6094 M1145,60.6094 L1171,60.6094 M1158,79.6094 L1145,94.6094 M1158,79.6094 L1171,94.6094 " fill="none" filter="url(#fmp5nwq53out2)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="1140.5" y="1929.3848">User</text><ellipse cx="1158" cy="1942.4609" fill="#FEFECE" filter="url(#fmp5nwq53out2)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1158,1950.4609 L1158,1977.4609 M1145,1958.4609 L1171,1958.4609 M1158,1977.4609 L1145,1992.4609 M1158,1977.4609 L1171,1992.4609 " fill="none" filter="url(#fmp5nwq53out2)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1177.5" x="3" y="150.3945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="150.3945" y2="150.3945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="153.3945" y2="153.3945"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="92" x="545.75" y="139.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="551.75" y="156.7139">Enable EPP</text><polygon fill="#A80036" points="560,191.9219,570,195.9219,560,199.9219,564,195.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="195.9219" y2="195.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="81" y="191.0654">Enable EPP Command(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="219" y="191.0654">20-21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="251" y="191.0654">) with</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="286" y="191.0654">P2=00</text><polygon fill="#A80036" points="85,222.2734,75,226.2734,85,230.2734,81,226.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="226.2734" y2="226.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="91" y="221.417">Enable EPP Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="232" y="221.417">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="264" y="221.417">)</text><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1177.5" x="3" y="255.4492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="255.4492" y2="255.4492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="258.4492" y2="258.4492"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="105" x="539.25" y="244.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="545.25" y="261.7686">Card Reading</text><polygon fill="#A80036" points="560,296.9766,570,300.9766,560,304.9766,564,300.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="300.9766" y2="300.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="81" y="296.1201">Handle Display Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="239" y="296.1201">24-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="271" y="296.1201">) on EPP (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="332" y="296.1201">DFA1500102</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="407" y="296.1201">) "Swipe Card"</text><polygon fill="#A80036" points="994,327.3281,1004,331.3281,994,335.3281,998,331.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="572" x2="1000" y1="331.3281" y2="331.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="579" y="326.4717">Handle Display Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="737" y="326.4717">24-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="769" y="326.4717">) on EPP (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="830" y="326.4717">DFA1500102</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="84" x="905" y="326.4717">) "Swipe Card"</text><polygon fill="#A80036" points="583,357.6797,573,361.6797,583,365.6797,579,361.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="577" x2="1005" y1="361.6797" y2="361.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="589" y="356.8232">Handle Display Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="746" y="356.8232">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="778" y="356.8232">)</text><polygon fill="#A80036" points="85,388.0313,75,392.0313,85,396.0313,81,392.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="392.0313" y2="392.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="91" y="387.1748">Handle Display Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="248" y="387.1748">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="280" y="387.1748">)</text><polygon fill="#A80036" points="560,418.3828,570,422.3828,560,426.3828,564,422.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="422.3828" y2="422.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="81" y="417.5264">Card Detection Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="238" y="417.5264">23-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="270" y="417.5264">)</text><polygon fill="#A80036" points="994,448.7344,1004,452.7344,994,456.7344,998,452.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="572" x2="1000" y1="452.7344" y2="452.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="579" y="447.8779">Card Detection Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="736" y="447.8779">23-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="768" y="447.8779">)</text><polygon fill="#A80036" points="1017,479.0859,1007,483.0859,1017,487.0859,1013,483.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1011" x2="1157" y1="483.0859" y2="483.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="71" x="1023" y="478.2295">Card swiped</text><polygon fill="#A80036" points="583,509.4375,573,513.4375,583,517.4375,579,513.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="577" x2="1005" y1="513.4375" y2="513.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="589" y="508.5811">Card Detection Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="745" y="508.5811">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="777" y="508.5811">)</text><polygon fill="#A80036" points="85,539.7891,75,543.7891,85,547.7891,81,543.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="543.7891" y2="543.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="91" y="538.9326">Card Detection Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="247" y="538.9326">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="279" y="538.9326">)</text><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1177.5" x="3" y="572.9648"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="572.9648" y2="572.9648"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="575.9648" y2="575.9648"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="117" x="533.25" y="561.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="99" x="539.25" y="579.2842">Card Validation</text><polygon fill="#A80036" points="560,614.4922,570,618.4922,560,622.4922,564,618.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="618.4922" y2="618.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="215" x="81" y="613.6357">performValidationChecks Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="296" y="613.6357">29-05</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="328" y="613.6357">)</text><polygon fill="#A80036" points="85,644.8438,75,648.8438,85,652.8438,81,648.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="648.8438" y2="648.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="214" x="91" y="643.9873">performValidationChecks Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="256" x="305" y="643.9873">Validation results and best match record</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="4" x="561" y="643.9873">)</text><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1177.5" x="3" y="678.0195"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="678.0195" y2="678.0195"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="681.0195" y2="681.0195"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="76" x="553.75" y="666.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="58" x="559.75" y="684.3389">PIN Entry</text><polygon fill="#A80036" points="560,719.5469,570,723.5469,560,727.5469,564,723.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="723.5469" y2="723.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="81" y="718.6904">PED Get PIN Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="229" y="718.6904">22-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="261" y="718.6904">)</text><polygon fill="#A80036" points="994,749.8984,1004,753.8984,994,757.8984,998,753.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="572" x2="1000" y1="753.8984" y2="753.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="579" y="749.042">PED Get PIN Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="727" y="749.042">22-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="759" y="749.042">)</text><polygon fill="#A80036" points="1017,780.25,1007,784.25,1017,788.25,1013,784.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1011" x2="1157" y1="784.25" y2="784.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="1023" y="779.3936">PIN entered/confirmed</text><polygon fill="#A80036" points="583,810.6016,573,814.6016,583,818.6016,579,814.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="577" x2="1005" y1="814.6016" y2="814.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="589" y="809.7451">PED Get PIN Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="736" y="809.7451">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="768" y="809.7451">)</text><polygon fill="#A80036" points="85,840.9531,75,844.9531,85,848.9531,81,844.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="844.9531" y2="844.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="91" y="840.0967">PED Get PIN Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="238" y="840.0967">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="270" y="840.0967">)</text><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1177.5" x="3" y="874.1289"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="874.1289" y2="874.1289"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="877.1289" y2="877.1289"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="133" x="525.25" y="862.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="531.25" y="880.4482">Get Encrypted PIN</text><polygon fill="#A80036" points="560,915.6563,570,919.6563,560,923.6563,564,919.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="919.6563" y2="919.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="81" y="914.7998">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="225" y="914.7998">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="257" y="914.7998">)</text><polygon fill="#A80036" points="85,946.0078,75,950.0078,85,954.0078,81,950.0078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="950.0078" y2="950.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="91" y="945.1514">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="234" y="945.1514">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="324" y="945.1514">)</text><polygon fill="#A80036" points="560,976.3594,570,980.3594,560,984.3594,564,980.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="980.3594" y2="980.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="220" x="81" y="975.5029">Crypto Get Encrypted Pin Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="301" y="975.5029">70-08</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="333" y="975.5029">)</text><polygon fill="#A80036" points="85,1006.7109,75,1010.7109,85,1014.7109,81,1010.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="1010.7109" y2="1010.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="91" y="1005.8545">Crypto Get Encrypted Pin Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="310" y="1005.8545">Encrypted PIN block</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="437" y="1005.8545">)</text><polygon fill="#A80036" points="560,1037.0625,570,1041.0625,560,1045.0625,564,1041.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="1041.0625" y2="1041.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="81" y="1036.2061">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="227" y="1036.2061">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="259" y="1036.2061">)</text><polygon fill="#A80036" points="85,1067.4141,75,1071.4141,85,1075.4141,81,1071.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="1071.4141" y2="1071.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="91" y="1066.5576">Crypto Close Response</text><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1177.5" x="3" y="1100.5898"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1100.5898" y2="1100.5898"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1103.5898" y2="1103.5898"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="263" x="460.25" y="1089.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="466.25" y="1106.9092">Fetch None Sensitive Transaction Data</text><polygon fill="#A80036" points="560,1142.1172,570,1146.1172,560,1150.1172,564,1146.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="1146.1172" y2="1146.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="81" y="1141.2607">fetchTrxTags Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="226" y="1141.2607">29-02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="258" y="1141.2607">)</text><polygon fill="#A80036" points="85,1172.4688,75,1176.4688,85,1180.4688,81,1176.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="1176.4688" y2="1176.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="91" y="1171.6123">fetchTrxTags Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="235" y="1171.6123">None sensitive Response Tags</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="426" y="1171.6123">)</text><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1177.5" x="3" y="1205.6445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1205.6445" y2="1205.6445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1208.6445" y2="1208.6445"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="285" x="449.25" y="1194.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="267" x="455.25" y="1211.9639">Get encrypted (sensitive) Transaction Data</text><polygon fill="#A80036" points="560,1247.1719,570,1251.1719,560,1255.1719,564,1251.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="1251.1719" y2="1251.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="81" y="1246.3154">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="225" y="1246.3154">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="257" y="1246.3154">)</text><polygon fill="#A80036" points="85,1277.5234,75,1281.5234,85,1285.5234,81,1281.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="1281.5234" y2="1281.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="91" y="1276.667">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="234" y="1276.667">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="324" y="1276.667">)</text><polygon fill="#A80036" points="560,1307.875,570,1311.875,560,1315.875,564,1311.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="1311.875" y2="1311.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="81" y="1307.0186">getEncData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="220" y="1307.0186">29-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="252" y="1307.0186">)</text><polygon fill="#A80036" points="85,1338.2266,75,1342.2266,85,1346.2266,81,1342.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="1342.2266" y2="1342.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="91" y="1337.3701">getEncData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="229" y="1337.3701">Encrypted Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="325" y="1337.3701">)</text><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1177.5" x="3" y="1371.4023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1371.4023" y2="1371.4023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1374.4023" y2="1374.4023"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="199" x="492.25" y="1360.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="498.25" y="1377.7217">Get encrypted Message Data</text><polygon fill="#A80036" points="560,1412.9297,570,1416.9297,560,1420.9297,564,1416.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="1416.9297" y2="1416.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="81" y="1412.0732">getEncMsgData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="245" y="1412.0732">29-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="277" y="1412.0732">)</text><polygon fill="#A80036" points="85,1443.2813,75,1447.2813,85,1451.2813,81,1447.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="1447.2813" y2="1447.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="91" y="1442.4248">getEncMsgData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="254" y="1442.4248">Encrypted Message Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="409" y="1442.4248">)</text><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1177.5" x="3" y="1476.457"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1476.457" y2="1476.457"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1479.457" y2="1479.457"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="165" x="509.25" y="1465.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="515.25" y="1482.7764">Get Message Signature</text><path d="M13,1506.6328 L78,1506.6328 L78,1514.6328 L68,1524.6328 L13,1524.6328 L13,1506.6328 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="613.5" x="13" y="1506.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="28" y="1521.1279">opt</text><polygon fill="#A80036" points="560,1543.3359,570,1547.3359,560,1551.3359,564,1547.3359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="1547.3359" y2="1547.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="81" y="1542.4795">getMsgSignature Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="250" y="1542.4795">29-04</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="282" y="1542.4795">)</text><polygon fill="#A80036" points="85,1573.6875,75,1577.6875,85,1581.6875,81,1577.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="1577.6875" y2="1577.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="91" y="1572.8311">getMsgSignature Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="121" x="259" y="1572.8311">Message Signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="380" y="1572.8311">)</text><polygon fill="#A80036" points="560,1611.0391,570,1615.0391,560,1619.0391,564,1615.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="1615.0391" y2="1615.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="81" y="1610.1826">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="227" y="1610.1826">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="259" y="1610.1826">)</text><polygon fill="#A80036" points="85,1641.3906,75,1645.3906,85,1649.3906,81,1645.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="1645.3906" y2="1645.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="91" y="1640.5342">Crypto Close Response</text><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1177.5" x="3" y="1674.5664"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1674.5664" y2="1674.5664"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1677.5664" y2="1677.5664"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="230" x="476.75" y="1663.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="482.75" y="1680.8857">Clear (sensitive) Transaction Data</text><path d="M13,1704.7422 L125,1704.7422 L125,1712.7422 L115,1722.7422 L13,1722.7422 L13,1704.7422 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="89.0547" style="stroke: #000000; stroke-width: 2.0;" width="1020" x="13" y="1704.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="28" y="1719.2373">Mandatory</text><polygon fill="#A80036" points="560,1746.4453,570,1750.4453,560,1754.4453,564,1750.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="1750.4453" y2="1750.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="81" y="1745.5889">clearDataStore Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="238" y="1745.5889">29-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="270" y="1745.5889">)</text><path d="M577,1728.0938 L577,1754.0938 L1014,1754.0938 L1014,1738.0938 L1004,1728.0938 L577,1728.0938 " fill="#FBFB77" filter="url(#fmp5nwq53out2)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1004,1728.0938 L1004,1738.0938 L1014,1738.0938 L1004,1728.0938 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="416" x="583" y="1746.5889">automatically cleaned after 8 minutes or with the begining of the next trx</text><polygon fill="#A80036" points="85,1781.7969,75,1785.7969,85,1789.7969,81,1785.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="1785.7969" y2="1785.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="91" y="1780.9404">clearDataStore Response</text><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1177.5" x="3" y="1821.9727"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1821.9727" y2="1821.9727"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1180.5" y1="1824.9727" y2="1824.9727"/><rect fill="#EEEEEE" filter="url(#fmp5nwq53out2)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="95" x="544.25" y="1810.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="550.25" y="1828.292">Disable EPP</text><polygon fill="#A80036" points="560,1863.5,570,1867.5,560,1871.5,564,1867.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="566" y1="1867.5" y2="1867.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="81" y="1862.6436">Enable EPP Command(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="219" y="1862.6436">20-21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="251" y="1862.6436">) with</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="286" y="1862.6436">P2=01</text><polygon fill="#A80036" points="85,1893.8516,75,1897.8516,85,1901.8516,81,1897.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="571" y1="1897.8516" y2="1897.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="91" y="1892.9951">Enable EPP Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="232" y="1892.9951">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="264" y="1892.9951">)</text><!--
@startuml

title SDI: Basic MSR Transaction Flow with EPP

participant "Payment App" order 10
participant "Countertop" order 20
participant "EPP" order 30
actor User order 40

== Enable EPP ==

"Payment App" -> "Countertop": Enable EPP Command(<b>20-21</b>) with <b>P2=00</b>
"Countertop" - -> "Payment App": Enable EPP Response (<b>90-00</b>)

== Card Reading ==

"Payment App" -> "Countertop": Handle Display Command (<b>24-03</b>) on EPP (<b>DFA1500102</b>) "Swipe Card"
"Countertop" -> "EPP": Handle Display Command (<b>24-03</b>) on EPP (<b>DFA1500102</b>) "Swipe Card"
"EPP" - -> "Countertop": Handle Display Response (<b>90-00</b>)
"Countertop" - -> "Payment App": Handle Display Response (<b>90-00</b>)

"Payment App" -> "Countertop": Card Detection Command (<b>23-01</b>)
"Countertop" -> "EPP": Card Detection Command (<b>23-01</b>)
"User" -> "EPP": Card swiped
"EPP" - -> "Countertop": Card Detection Response (<b>90-00</b>)
"Countertop" - -> "Payment App": Card Detection Response (<b>90-00</b>)

== Card Validation ==

"Payment App" -> "Countertop": performValidationChecks Command (<b>29-05</b>)
"Countertop" - -> "Payment App": performValidationChecks Response (<b>Validation results and best match record<b>)

== PIN Entry ==

"Payment App" -> "Countertop": PED Get PIN Command (<b>22-01</b>)
"Countertop" -> "EPP": PED Get PIN Command (<b>22-01</b>)
"User" -> "EPP": PIN entered/confirmed
"EPP" - -> "Countertop": PED Get PIN Response (<b>90-00</b>)
"Countertop" - -> "Payment App": PED Get PIN Response (<b>90-00</b>)

== Get Encrypted PIN ==

"Payment App" -> "Countertop": Crypto Open Command (<b>70-00</b>)
"Countertop" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "Countertop": Crypto Get Encrypted Pin Command (<b>70-08</b>)
"Countertop" - -> "Payment App": Crypto Get Encrypted Pin Response (<b>Encrypted PIN block</b>)

"Payment App" -> "Countertop": Crypto Close Command (<b>70-01</b>)
"Countertop" - -> "Payment App": Crypto Close Response

== Fetch None Sensitive Transaction Data ==

"Payment App" -> "Countertop": fetchTrxTags Command (<b>29-02</b>)
"Countertop" - -> "Payment App": fetchTrxTags Response (<b>None sensitive Response Tags</b>)

== Get encrypted (sensitive) Transaction Data ==

"Payment App" -> "Countertop": Crypto Open Command (<b>70-00</b>)
"Countertop" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "Countertop": getEncData Command (<b>29-00</b>)
"Countertop" - -> "Payment App": getEncData Response (<b>Encrypted Data</b>)

== Get encrypted Message Data ==

"Payment App" -> "Countertop": getEncMsgData Command (<b>29-01</b>)
"Countertop" - -> "Payment App": getEncMsgData Response (<b>Encrypted Message Data</b>)

== Get Message Signature ==

opt
  "Payment App" -> "Countertop": getMsgSignature Command (<b>29-04</b>)
  "Countertop" - -> "Payment App": getMsgSignature Response (<b>Message Signature</b>)
end

"Payment App" -> "Countertop": Crypto Close Command (<b>70-01</b>)
"Countertop" - -> "Payment App": Crypto Close Response

== Clear (sensitive) Transaction Data ==

group Mandatory
  "Payment App" -> "Countertop": clearDataStore Command (<b>29-03</b>)
  note right: automatically cleaned after 8 minutes or with the begining of the next trx
  "Countertop" - -> "Payment App": clearDataStore Response
end

== Disable EPP ==

"Payment App" -> "Countertop": Enable EPP Command(<b>20-21</b>) with <b>P2=01</b>
"Countertop" - -> "Payment App": Enable EPP Response (<b>90-00</b>)

@enduml

PlantUML version 1.2019.03(Sun Mar 10 12:04:44 CET 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 16.0.1+9-24
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>