<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1135px" preserveAspectRatio="none" style="width:1067px;height:1135px;" version="1.1" viewBox="0 0 1067 1135" width="1067px" zoomAndPan="magnify"><defs><filter height="300%" id="f1192ew0njz1gu" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="450" x="309" y="22.9951">SDI: Hybrid Cardreader Card Detection (23-01) scenarios</text><rect fill="#FFFFFF" filter="url(#f1192ew0njz1gu)" height="992.9375" style="stroke: #000000; stroke-width: 2.0;" width="1043" x="12" y="85.5938"/><rect fill="#FFFFFF" filter="url(#f1192ew0njz1gu)" height="271" style="stroke: #000000; stroke-width: 2.0;" width="1023" x="22" y="236.2578"/><rect fill="#FFFFFF" height="224.7344" style="stroke: none; stroke-width: 1.0;" width="1023" x="22" y="282.5234"/><rect fill="#FFFFFF" height="273.5391" style="stroke: none; stroke-width: 1.0;" width="1043" x="12" y="542.2578"/><rect fill="#FFFFFF" filter="url(#f1192ew0njz1gu)" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="726.5" x="178" y="690.5938"/><rect fill="#FFFFFF" height="43.9375" style="stroke: none; stroke-width: 1.0;" width="726.5" x="178" y="736.8594"/><rect fill="#FFFFFF" height="262.7344" style="stroke: none; stroke-width: 1.0;" width="1043" x="12" y="815.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="242" x2="242" y1="68.5938" y2="514.2578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="242" x2="242" y1="514.2578" y2="542.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="242" x2="242" y1="542.2578" y2="787.7969"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="242" x2="242" y1="787.7969" y2="815.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="242" x2="242" y1="815.7969" y2="1050.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="242" x2="242" y1="1050.5313" y2="1078.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="242" x2="242" y1="1078.5313" y2="1095.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="849.5" x2="849.5" y1="68.5938" y2="514.2578"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="849.5" x2="849.5" y1="514.2578" y2="542.2578"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="849.5" x2="849.5" y1="542.2578" y2="787.7969"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="849.5" x2="849.5" y1="787.7969" y2="815.7969"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="849.5" x2="849.5" y1="815.7969" y2="1050.5313"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 1.0,4.0;" x1="849.5" x2="849.5" y1="1050.5313" y2="1078.5313"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="849.5" x2="849.5" y1="1078.5313" y2="1095.5313"/><rect fill="#FEFECE" filter="url(#f1192ew0njz1gu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="188" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="195" y="53.292">Payment App</text><rect fill="#FEFECE" filter="url(#f1192ew0njz1gu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="188" y="1094.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="195" y="1114.5264">Payment App</text><rect fill="#FEFECE" filter="url(#f1192ew0njz1gu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="804.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="811.5" y="53.292">SDI-Server</text><rect fill="#FEFECE" filter="url(#f1192ew0njz1gu)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="804.5" y="1094.5313"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="811.5" y="1114.5264">SDI-Server</text><path d="M12,85.5938 L76,85.5938 L76,92.5938 L66,102.5938 L12,102.5938 L12,85.5938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="992.9375" style="stroke: #000000; stroke-width: 2.0;" width="1043" x="12" y="85.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="27" y="98.6606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="438" x="91" y="97.8042">[Card Detection (23-01) with card technology chip and msr enabled]</text><polygon fill="#A80036" points="837.5,119.8594,847.5,123.8594,837.5,127.8594,841.5,123.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="242.5" x2="843.5" y1="123.8594" y2="123.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="249.5" y="118.7935">Card Detection Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="425.5" y="118.7935">23-01 with tag DFA108 = 03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="633.5" y="118.7935">)</text><path d="M854,136.8594 L854,161.8594 L1026,161.8594 L1026,146.8594 L1016,136.8594 L854,136.8594 " fill="#FBFB77" filter="url(#f1192ew0njz1gu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1016,136.8594 L1016,146.8594 L1026,146.8594 L1016,136.8594 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="860" y="153.9263">Customer card inserted</text><polygon fill="#A80036" points="253.5,188.125,243.5,192.125,253.5,196.125,249.5,192.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="247.5" x2="848.5" y1="192.125" y2="192.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="259.5" y="187.0591">Card Detection Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="430.5" y="187.0591">90-00 with tag DFA108 = 01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="638.5" y="187.0591">)</text><polygon fill="#A80036" points="837.5,217.2578,847.5,221.2578,837.5,225.2578,841.5,221.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="242.5" x2="843.5" y1="221.2578" y2="221.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="249.5" y="216.1919">Smart Card Activate Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="459.5" y="216.1919">41-02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="500.5" y="216.1919">)</text><path d="M22,236.2578 L86,236.2578 L86,243.2578 L76,253.2578 L22,253.2578 L22,236.2578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="271" style="stroke: #000000; stroke-width: 2.0;" width="1023" x="22" y="236.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="37" y="249.3247">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222" x="101" y="248.4683">[Chip card activation successfully]</text><polygon fill="#A80036" points="253.5,270.5234,243.5,274.5234,253.5,278.5234,249.5,274.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="247.5" x2="848.5" y1="274.5234" y2="274.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="259.5" y="269.4575">Smart Card Activate Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="464.5" y="269.4575">90-00 + ATR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="554.5" y="269.4575">)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="22" x2="1045" y1="283.5234" y2="283.5234"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="27" y="293.7339">[Chip card activation failed]</text><polygon fill="#A80036" points="253.5,314.4609,243.5,318.4609,253.5,322.4609,249.5,318.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="247.5" x2="848.5" y1="318.4609" y2="318.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="259.5" y="313.395">Smart Card Activate Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="464.5" y="313.395">94-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="505.5" y="313.395">)</text><polygon fill="#A80036" points="837.5,343.5938,847.5,347.5938,837.5,351.5938,841.5,347.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="242.5" x2="843.5" y1="347.5938" y2="347.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="73" x="249.5" y="342.5278">MSR Read (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="322.5" y="342.5278">21-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="363.5" y="342.5278">)</text><polygon fill="#A80036" points="253.5,372.7266,243.5,376.7266,253.5,380.7266,249.5,376.7266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="247.5" x2="848.5" y1="376.7266" y2="376.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="259.5" y="371.6606">Card Removal Callback (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="414.5" y="371.6606">9E-04</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="455.5" y="371.6606">)</text><path d="M32,389.7266 L32,429.7266 L233,429.7266 L233,399.7266 L223,389.7266 L32,389.7266 " fill="#FBFB77" filter="url(#f1192ew0njz1gu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M223,389.7266 L223,399.7266 L233,399.7266 L223,389.7266 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="38" y="406.7935">Payment application should</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="38" y="421.9263">display remove card</text><path d="M854,443.9922 L854,468.9922 L1031,468.9922 L1031,453.9922 L1021,443.9922 L854,443.9922 " fill="#FBFB77" filter="url(#f1192ew0njz1gu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1021,443.9922 L1021,453.9922 L1031,453.9922 L1021,443.9922 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="860" y="461.0591">Customer card removed</text><polygon fill="#A80036" points="253.5,495.2578,243.5,499.2578,253.5,503.2578,249.5,499.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="247.5" x2="848.5" y1="499.2578" y2="499.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="259.5" y="494.1919">MSR Read Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="205" x="398.5" y="494.1919">90-00 with obfuscated data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="603.5" y="494.1919">)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="12" x2="1055" y1="543.2578" y2="543.2578"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="414" x="17" y="553.4683">[Card Detection (23-01) with card technology chip enabled only]</text><polygon fill="#A80036" points="837.5,574.1953,847.5,578.1953,837.5,582.1953,841.5,578.1953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="242.5" x2="843.5" y1="578.1953" y2="578.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="249.5" y="573.1294">Card Detection Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="425.5" y="573.1294">23-01 with tag DFA108 = 01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="633.5" y="573.1294">)</text><path d="M854,591.1953 L854,616.1953 L1026,616.1953 L1026,601.1953 L1016,591.1953 L854,591.1953 " fill="#FBFB77" filter="url(#f1192ew0njz1gu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1016,591.1953 L1016,601.1953 L1026,601.1953 L1016,591.1953 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="860" y="608.2622">Customer card inserted</text><polygon fill="#A80036" points="253.5,642.4609,243.5,646.4609,253.5,650.4609,249.5,646.4609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="247.5" x2="848.5" y1="646.4609" y2="646.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="259.5" y="641.395">Card Detection Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="430.5" y="641.395">90-00 with tag DFA108 = 01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="638.5" y="641.395">)</text><polygon fill="#A80036" points="837.5,671.5938,847.5,675.5938,837.5,679.5938,841.5,675.5938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="242.5" x2="843.5" y1="675.5938" y2="675.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="210" x="249.5" y="670.5278">Smart Card Activate Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="459.5" y="670.5278">41-02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="500.5" y="670.5278">)</text><path d="M178,690.5938 L242,690.5938 L242,697.5938 L232,707.5938 L178,707.5938 L178,690.5938 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="90.2031" style="stroke: #000000; stroke-width: 2.0;" width="726.5" x="178" y="690.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="193" y="703.6606">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="222" x="257" y="702.8042">[Chip card activation successfully]</text><polygon fill="#A80036" points="253.5,724.8594,243.5,728.8594,253.5,732.8594,249.5,728.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="247.5" x2="848.5" y1="728.8594" y2="728.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="259.5" y="723.7935">Smart Card Activate Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="464.5" y="723.7935">90-00 + ATR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="554.5" y="723.7935">)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="178" x2="904.5" y1="737.8594" y2="737.8594"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="180" x="183" y="748.0698">[Chip card activation failed]</text><polygon fill="#A80036" points="253.5,768.7969,243.5,772.7969,253.5,776.7969,249.5,772.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="247.5" x2="848.5" y1="772.7969" y2="772.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="205" x="259.5" y="767.731">Smart Card Activate Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="464.5" y="767.731">94-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="505.5" y="767.731">)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="12" x2="1055" y1="816.7969" y2="816.7969"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="410" x="17" y="827.0073">[Card Detection (23-01) with card technology msr enabled only]</text><polygon fill="#A80036" points="837.5,847.7344,847.5,851.7344,837.5,855.7344,841.5,851.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="242.5" x2="843.5" y1="851.7344" y2="851.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="249.5" y="846.6685">Card Detection Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="208" x="425.5" y="846.6685">23-01 with tag DFA108 = 02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="633.5" y="846.6685">)</text><path d="M854,864.7344 L854,889.7344 L1026,889.7344 L1026,874.7344 L1016,864.7344 L854,864.7344 " fill="#FBFB77" filter="url(#f1192ew0njz1gu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1016,864.7344 L1016,874.7344 L1026,874.7344 L1016,864.7344 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="151" x="860" y="881.8013">Customer card inserted</text><polygon fill="#A80036" points="253.5,916,243.5,920,253.5,924,249.5,920" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="247.5" x2="848.5" y1="920" y2="920"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="259.5" y="914.9341">Card Removal Callback (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="414.5" y="914.9341">9E-04</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="455.5" y="914.9341">)</text><path d="M32,933 L32,973 L233,973 L233,943 L223,933 L32,933 " fill="#FBFB77" filter="url(#f1192ew0njz1gu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M223,933 L223,943 L233,943 L223,933 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="38" y="950.0669">Payment application should</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="38" y="965.1997">display remove card</text><path d="M854,987.2656 L854,1012.2656 L1031,1012.2656 L1031,997.2656 L1021,987.2656 L854,987.2656 " fill="#FBFB77" filter="url(#f1192ew0njz1gu)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1021,987.2656 L1021,997.2656 L1031,997.2656 L1021,987.2656 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="860" y="1004.3325">Customer card removed</text><polygon fill="#A80036" points="253.5,1038.5313,243.5,1042.5313,253.5,1046.5313,249.5,1042.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="247.5" x2="848.5" y1="1042.5313" y2="1042.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="171" x="259.5" y="1037.4653">Card Detection Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="407" x="430.5" y="1037.4653">90-00 with tag DFA108 = 02 and obfuscated card data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="837.5" y="1037.4653">)</text><!--
@startuml

title SDI: Hybrid Cardreader Card Detection (23-01) scenarios

participant "Payment App" order 10
participant "SDI-Server" order 20

alt Card Detection (23-01) with card technology chip and msr enabled
  "Payment App" -> "SDI-Server": Card Detection Command (<b>23-01 with tag DFA108 = 03</b>)
  note right of "SDI-Server": Customer card inserted  
  "SDI-Server" - -> "Payment App": Card Detection Response (<b>90-00 with tag DFA108 = 01</b>)
  "Payment App" -> "SDI-Server": Smart Card Activate Command (<b>41-02</b>)

  alt Chip card activation successfully
    "SDI-Server" - -> "Payment App": Smart Card Activate Response (<b>90-00 + ATR</b>)
  else Chip card activation failed
    "SDI-Server" - -> "Payment App": Smart Card Activate Response (<b>94-03</b>)
    "Payment App" -> "SDI-Server":  MSR Read (<b>21-01</b>)
    "SDI-Server" -> "Payment App":  Card Removal Callback (<b>9E-04</b>) 
    note left of "Payment App" 
      Payment application should 
      display remove card
    end note 
    note right of "SDI-Server": Customer card removed
    "SDI-Server" - -> "Payment App": MSR Read Response (<b>90-00 with obfuscated data</b>)
  end
  ...
else Card Detection (23-01) with card technology chip enabled only
  "Payment App" -> "SDI-Server": Card Detection Command (<b>23-01 with tag DFA108 = 01</b>)
    note right of "SDI-Server": Customer card inserted  
  "SDI-Server" - -> "Payment App": Card Detection Response (<b>90-00 with tag DFA108 = 01</b>)
  "Payment App" -> "SDI-Server": Smart Card Activate Command (<b>41-02</b>)

  alt Chip card activation successfully
    "SDI-Server" - -> "Payment App": Smart Card Activate Response (<b>90-00 + ATR</b>)
  else Chip card activation failed
    "SDI-Server" - -> "Payment App": Smart Card Activate Response (<b>94-03</b>)
  end
  ...
else Card Detection (23-01) with card technology msr enabled only
  "Payment App" -> "SDI-Server": Card Detection Command (<b>23-01 with tag DFA108 = 02</b>)
    note right of "SDI-Server": Customer card inserted
  "SDI-Server" -> "Payment App":  Card Removal Callback (<b>9E-04</b>) 
  note left of "Payment App"
    Payment application should 
    display remove card
  end note  
  note right of "SDI-Server": Customer card removed
  "SDI-Server" - -> "Payment App": Card Detection Response (<b>90-00 with tag DFA108 = 02 and obfuscated card data</b>)
  ...
end

@enduml

PlantUML version 1.2019.03(Sun Mar 10 04:04:44 PDT 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.14+7-Ubuntu-120.04
Operating System: Linux
OS Version: 5.15.0-1082-azure
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>