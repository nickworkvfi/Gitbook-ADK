<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2706px" preserveAspectRatio="none" style="width:1035px;height:2706px;" version="1.1" viewBox="0 0 1035 2706" width="1035px" zoomAndPan="magnify"><defs><filter height="300%" id="f141hko2ukfd2i" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="331" x="347.75" y="24.5332">SDI: EMV-CTLS Basic Transaction Flow with EPP</text><rect fill="#FFFFFF" filter="url(#f141hko2ukfd2i)" height="261.1641" style="stroke: #000000; stroke-width: 2.0;" width="933.5" x="13" y="785.25"/><rect fill="#FFFFFF" filter="url(#f141hko2ukfd2i)" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="535.5" x="13" y="1889.2031"/><rect fill="#FFFFFF" filter="url(#f141hko2ukfd2i)" height="139.7578" style="stroke: #000000; stroke-width: 2.0;" width="933.5" x="13" y="2042.9609"/><rect fill="#FFFFFF" filter="url(#f141hko2ukfd2i)" height="89.0547" style="stroke: #000000; stroke-width: 2.0;" width="942" x="13" y="2241.0703"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="74" x2="74" y1="119.2188" y2="2617.9375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="493.5" x2="493.5" y1="119.2188" y2="2617.9375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="913.5" x2="913.5" y1="119.2188" y2="2617.9375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1000.5" x2="1000.5" y1="119.2188" y2="2617.9375"/><rect fill="#FEFECE" filter="url(#f141hko2ukfd2i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="23" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="30" y="104.1426">Payment App</text><rect fill="#FEFECE" filter="url(#f141hko2ukfd2i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="23" y="2616.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="30" y="2638.4707">Payment App</text><rect fill="#FEFECE" filter="url(#f141hko2ukfd2i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="449.5" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="456.5" y="104.1426">Countertop</text><rect fill="#FEFECE" filter="url(#f141hko2ukfd2i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="449.5" y="2616.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="456.5" y="2638.4707">Countertop</text><rect fill="#FEFECE" filter="url(#f141hko2ukfd2i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="891.5" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="898.5" y="104.1426">EPP</text><rect fill="#FEFECE" filter="url(#f141hko2ukfd2i)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="891.5" y="2616.9375"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="898.5" y="2638.4707">EPP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="983.5" y="116.1426">User</text><ellipse cx="1001" cy="44.6094" fill="#FEFECE" filter="url(#f141hko2ukfd2i)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1001,52.6094 L1001,79.6094 M988,60.6094 L1014,60.6094 M1001,79.6094 L988,94.6094 M1001,79.6094 L1014,94.6094 " fill="none" filter="url(#f141hko2ukfd2i)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="983.5" y="2631.4707">User</text><ellipse cx="1001" cy="2644.5469" fill="#FEFECE" filter="url(#f141hko2ukfd2i)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1001,2652.5469 L1001,2679.5469 M988,2660.5469 L1014,2660.5469 M1001,2679.5469 L988,2694.5469 M1001,2679.5469 L1014,2694.5469 " fill="none" filter="url(#f141hko2ukfd2i)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1020.5" x="3" y="150.3945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="150.3945" y2="150.3945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="153.3945" y2="153.3945"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="92" x="467.25" y="139.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="473.25" y="156.7139">Enable EPP</text><polygon fill="#A80036" points="482,191.9219,492,195.9219,482,199.9219,486,195.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="195.9219" y2="195.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="81" y="191.0654">Enable EPP Command(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="219" y="191.0654">20-21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="251" y="191.0654">) with</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="286" y="191.0654">P2=00</text><polygon fill="#A80036" points="85,222.2734,75,226.2734,85,230.2734,81,226.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="226.2734" y2="226.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="91" y="221.417">Enable EPP Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="232" y="221.417">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="264" y="221.417">)</text><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1020.5" x="3" y="255.4492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="255.4492" y2="255.4492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="258.4492" y2="258.4492"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="219" x="403.75" y="244.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="201" x="409.75" y="261.7686">Initialize EMV CTLS Framework</text><polygon fill="#A80036" points="482,296.9766,492,300.9766,482,304.9766,486,300.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="300.9766" y2="300.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="81" y="296.1201">EMV_CTLS_Init_Framework Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="315" y="296.1201">40-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="347" y="296.1201">)</text><polygon fill="#A80036" points="902,327.3281,912,331.3281,902,335.3281,906,331.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494" x2="908" y1="331.3281" y2="331.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="501" y="326.4717">EMV_CTLS_Init_Framework Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="735" y="326.4717">40-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="767" y="326.4717">)</text><polygon fill="#A80036" points="505,357.6797,495,361.6797,505,365.6797,501,361.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499" x2="913" y1="361.6797" y2="361.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="511" y="356.8232">EMV_CTLS_Init_Framework Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="744" y="356.8232">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="776" y="356.8232">)</text><polygon fill="#A80036" points="85,388.0313,75,392.0313,85,396.0313,81,392.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="392.0313" y2="392.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="91" y="387.1748">EMV_CTLS_Init_Framework Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="324" y="387.1748">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="356" y="387.1748">)</text><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1020.5" x="3" y="421.207"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="421.207" y2="421.207"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="424.207" y2="424.207"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="162" x="432.25" y="410.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="144" x="438.25" y="427.5264">EMV CTLS Transaction</text><polygon fill="#A80036" points="482,462.7344,492,466.7344,482,470.7344,486,466.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="466.7344" y2="466.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="81" y="461.8779">EMV_CTLS_SetupTransaction Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="328" y="461.8779">40-10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="360" y="461.8779">)</text><polygon fill="#A80036" points="902,493.0859,912,497.0859,902,501.0859,906,497.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494" x2="908" y1="497.0859" y2="497.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="501" y="492.2295">EMV_CTLS_SetupTransaction Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="748" y="492.2295">40-10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="780" y="492.2295">)</text><polygon fill="#A80036" points="505,523.4375,495,527.4375,505,531.4375,501,527.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499" x2="913" y1="527.4375" y2="527.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="511" y="522.5811">EMV_CTLS_SetupTransaction Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="757" y="522.5811">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="851" y="522.5811">)</text><polygon fill="#A80036" points="85,553.7891,75,557.7891,85,561.7891,81,557.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="557.7891" y2="557.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="91" y="552.9326">EMV_CTLS_SetupTransaction Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="337" y="552.9326">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="431" y="552.9326">)</text><polygon fill="#A80036" points="482,584.1406,492,588.1406,482,592.1406,486,588.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="588.1406" y2="588.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="81" y="583.2842">Handle Display Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="239" y="583.2842">24-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="271" y="583.2842">) on EPP (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="332" y="583.2842">DFA1500102</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="407" y="583.2842">) "Tap Card"</text><polygon fill="#A80036" points="902,614.4922,912,618.4922,902,622.4922,906,618.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494" x2="908" y1="618.4922" y2="618.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="501" y="613.6357">Handle Display Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="659" y="613.6357">24-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="691" y="613.6357">) on EPP (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="752" y="613.6357">DFA1500102</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="70" x="827" y="613.6357">) "Tap Card"</text><polygon fill="#A80036" points="505,644.8438,495,648.8438,505,652.8438,501,648.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499" x2="913" y1="648.8438" y2="648.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="511" y="643.9873">Handle Display Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="668" y="643.9873">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="700" y="643.9873">)</text><polygon fill="#A80036" points="85,675.1953,75,679.1953,85,683.1953,81,679.1953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="679.1953" y2="679.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="91" y="674.3389">Handle Display Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="248" y="674.3389">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="280" y="674.3389">)</text><polygon fill="#A80036" points="482,705.5469,492,709.5469,482,713.5469,486,709.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="709.5469" y2="709.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="81" y="704.6904">Card Detection Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="238" y="704.6904">23-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="270" y="704.6904">)</text><polygon fill="#A80036" points="902,735.8984,912,739.8984,902,743.8984,906,739.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494" x2="908" y1="739.8984" y2="739.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="501" y="735.042">Card Detection Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="658" y="735.042">23-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="690" y="735.042">)</text><polygon fill="#A80036" points="925,766.25,915,770.25,925,774.25,921,770.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="919" x2="1000" y1="770.25" y2="770.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="931" y="765.3936">Card taped</text><path d="M13,785.25 L78,785.25 L78,793.25 L68,803.25 L13,803.25 L13,785.25 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="261.1641" style="stroke: #000000; stroke-width: 2.0;" width="933.5" x="13" y="785.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="28" y="799.7451">opt</text><polygon fill="#A80036" points="505,821.9531,495,825.9531,505,829.9531,501,825.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="499" x2="913" y1="825.9531" y2="825.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="511" y="821.0967">Modify Candidate Data Callback (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="704" y="821.0967">BF-12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="739" y="821.0967">)</text><polygon fill="#A80036" points="85,852.3047,75,856.3047,85,860.3047,81,856.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="79" x2="493" y1="856.3047" y2="856.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="91" y="851.4482">Modify Candidate Data Callback (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="35" x="284" y="851.4482">BF-12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="319" y="851.4482">)</text><polygon fill="#A80036" points="482,882.6563,492,886.6563,482,890.6563,486,886.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="886.6563" y2="886.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="81" y="881.7998">EMV_CTLS_GetCandidateData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="333" y="881.7998">40-16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="365" y="881.7998">)</text><polygon fill="#A80036" points="902,913.0078,912,917.0078,902,921.0078,906,917.0078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494" x2="908" y1="917.0078" y2="917.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="252" x="501" y="912.1514">EMV_CTLS_GetCandidateData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="753" y="912.1514">40-16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="785" y="912.1514">)</text><polygon fill="#A80036" points="505,943.3594,495,947.3594,505,951.3594,501,947.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499" x2="913" y1="947.3594" y2="947.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="511" y="942.5029">EMV_CTLS_GetCandidateData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="762" y="942.5029">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="856" y="942.5029">)</text><polygon fill="#A80036" points="85,973.7109,75,977.7109,85,981.7109,81,977.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="977.7109" y2="977.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="91" y="972.8545">EMV_CTLS_GetCandidateData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="342" y="972.8545">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="436" y="972.8545">)</text><polygon fill="#A80036" points="482,1004.0625,492,1008.0625,482,1012.0625,486,1008.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="74" x2="488" y1="1008.0625" y2="1008.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="81" y="1003.2061">Modify Candidate Data Callback Response</text><polygon fill="#A80036" points="902,1034.4141,912,1038.4141,902,1042.4141,906,1038.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="494" x2="908" y1="1038.4141" y2="1038.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="501" y="1033.5576">Modify Candidate Data Callback Response</text><polygon fill="#A80036" points="505,1071.7656,495,1075.7656,505,1079.7656,501,1075.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499" x2="913" y1="1075.7656" y2="1075.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="511" y="1070.9092">Card Detection Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="667" y="1070.9092">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="699" y="1070.9092">)</text><polygon fill="#A80036" points="85,1102.1172,75,1106.1172,85,1110.1172,81,1106.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="1106.1172" y2="1106.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="91" y="1101.2607">Card Detection Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="247" y="1101.2607">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="279" y="1101.2607">)</text><polygon fill="#A80036" points="482,1132.4688,492,1136.4688,482,1140.4688,486,1136.4688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="1136.4688" y2="1136.4688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="81" y="1131.6123">EMV_CTLS_ContinueOffline Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="314" y="1131.6123">40-11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="346" y="1131.6123">)</text><polygon fill="#A80036" points="902,1162.8203,912,1166.8203,902,1170.8203,906,1166.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494" x2="908" y1="1166.8203" y2="1166.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="501" y="1161.9639">EMV_CTLS_ContinueOffline Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="734" y="1161.9639">40-11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="766" y="1161.9639">)</text><polygon fill="#A80036" points="505,1193.1719,495,1197.1719,505,1201.1719,501,1197.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499" x2="913" y1="1197.1719" y2="1197.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="511" y="1192.3154">EMV_CTLS_ContinueOffline Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="743" y="1192.3154">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="837" y="1192.3154">)</text><polygon fill="#A80036" points="85,1223.5234,75,1227.5234,85,1231.5234,81,1227.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="1227.5234" y2="1227.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="232" x="91" y="1222.667">EMV_CTLS_ContinueOffline Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="323" y="1222.667">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="417" y="1222.667">)</text><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1020.5" x="3" y="1256.6992"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="1256.6992" y2="1256.6992"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="1259.6992" y2="1259.6992"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="133" x="446.75" y="1245.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="452.75" y="1263.0186">Get Encrypted PIN</text><polygon fill="#A80036" points="482,1298.2266,492,1302.2266,482,1306.2266,486,1302.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="1302.2266" y2="1302.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="81" y="1297.3701">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="225" y="1297.3701">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="257" y="1297.3701">)</text><polygon fill="#A80036" points="85,1328.5781,75,1332.5781,85,1336.5781,81,1332.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="1332.5781" y2="1332.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="91" y="1327.7217">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="234" y="1327.7217">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="324" y="1327.7217">)</text><polygon fill="#A80036" points="482,1358.9297,492,1362.9297,482,1366.9297,486,1362.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="1362.9297" y2="1362.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="81" y="1358.0732">Crypto Get encrypted Pin Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="299" y="1358.0732">70-08</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="331" y="1358.0732">)</text><polygon fill="#A80036" points="85,1389.2813,75,1393.2813,85,1397.2813,81,1393.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="1393.2813" y2="1393.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="91" y="1388.4248">Crypto Get encrypted Pin Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="308" y="1388.4248">Encrypted PIN block</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="435" y="1388.4248">)</text><polygon fill="#A80036" points="482,1419.6328,492,1423.6328,482,1427.6328,486,1423.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="1423.6328" y2="1423.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="81" y="1418.7764">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="227" y="1418.7764">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="259" y="1418.7764">)</text><polygon fill="#A80036" points="85,1449.9844,75,1453.9844,85,1457.9844,81,1453.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="1453.9844" y2="1453.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="91" y="1449.1279">Crypto Close Response</text><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1020.5" x="3" y="1483.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="1483.1602" y2="1483.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="1486.1602" y2="1486.1602"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="263" x="381.75" y="1471.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="387.75" y="1489.4795">Fetch None Sensitive Transaction Data</text><polygon fill="#A80036" points="482,1524.6875,492,1528.6875,482,1532.6875,486,1528.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="1528.6875" y2="1528.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="81" y="1523.8311">fetchTrxTags Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="226" y="1523.8311">29-02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="258" y="1523.8311">)</text><polygon fill="#A80036" points="85,1555.0391,75,1559.0391,85,1563.0391,81,1559.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="1559.0391" y2="1559.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="91" y="1554.1826">fetchTrxTags Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="235" y="1554.1826">None sensitive Response Tags</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="426" y="1554.1826">)</text><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1020.5" x="3" y="1588.2148"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="1588.2148" y2="1588.2148"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="1591.2148" y2="1591.2148"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="285" x="370.75" y="1577.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="267" x="376.75" y="1594.5342">Get encrypted (sensitive) Transaction Data</text><polygon fill="#A80036" points="482,1629.7422,492,1633.7422,482,1637.7422,486,1633.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="1633.7422" y2="1633.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="81" y="1628.8857">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="225" y="1628.8857">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="257" y="1628.8857">)</text><polygon fill="#A80036" points="85,1660.0938,75,1664.0938,85,1668.0938,81,1664.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="1664.0938" y2="1664.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="91" y="1659.2373">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="234" y="1659.2373">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="324" y="1659.2373">)</text><polygon fill="#A80036" points="482,1690.4453,492,1694.4453,482,1698.4453,486,1694.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="1694.4453" y2="1694.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="81" y="1689.5889">getEncData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="220" y="1689.5889">29-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="252" y="1689.5889">)</text><polygon fill="#A80036" points="85,1720.7969,75,1724.7969,85,1728.7969,81,1724.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="1724.7969" y2="1724.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="91" y="1719.9404">getEncData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="229" y="1719.9404">Encrypted Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="325" y="1719.9404">)</text><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1020.5" x="3" y="1753.9727"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="1753.9727" y2="1753.9727"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="1756.9727" y2="1756.9727"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="199" x="413.75" y="1742.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="419.75" y="1760.292">Get encrypted Message Data</text><polygon fill="#A80036" points="482,1795.5,492,1799.5,482,1803.5,486,1799.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="1799.5" y2="1799.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="81" y="1794.6436">getEncMsgData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="245" y="1794.6436">29-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="277" y="1794.6436">)</text><polygon fill="#A80036" points="85,1825.8516,75,1829.8516,85,1833.8516,81,1829.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="1829.8516" y2="1829.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="91" y="1824.9951">getEncMsgData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="155" x="254" y="1824.9951">Encrypted Message Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="409" y="1824.9951">)</text><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1020.5" x="3" y="1859.0273"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="1859.0273" y2="1859.0273"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="1862.0273" y2="1862.0273"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="165" x="430.75" y="1847.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="436.75" y="1865.3467">Get Message Signature</text><path d="M13,1889.2031 L78,1889.2031 L78,1897.2031 L68,1907.2031 L13,1907.2031 L13,1889.2031 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="535.5" x="13" y="1889.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="28" y="1903.6982">opt</text><polygon fill="#A80036" points="482,1925.9063,492,1929.9063,482,1933.9063,486,1929.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="1929.9063" y2="1929.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="81" y="1925.0498">getMsgSignature Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="250" y="1925.0498">29-04</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="282" y="1925.0498">)</text><polygon fill="#A80036" points="85,1956.2578,75,1960.2578,85,1964.2578,81,1960.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="1960.2578" y2="1960.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="91" y="1955.4014">getMsgSignature Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="121" x="259" y="1955.4014">Message Signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="380" y="1955.4014">)</text><polygon fill="#A80036" points="482,1993.6094,492,1997.6094,482,2001.6094,486,1997.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="1997.6094" y2="1997.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="81" y="1992.7529">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="227" y="1992.7529">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="259" y="1992.7529">)</text><polygon fill="#A80036" points="85,2023.9609,75,2027.9609,85,2031.9609,81,2027.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="2027.9609" y2="2027.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="91" y="2023.1045">Crypto Close Response</text><path d="M13,2042.9609 L78,2042.9609 L78,2050.9609 L68,2060.9609 L13,2060.9609 L13,2042.9609 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="139.7578" style="stroke: #000000; stroke-width: 2.0;" width="933.5" x="13" y="2042.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="28" y="2057.4561">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="326" x="93" y="2056.3799">[Depending on EMV CTLS Continue Offline Response Code]</text><polygon fill="#A80036" points="482,2079.6641,492,2083.6641,482,2087.6641,486,2083.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="2083.6641" y2="2083.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="81" y="2078.8076">EMV_CTLS_ContinueOnline Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="315" y="2078.8076">40-12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="347" y="2078.8076">)</text><polygon fill="#A80036" points="902,2110.0156,912,2114.0156,902,2118.0156,906,2114.0156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494" x2="908" y1="2114.0156" y2="2114.0156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="234" x="501" y="2109.1592">EMV_CTLS_ContinueOnline Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="735" y="2109.1592">40-12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="767" y="2109.1592">)</text><polygon fill="#A80036" points="505,2140.3672,495,2144.3672,505,2148.3672,501,2144.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499" x2="913" y1="2144.3672" y2="2144.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="511" y="2139.5107">EMV_CTLS_ContinueOnline Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="744" y="2139.5107">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="838" y="2139.5107">)</text><polygon fill="#A80036" points="85,2170.7188,75,2174.7188,85,2178.7188,81,2174.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="2174.7188" y2="2174.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="233" x="91" y="2169.8623">EMV_CTLS_ContinueOnline Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="324" y="2169.8623">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="418" y="2169.8623">)</text><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1020.5" x="3" y="2210.8945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="2210.8945" y2="2210.8945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="2213.8945" y2="2213.8945"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="230" x="398.25" y="2199.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="404.25" y="2217.2139">Clear (sensitive) Transaction Data</text><path d="M13,2241.0703 L125,2241.0703 L125,2249.0703 L115,2259.0703 L13,2259.0703 L13,2241.0703 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="89.0547" style="stroke: #000000; stroke-width: 2.0;" width="942" x="13" y="2241.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="28" y="2255.5654">Mandatory</text><polygon fill="#A80036" points="482,2282.7734,492,2286.7734,482,2290.7734,486,2286.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="2286.7734" y2="2286.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="81" y="2281.917">clearDataStore Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="238" y="2281.917">29-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="270" y="2281.917">)</text><path d="M499,2264.4219 L499,2290.4219 L936,2290.4219 L936,2274.4219 L926,2264.4219 L499,2264.4219 " fill="#FBFB77" filter="url(#f141hko2ukfd2i)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M926,2264.4219 L926,2274.4219 L936,2274.4219 L926,2264.4219 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="416" x="505" y="2282.917">automatically cleaned after 8 minutes or with the begining of the next trx</text><polygon fill="#A80036" points="85,2318.125,75,2322.125,85,2326.125,81,2322.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="2322.125" y2="2322.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="91" y="2317.2686">clearDataStore Response</text><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1020.5" x="3" y="2358.3008"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="2358.3008" y2="2358.3008"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="2361.3008" y2="2361.3008"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="188" x="419.25" y="2347.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="170" x="425.25" y="2364.6201">Exit EMV CTLS Framework</text><polygon fill="#A80036" points="482,2399.8281,492,2403.8281,482,2407.8281,486,2403.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="2403.8281" y2="2403.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="81" y="2398.9717">EMV_CTLS_Exit_Framework Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="321" y="2398.9717">40-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="353" y="2398.9717">)</text><polygon fill="#A80036" points="902,2430.1797,912,2434.1797,902,2438.1797,906,2434.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="494" x2="908" y1="2434.1797" y2="2434.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="501" y="2429.3232">EMV_CTLS_Exit_Framework Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="741" y="2429.3232">40-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="773" y="2429.3232">)</text><polygon fill="#A80036" points="505,2460.5313,495,2464.5313,505,2468.5313,501,2464.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="499" x2="913" y1="2464.5313" y2="2464.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="511" y="2459.6748">EMV_CTLS_Exit_Framework Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="750" y="2459.6748">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="782" y="2459.6748">)</text><polygon fill="#A80036" points="85,2490.8828,75,2494.8828,85,2498.8828,81,2494.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="2494.8828" y2="2494.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="239" x="91" y="2490.0264">EMV_CTLS_Exit_Framework Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="330" y="2490.0264">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="362" y="2490.0264">)</text><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1020.5" x="3" y="2524.0586"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="2524.0586" y2="2524.0586"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1023.5" y1="2527.0586" y2="2527.0586"/><rect fill="#EEEEEE" filter="url(#f141hko2ukfd2i)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="95" x="465.75" y="2512.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="471.75" y="2530.3779">Disable EPP</text><polygon fill="#A80036" points="482,2565.5859,492,2569.5859,482,2573.5859,486,2569.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="488" y1="2569.5859" y2="2569.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="81" y="2564.7295">Enable EPP Command(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="219" y="2564.7295">20-21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="251" y="2564.7295">) with</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="286" y="2564.7295">P2=01</text><polygon fill="#A80036" points="85,2595.9375,75,2599.9375,85,2603.9375,81,2599.9375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="493" y1="2599.9375" y2="2599.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="91" y="2595.0811">Enable EPP Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="232" y="2595.0811">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="264" y="2595.0811">)</text><!--
@startuml

title SDI: EMV-CTLS Basic Transaction Flow with EPP

participant "Payment App" order 10
participant "Countertop" order 20
participant "EPP" order 30
actor User order 40

== Enable EPP ==

"Payment App" -> "Countertop": Enable EPP Command(<b>20-21</b>) with <b>P2=00</b>
"Countertop" - -> "Payment App": Enable EPP Response (<b>90-00</b>)

== Initialize EMV CTLS Framework ==

"Payment App" -> "Countertop": EMV_CTLS_Init_Framework Command (<b>40-00</b>)
"Countertop" -> "EPP": EMV_CTLS_Init_Framework Command (<b>40-00</b>)
"EPP" - -> "Countertop": EMV_CTLS_Init_Framework Response (<b>90-00</b>)
"Countertop" - -> "Payment App": EMV_CTLS_Init_Framework Response (<b>90-00</b>)

== EMV CTLS Transaction ==

"Payment App" -> "Countertop": EMV_CTLS_SetupTransaction Command (<b>40-10</b>)
"Countertop" -> "EPP": EMV_CTLS_SetupTransaction Command (<b>40-10</b>)
"EPP" - -> "Countertop": EMV_CTLS_SetupTransaction Response (<b>Response Data</b>)
"Countertop" - -> "Payment App": EMV_CTLS_SetupTransaction Response (<b>Response Data</b>)

"Payment App" -> "Countertop": Handle Display Command (<b>24-03</b>) on EPP (<b>DFA1500102</b>) "Tap Card"
"Countertop" -> "EPP": Handle Display Command (<b>24-03</b>) on EPP (<b>DFA1500102</b>) "Tap Card"
"EPP" - -> "Countertop": Handle Display Response (<b>90-00</b>)
"Countertop" - -> "Payment App": Handle Display Response (<b>90-00</b>)

"Payment App" -> "Countertop": Card Detection Command (<b>23-01</b>)
"Countertop" -> "EPP": Card Detection Command (<b>23-01</b>)
"User" -> "EPP": Card taped
opt
  "EPP" -> "Countertop": Modify Candidate Data Callback (<b>BF-12</b>)
  "Countertop" -> "Payment App": Modify Candidate Data Callback (<b>BF-12</b>)
  "Payment App" -> "Countertop": EMV_CTLS_GetCandidateData Command (<b>40-16</b>)
  "Countertop" -> "EPP": EMV_CTLS_GetCandidateData Command (<b>40-16</b>)
  "EPP" - -> "Countertop": EMV_CTLS_GetCandidateData Response (<b>Response Data</b>)
  "Countertop" - -> "Payment App": EMV_CTLS_GetCandidateData Response (<b>Response Data</b>)
  "Payment App" - -> "Countertop": Modify Candidate Data Callback Response
  "Countertop" - -> "EPP": Modify Candidate Data Callback Response
end
"EPP" - -> "Countertop": Card Detection Response (<b>90-00</b>)
"Countertop" - -> "Payment App": Card Detection Response (<b>90-00</b>)
"Payment App" -> "Countertop": EMV_CTLS_ContinueOffline Command (<b>40-11</b>)
"Countertop" -> "EPP": EMV_CTLS_ContinueOffline Command (<b>40-11</b>)
"EPP" - -> "Countertop": EMV_CTLS_ContinueOffline Response (<b>Response Data</b>)
"Countertop" - -> "Payment App": EMV_CTLS_ContinueOffline Response (<b>Response Data</b>)

== Get Encrypted PIN ==

"Payment App" -> "Countertop": Crypto Open Command (<b>70-00</b>)
"Countertop" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "Countertop": Crypto Get encrypted Pin Command (<b>70-08</b>)
"Countertop" - -> "Payment App": Crypto Get encrypted Pin Response (<b>Encrypted PIN block</b>)

"Payment App" -> "Countertop": Crypto Close Command (<b>70-01</b>)
"Countertop" - -> "Payment App": Crypto Close Response

== Fetch None Sensitive Transaction Data ==

"Payment App" -> "Countertop": fetchTrxTags Command (<b>29-02</b>)
"Countertop" - -> "Payment App": fetchTrxTags Response (<b>None sensitive Response Tags</b>)

== Get encrypted (sensitive) Transaction Data ==

"Payment App" -> "Countertop": Crypto Open Command (<b>70-00</b>)
"Countertop" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "Countertop": getEncData Command (<b>29-00</b>)
"Countertop" - -> "Payment App": getEncData Response (<b>Encrypted Data</b>)

== Get encrypted Message Data ==

"Payment App" -> "Countertop": getEncMsgData Command (<b>29-01</b>)
"Countertop" - -> "Payment App": getEncMsgData Response (<b>Encrypted Message Data</b>)

== Get Message Signature ==

opt
  "Payment App" -> "Countertop": getMsgSignature Command (<b>29-04</b>)
  "Countertop" - -> "Payment App": getMsgSignature Response (<b>Message Signature</b>)
end
"Payment App" -> "Countertop": Crypto Close Command (<b>70-01</b>)
"Countertop" - -> "Payment App": Crypto Close Response

opt Depending on EMV CTLS Continue Offline Response Code
  "Payment App" -> "Countertop": EMV_CTLS_ContinueOnline Command (<b>40-12</b>)
  "Countertop" -> "EPP": EMV_CTLS_ContinueOnline Command (<b>40-12</b>)
  "EPP" - -> "Countertop": EMV_CTLS_ContinueOnline Response (<b>Response Data</b>)
  "Countertop" - -> "Payment App": EMV_CTLS_ContinueOnline Response (<b>Response Data</b>)
end

== Clear (sensitive) Transaction Data ==

group Mandatory
  "Payment App" -> "Countertop": clearDataStore Command (<b>29-03</b>)
  note right: automatically cleaned after 8 minutes or with the begining of the next trx
  "Countertop" - -> "Payment App": clearDataStore Response
end

== Exit EMV CTLS Framework ==

"Payment App" -> "Countertop": EMV_CTLS_Exit_Framework Command (<b>40-00</b>)
"Countertop" -> "EPP": EMV_CTLS_Exit_Framework Command (<b>40-00</b>)
"EPP" - -> "Countertop": EMV_CTLS_Exit_Framework Response (<b>90-00</b>)
"Countertop" - -> "Payment App": EMV_CTLS_Exit_Framework Response (<b>90-00</b>)

== Disable EPP ==

"Payment App" -> "Countertop": Enable EPP Command(<b>20-21</b>) with <b>P2=01</b>
"Countertop" - -> "Payment App": Enable EPP Response (<b>90-00</b>)

@enduml

PlantUML version 1.2019.03(Sun Mar 10 12:04:44 CET 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 16.0.1+9-24
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>