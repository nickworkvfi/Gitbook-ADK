<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="3058px" preserveAspectRatio="none" style="width:1306px;height:3058px;" version="1.1" viewBox="0 0 1306 3058" width="1306px" zoomAndPan="magnify"><defs><filter height="300%" id="f14qudkqc648c" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="314" x="491.75" y="24.5332">SDI: EMV-CT Basic Transaction Flow with EPP</text><rect fill="#FFFFFF" filter="url(#f14qudkqc648c)" height="48.7031" style="stroke: #000000; stroke-width: 2.0;" width="353" x="931.5" y="951.0078"/><rect fill="#FFFFFF" filter="url(#f14qudkqc648c)" height="48.7031" style="stroke: #000000; stroke-width: 2.0;" width="353" x="931.5" y="1135.1172"/><rect fill="#FFFFFF" filter="url(#f14qudkqc648c)" height="48.7031" style="stroke: #000000; stroke-width: 2.0;" width="353" x="931.5" y="1197.8203"/><rect fill="#FFFFFF" filter="url(#f14qudkqc648c)" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="560.5" x="13" y="1967.9063"/><rect fill="#FFFFFF" filter="url(#f14qudkqc648c)" height="139.7578" style="stroke: #000000; stroke-width: 2.0;" width="983.5" x="13" y="2121.6641"/><rect fill="#FFFFFF" filter="url(#f14qudkqc648c)" height="89.0547" style="stroke: #000000; stroke-width: 2.0;" width="967" x="13" y="2592.9375"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="74" x2="74" y1="119.2188" y2="2969.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="518.5" x2="518.5" y1="119.2188" y2="2969.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="963.5" x2="963.5" y1="119.2188" y2="2969.8047"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="1104.5" x2="1104.5" y1="119.2188" y2="2969.8047"/><rect fill="#FEFECE" filter="url(#f14qudkqc648c)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="23" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="30" y="104.1426">Payment App</text><rect fill="#FEFECE" filter="url(#f14qudkqc648c)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="98" x="23" y="2968.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="84" x="30" y="2990.3379">Payment App</text><rect fill="#FEFECE" filter="url(#f14qudkqc648c)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="474.5" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="481.5" y="104.1426">Countertop</text><rect fill="#FEFECE" filter="url(#f14qudkqc648c)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="474.5" y="2968.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="481.5" y="2990.3379">Countertop</text><rect fill="#FEFECE" filter="url(#f14qudkqc648c)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="941.5" y="82.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="948.5" y="104.1426">EPP</text><rect fill="#FEFECE" filter="url(#f14qudkqc648c)" height="31.6094" style="stroke: #A80036; stroke-width: 1.5;" width="41" x="941.5" y="2968.8047"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="27" x="948.5" y="2990.3379">EPP</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="1087.5" y="116.1426">User</text><ellipse cx="1105" cy="44.6094" fill="#FEFECE" filter="url(#f14qudkqc648c)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1105,52.6094 L1105,79.6094 M1092,60.6094 L1118,60.6094 M1105,79.6094 L1092,94.6094 M1105,79.6094 L1118,94.6094 " fill="none" filter="url(#f14qudkqc648c)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="29" x="1087.5" y="2983.3379">User</text><ellipse cx="1105" cy="2996.4141" fill="#FEFECE" filter="url(#f14qudkqc648c)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M1105,3004.4141 L1105,3031.4141 M1092,3012.4141 L1118,3012.4141 M1105,3031.4141 L1092,3046.4141 M1105,3031.4141 L1118,3046.4141 " fill="none" filter="url(#f14qudkqc648c)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="150.3945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="150.3945" y2="150.3945"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="153.3945" y2="153.3945"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="92" x="602.75" y="139.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="74" x="608.75" y="156.7139">Enable EPP</text><polygon fill="#A80036" points="507,191.9219,517,195.9219,507,199.9219,511,195.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="195.9219" y2="195.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="81" y="191.0654">Enable EPP Command(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="219" y="191.0654">20-21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="251" y="191.0654">) with</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="286" y="191.0654">P2=00</text><polygon fill="#A80036" points="85,222.2734,75,226.2734,85,230.2734,81,226.2734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="226.2734" y2="226.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="91" y="221.417">Enable EPP Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="232" y="221.417">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="264" y="221.417">)</text><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="255.4492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="255.4492" y2="255.4492"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="258.4492" y2="258.4492"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="202" x="547.75" y="244.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="184" x="553.75" y="261.7686">Initialize EMV CT Framework</text><polygon fill="#A80036" points="507,296.9766,517,300.9766,507,304.9766,511,300.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="300.9766" y2="300.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="81" y="296.1201">EMV_CT_Init_Framework Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="299" y="296.1201">39-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="331" y="296.1201">)</text><polygon fill="#A80036" points="952,327.3281,962,331.3281,952,335.3281,956,331.3281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="958" y1="331.3281" y2="331.3281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="526" y="326.4717">EMV_CT_Init_Framework Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="744" y="326.4717">39-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="776" y="326.4717">)</text><polygon fill="#A80036" points="530,357.6797,520,361.6797,530,365.6797,526,361.6797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="524" x2="963" y1="361.6797" y2="361.6797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="536" y="356.8232">EMV_CT_Init_Framework Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="753" y="356.8232">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="785" y="356.8232">)</text><polygon fill="#A80036" points="85,388.0313,75,392.0313,85,396.0313,81,392.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="392.0313" y2="392.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="91" y="387.1748">EMV_CT_Init_Framework Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="308" y="387.1748">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="340" y="387.1748">)</text><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="421.207"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="421.207" y2="421.207"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="424.207" y2="424.207"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="105" x="596.25" y="410.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="87" x="602.25" y="427.5264">Card Reading</text><polygon fill="#A80036" points="507,462.7344,517,466.7344,507,470.7344,511,466.7344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="466.7344" y2="466.7344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="81" y="461.8779">Handle Display Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="239" y="461.8779">24-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="271" y="461.8779">) on EPP (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="332" y="461.8779">DFA1500102</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="407" y="461.8779">) "Insert Card"</text><polygon fill="#A80036" points="952,493.0859,962,497.0859,952,501.0859,956,497.0859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="958" y1="497.0859" y2="497.0859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="526" y="492.2295">Handle Display Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="684" y="492.2295">24-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="716" y="492.2295">) on EPP (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="777" y="492.2295">DFA1500102</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="852" y="492.2295">) "Insert Card"</text><polygon fill="#A80036" points="530,523.4375,520,527.4375,530,531.4375,526,527.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="524" x2="963" y1="527.4375" y2="527.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="536" y="522.5811">Handle Display Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="693" y="522.5811">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="725" y="522.5811">)</text><polygon fill="#A80036" points="85,553.7891,75,557.7891,85,561.7891,81,557.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="557.7891" y2="557.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="91" y="552.9326">Handle Display Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="248" y="552.9326">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="280" y="552.9326">)</text><polygon fill="#A80036" points="507,584.1406,517,588.1406,507,592.1406,511,588.1406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="588.1406" y2="588.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="81" y="583.2842">Card Detection Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="238" y="583.2842">23-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="270" y="583.2842">)</text><polygon fill="#A80036" points="952,614.4922,962,618.4922,952,622.4922,956,618.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="958" y1="618.4922" y2="618.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="526" y="613.6357">Card Detection Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="683" y="613.6357">23-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="715" y="613.6357">)</text><polygon fill="#A80036" points="975,644.8438,965,648.8438,975,652.8438,971,648.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="969" x2="1104" y1="648.8438" y2="648.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="981" y="643.9873">Card inserted</text><polygon fill="#A80036" points="530,675.1953,520,679.1953,530,683.1953,526,679.1953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="524" x2="963" y1="679.1953" y2="679.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="536" y="674.3389">Card Detection Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="692" y="674.3389">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="724" y="674.3389">)</text><polygon fill="#A80036" points="85,705.5469,75,709.5469,85,713.5469,81,709.5469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="709.5469" y2="709.5469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="91" y="704.6904">Card Detection Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="247" y="704.6904">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="279" y="704.6904">)</text><polygon fill="#A80036" points="507,735.8984,517,739.8984,507,743.8984,511,739.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="739.8984" y2="739.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="81" y="735.042">Smart Card Activate Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="268" y="735.042">41-02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="300" y="735.042">)</text><polygon fill="#A80036" points="952,766.25,962,770.25,952,774.25,956,770.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="958" y1="770.25" y2="770.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="187" x="526" y="765.3936">Smart Card Activate Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="713" y="765.3936">41-02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="745" y="765.3936">)</text><polygon fill="#A80036" points="530,796.6016,520,800.6016,530,804.6016,526,800.6016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="524" x2="963" y1="800.6016" y2="800.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="536" y="795.7451">Smart Card Activate Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="722" y="795.7451">ATR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="748" y="795.7451">)</text><polygon fill="#A80036" points="85,826.9531,75,830.9531,85,834.9531,81,830.9531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="830.9531" y2="830.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="91" y="826.0967">Smart Card Activate Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="26" x="277" y="826.0967">ATR</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="303" y="826.0967">)</text><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="860.1289"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="860.1289" y2="860.1289"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="863.1289" y2="863.1289"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="145" x="576.25" y="848.9531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="582.25" y="866.4482">EMV CT Transaction</text><polygon fill="#A80036" points="507,901.6563,517,905.6563,507,909.6563,511,905.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="905.6563" y2="905.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="81" y="900.7998">EMV_CT_StartTransaction (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="243" y="900.7998">39-10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="275" y="900.7998">)</text><polygon fill="#A80036" points="952,932.0078,962,936.0078,952,940.0078,956,936.0078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="958" y1="936.0078" y2="936.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="526" y="931.1514">EMV_CT_StartTransaction (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="688" y="931.1514">39-10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="720" y="931.1514">)</text><path d="M931.5,951.0078 L996.5,951.0078 L996.5,959.0078 L986.5,969.0078 L931.5,969.0078 L931.5,951.0078 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="48.7031" style="stroke: #000000; stroke-width: 2.0;" width="353" x="931.5" y="951.0078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="946.5" y="965.5029">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="268" x="1011.5" y="964.4268">[Depending on EMV configuration and used card]</text><polygon fill="#A80036" points="975,987.7109,965,991.7109,975,995.7109,971,991.7109" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="969" x2="1104" y1="991.7109" y2="991.7109"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="981" y="986.8545">Application selected</text><polygon fill="#A80036" points="530,1025.0625,520,1029.0625,530,1033.0625,526,1029.0625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="524" x2="963" y1="1029.0625" y2="1029.0625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="536" y="1024.2061">EMV_CT_StartTransaction Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="760" y="1024.2061">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="854" y="1024.2061">)</text><polygon fill="#A80036" points="85,1055.4141,75,1059.4141,85,1063.4141,81,1059.4141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="1059.4141" y2="1059.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="91" y="1054.5576">EMV_CT_StartTransaction Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="315" y="1054.5576">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="409" y="1054.5576">)</text><polygon fill="#A80036" points="507,1085.7656,517,1089.7656,507,1093.7656,511,1089.7656" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="1089.7656" y2="1089.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="81" y="1084.9092">EMV_CT_ContinueOffline Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="298" y="1084.9092">39-11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="330" y="1084.9092">)</text><polygon fill="#A80036" points="952,1116.1172,962,1120.1172,952,1124.1172,956,1120.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="958" y1="1120.1172" y2="1120.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="526" y="1115.2607">EMV_CT_ContinueOffline Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="743" y="1115.2607">39-11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="775" y="1115.2607">)</text><path d="M931.5,1135.1172 L996.5,1135.1172 L996.5,1143.1172 L986.5,1153.1172 L931.5,1153.1172 L931.5,1135.1172 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="48.7031" style="stroke: #000000; stroke-width: 2.0;" width="353" x="931.5" y="1135.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="946.5" y="1149.6123">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="268" x="1011.5" y="1148.5361">[Depending on EMV configuration and used card]</text><polygon fill="#A80036" points="975,1171.8203,965,1175.8203,975,1179.8203,971,1175.8203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="969" x2="1104" y1="1175.8203" y2="1175.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="981" y="1170.9639">Ammount confirmed</text><path d="M931.5,1197.8203 L996.5,1197.8203 L996.5,1205.8203 L986.5,1215.8203 L931.5,1215.8203 L931.5,1197.8203 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="48.7031" style="stroke: #000000; stroke-width: 2.0;" width="353" x="931.5" y="1197.8203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="946.5" y="1212.3154">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="268" x="1011.5" y="1211.2393">[Depending on EMV configuration and used card]</text><polygon fill="#A80036" points="975,1234.5234,965,1238.5234,975,1242.5234,971,1238.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="969" x2="1104" y1="1238.5234" y2="1238.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="68" x="981" y="1233.667">PIN entered</text><polygon fill="#A80036" points="530,1271.875,520,1275.875,530,1279.875,526,1275.875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="524" x2="963" y1="1275.875" y2="1275.875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="536" y="1271.0186">EMV_CT_ContinueOffline Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="752" y="1271.0186">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="846" y="1271.0186">)</text><polygon fill="#A80036" points="85,1302.2266,75,1306.2266,85,1310.2266,81,1306.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="1306.2266" y2="1306.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="216" x="91" y="1301.3701">EMV_CT_ContinueOffline Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="307" y="1301.3701">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="401" y="1301.3701">)</text><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="1335.4023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="1335.4023" y2="1335.4023"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="1338.4023" y2="1338.4023"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="133" x="582.25" y="1324.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="588.25" y="1341.7217">Get Encrypted PIN</text><polygon fill="#A80036" points="507,1376.9297,517,1380.9297,507,1384.9297,511,1380.9297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="1380.9297" y2="1380.9297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="81" y="1376.0732">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="225" y="1376.0732">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="257" y="1376.0732">)</text><polygon fill="#A80036" points="85,1407.2813,75,1411.2813,85,1415.2813,81,1411.2813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="1411.2813" y2="1411.2813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="91" y="1406.4248">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="234" y="1406.4248">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="324" y="1406.4248">)</text><polygon fill="#A80036" points="507,1437.6328,517,1441.6328,507,1445.6328,511,1441.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="1441.6328" y2="1441.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="81" y="1436.7764">Crypto Get encrypted Pin Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="299" y="1436.7764">70-08</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="331" y="1436.7764">)</text><polygon fill="#A80036" points="85,1467.9844,75,1471.9844,85,1475.9844,81,1471.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="1471.9844" y2="1471.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="91" y="1467.1279">Crypto Get encrypted Pin Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="127" x="308" y="1467.1279">Encrypted PIN block</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="439" y="1467.1279">)</text><polygon fill="#A80036" points="507,1498.3359,517,1502.3359,507,1506.3359,511,1502.3359" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="1502.3359" y2="1502.3359"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="81" y="1497.4795">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="227" y="1497.4795">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="259" y="1497.4795">)</text><polygon fill="#A80036" points="85,1528.6875,75,1532.6875,85,1536.6875,81,1532.6875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="1532.6875" y2="1532.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="91" y="1527.8311">Crypto Close Response</text><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="1561.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="1561.8633" y2="1561.8633"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="1564.8633" y2="1564.8633"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="263" x="517.25" y="1550.6875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="245" x="523.25" y="1568.1826">Fetch None Sensitive Transaction Data</text><polygon fill="#A80036" points="507,1603.3906,517,1607.3906,507,1611.3906,511,1607.3906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="1607.3906" y2="1607.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="145" x="81" y="1602.5342">fetchTrxTags Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="226" y="1602.5342">29-02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="258" y="1602.5342">)</text><polygon fill="#A80036" points="85,1633.7422,75,1637.7422,85,1641.7422,81,1637.7422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="1637.7422" y2="1637.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="91" y="1632.8857">fetchTrxTags Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="191" x="235" y="1632.8857">None sensitive Response Tags</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="426" y="1632.8857">)</text><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="1666.918"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="1666.918" y2="1666.918"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="1669.918" y2="1669.918"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="285" x="506.25" y="1655.7422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="267" x="512.25" y="1673.2373">Get encrypted (sensitive) Transaction Data</text><polygon fill="#A80036" points="507,1708.4453,517,1712.4453,507,1716.4453,511,1712.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="1712.4453" y2="1712.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="144" x="81" y="1707.5889">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="225" y="1707.5889">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="257" y="1707.5889">)</text><polygon fill="#A80036" points="85,1738.7969,75,1742.7969,85,1746.7969,81,1742.7969" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="1742.7969" y2="1742.7969"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="143" x="91" y="1737.9404">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="90" x="234" y="1737.9404">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="324" y="1737.9404">)</text><polygon fill="#A80036" points="507,1769.1484,517,1773.1484,507,1777.1484,511,1773.1484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="1773.1484" y2="1773.1484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="139" x="81" y="1768.292">getEncData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="220" y="1768.292">29-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="252" y="1768.292">)</text><polygon fill="#A80036" points="85,1799.5,75,1803.5,85,1807.5,81,1803.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="1803.5" y2="1803.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="91" y="1798.6436">getEncData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="96" x="229" y="1798.6436">Encrypted Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="325" y="1798.6436">)</text><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="1832.6758"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="1832.6758" y2="1832.6758"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="1835.6758" y2="1835.6758"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="199" x="549.25" y="1821.5"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="181" x="555.25" y="1838.9951">Get encrypted Message Data</text><polygon fill="#A80036" points="507,1874.2031,517,1878.2031,507,1882.2031,511,1878.2031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="1878.2031" y2="1878.2031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="164" x="81" y="1873.3467">getEncMsgData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="245" y="1873.3467">29-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="277" y="1873.3467">)</text><polygon fill="#A80036" points="85,1904.5547,75,1908.5547,85,1912.5547,81,1908.5547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="1908.5547" y2="1908.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="314" x="91" y="1903.6982">getEncMsgData Response (Encrypted Message Data)</text><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="1937.7305"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="1937.7305" y2="1937.7305"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="1940.7305" y2="1940.7305"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="165" x="566.25" y="1926.5547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="147" x="572.25" y="1944.0498">Get Message Signature</text><path d="M13,1967.9063 L78,1967.9063 L78,1975.9063 L68,1985.9063 L13,1985.9063 L13,1967.9063 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="79.0547" style="stroke: #000000; stroke-width: 2.0;" width="560.5" x="13" y="1967.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="28" y="1982.4014">opt</text><polygon fill="#A80036" points="507,2004.6094,517,2008.6094,507,2012.6094,511,2008.6094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="2008.6094" y2="2008.6094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="81" y="2003.7529">getMsgSignature Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="250" y="2003.7529">29-04</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="282" y="2003.7529">)</text><polygon fill="#A80036" points="85,2034.9609,75,2038.9609,85,2042.9609,81,2038.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="2038.9609" y2="2038.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="91" y="2034.1045">getMsgSignature Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="121" x="259" y="2034.1045">Message Signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="380" y="2034.1045">)</text><polygon fill="#A80036" points="507,2072.3125,517,2076.3125,507,2080.3125,511,2076.3125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="2076.3125" y2="2076.3125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="81" y="2071.4561">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="227" y="2071.4561">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="259" y="2071.4561">)</text><polygon fill="#A80036" points="85,2102.6641,75,2106.6641,85,2110.6641,81,2106.6641" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="2106.6641" y2="2106.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="137" x="91" y="2101.8076">Crypto Close Response</text><path d="M13,2121.6641 L78,2121.6641 L78,2129.6641 L68,2139.6641 L13,2139.6641 L13,2121.6641 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="139.7578" style="stroke: #000000; stroke-width: 2.0;" width="983.5" x="13" y="2121.6641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="20" x="28" y="2136.1592">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="312" x="93" y="2135.083">[Depending on EMV CT Continue Offline Response Code]</text><polygon fill="#A80036" points="507,2158.3672,517,2162.3672,507,2166.3672,511,2162.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="2162.3672" y2="2162.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="81" y="2157.5107">EMV_CT_ContinueOnline Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="299" y="2157.5107">39-12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="331" y="2157.5107">)</text><polygon fill="#A80036" points="952,2188.7188,962,2192.7188,952,2196.7188,956,2192.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="958" y1="2192.7188" y2="2192.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="218" x="526" y="2187.8623">EMV_CT_ContinueOnline Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="744" y="2187.8623">39-12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="776" y="2187.8623">)</text><polygon fill="#A80036" points="530,2219.0703,520,2223.0703,530,2227.0703,526,2223.0703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="524" x2="963" y1="2223.0703" y2="2223.0703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="536" y="2218.2139">EMV_CT_ContinueOnline Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="753" y="2218.2139">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="847" y="2218.2139">)</text><polygon fill="#A80036" points="85,2249.4219,75,2253.4219,85,2257.4219,81,2253.4219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="2253.4219" y2="2253.4219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="217" x="91" y="2248.5654">EMV_CT_ContinueOnline Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="94" x="308" y="2248.5654">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="402" y="2248.5654">)</text><polygon fill="#A80036" points="507,2286.7734,517,2290.7734,507,2294.7734,511,2290.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="2290.7734" y2="2290.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="81" y="2285.917">Smart Card Deactivate Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="282" y="2285.917">41-04</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="314" y="2285.917">)</text><polygon fill="#A80036" points="952,2317.125,962,2321.125,952,2325.125,956,2321.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="958" y1="2321.125" y2="2321.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="526" y="2316.2686">Smart Card Deactivate Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="727" y="2316.2686">41-04</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="759" y="2316.2686">)</text><polygon fill="#A80036" points="530,2347.4766,520,2351.4766,530,2355.4766,526,2351.4766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="524" x2="963" y1="2351.4766" y2="2351.4766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="536" y="2346.6201">Smart Card Deactivate Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="736" y="2346.6201">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="768" y="2346.6201">)</text><polygon fill="#A80036" points="85,2377.8281,75,2381.8281,85,2385.8281,81,2381.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="2381.8281" y2="2381.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="200" x="91" y="2376.9717">Smart Card Deactivate Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="291" y="2376.9717">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="323" y="2376.9717">)</text><polygon fill="#A80036" points="507,2408.1797,517,2412.1797,507,2416.1797,511,2412.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="2412.1797" y2="2412.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="81" y="2407.3232">Handle Display Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="239" y="2407.3232">24-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="271" y="2407.3232">) on EPP (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="332" y="2407.3232">DFA1500102</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="407" y="2407.3232">) "Remove Card"</text><polygon fill="#A80036" points="952,2438.5313,962,2442.5313,952,2446.5313,956,2442.5313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="958" y1="2442.5313" y2="2442.5313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="526" y="2437.6748">Handle Display Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="684" y="2437.6748">24-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="61" x="716" y="2437.6748">) on EPP (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="75" x="777" y="2437.6748">DFA1500102</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="852" y="2437.6748">) "Remove Card"</text><polygon fill="#A80036" points="530,2468.8828,520,2472.8828,530,2476.8828,526,2472.8828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="524" x2="963" y1="2472.8828" y2="2472.8828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="536" y="2468.0264">Handle Display Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="693" y="2468.0264">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="725" y="2468.0264">)</text><polygon fill="#A80036" points="85,2499.2344,75,2503.2344,85,2507.2344,81,2503.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="2503.2344" y2="2503.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="91" y="2498.3779">Handle Display Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="248" y="2498.3779">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="280" y="2498.3779">)</text><polygon fill="#A80036" points="975,2529.5859,965,2533.5859,975,2537.5859,971,2533.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="969" x2="1104" y1="2533.5859" y2="2533.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="981" y="2528.7295">Card removal</text><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="2562.7617"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="2562.7617" y2="2562.7617"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="2565.7617" y2="2565.7617"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="230" x="533.75" y="2551.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="212" x="539.75" y="2569.0811">Clear (sensitive) Transaction Data</text><path d="M13,2592.9375 L125,2592.9375 L125,2600.9375 L115,2610.9375 L13,2610.9375 L13,2592.9375 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="89.0547" style="stroke: #000000; stroke-width: 2.0;" width="967" x="13" y="2592.9375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="67" x="28" y="2607.4326">Mandatory</text><polygon fill="#A80036" points="507,2634.6406,517,2638.6406,507,2642.6406,511,2638.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="2638.6406" y2="2638.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="157" x="81" y="2633.7842">clearDataStore Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="238" y="2633.7842">29-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="270" y="2633.7842">)</text><path d="M524,2616.2891 L524,2642.2891 L961,2642.2891 L961,2626.2891 L951,2616.2891 L524,2616.2891 " fill="#FBFB77" filter="url(#f14qudkqc648c)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M951,2616.2891 L951,2626.2891 L961,2626.2891 L951,2616.2891 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="416" x="530" y="2634.7842">automatically cleaned after 8 minutes or with the begining of the next trx</text><polygon fill="#A80036" points="85,2669.9922,75,2673.9922,85,2677.9922,81,2673.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="2673.9922" y2="2673.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="148" x="91" y="2669.1357">clearDataStore Response</text><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="2710.168"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="2710.168" y2="2710.168"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="2713.168" y2="2713.168"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="171" x="563.25" y="2698.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="153" x="569.25" y="2716.4873">Exit EMV CT Framework</text><polygon fill="#A80036" points="507,2751.6953,517,2755.6953,507,2759.6953,511,2755.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="2755.6953" y2="2755.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="81" y="2750.8389">EMV_CT_Exit_Framework Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="305" y="2750.8389">39-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="337" y="2750.8389">)</text><polygon fill="#A80036" points="952,2782.0469,962,2786.0469,952,2790.0469,956,2786.0469" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="519" x2="958" y1="2786.0469" y2="2786.0469"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="224" x="526" y="2781.1904">EMV_CT_Exit_Framework Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="750" y="2781.1904">39-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="782" y="2781.1904">)</text><polygon fill="#A80036" points="530,2812.3984,520,2816.3984,530,2820.3984,526,2816.3984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="524" x2="963" y1="2816.3984" y2="2816.3984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="536" y="2811.542">EMV_CT_Exit_Framework Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="759" y="2811.542">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="791" y="2811.542">)</text><polygon fill="#A80036" points="85,2842.75,75,2846.75,85,2850.75,81,2846.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="2846.75" y2="2846.75"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="223" x="91" y="2841.8936">EMV_CT_Exit_Framework Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="314" y="2841.8936">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="346" y="2841.8936">)</text><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1291.5" x="3" y="2875.9258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="2875.9258" y2="2875.9258"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1294.5" y1="2878.9258" y2="2878.9258"/><rect fill="#EEEEEE" filter="url(#f14qudkqc648c)" height="24.3516" style="stroke: #000000; stroke-width: 2.0;" width="95" x="601.25" y="2864.75"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="77" x="607.25" y="2882.2451">Disable EPP</text><polygon fill="#A80036" points="507,2917.4531,517,2921.4531,507,2925.4531,511,2921.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="74" x2="513" y1="2921.4531" y2="2921.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="138" x="81" y="2916.5967">Enable EPP Command(</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="219" y="2916.5967">20-21</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="31" x="251" y="2916.5967">) with</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="38" x="286" y="2916.5967">P2=01</text><polygon fill="#A80036" points="85,2947.8047,75,2951.8047,85,2955.8047,81,2951.8047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="79" x2="518" y1="2951.8047" y2="2951.8047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="141" x="91" y="2946.9482">Enable EPP Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="232" y="2946.9482">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="4" x="264" y="2946.9482">)</text><!--
@startuml

title SDI: EMV-CT Basic Transaction Flow with EPP

participant "Payment App" order 10
participant "Countertop" order 20
participant "EPP" order 30
actor User order 40

== Enable EPP ==

"Payment App" -> "Countertop": Enable EPP Command(<b>20-21</b>) with <b>P2=00</b>
"Countertop" - -> "Payment App": Enable EPP Response (<b>90-00</b>)

== Initialize EMV CT Framework ==

"Payment App" -> "Countertop": EMV_CT_Init_Framework Command (<b>39-00</b>)
"Countertop" -> "EPP": EMV_CT_Init_Framework Command (<b>39-00</b>)
"EPP" - -> "Countertop": EMV_CT_Init_Framework Response (<b>90-00</b>)
"Countertop" - -> "Payment App": EMV_CT_Init_Framework Response (<b>90-00</b>)

== Card Reading ==

"Payment App" -> "Countertop": Handle Display Command (<b>24-03</b>) on EPP (<b>DFA1500102</b>) "Insert Card"
"Countertop" -> "EPP": Handle Display Command (<b>24-03</b>) on EPP (<b>DFA1500102</b>) "Insert Card"
"EPP" - -> "Countertop": Handle Display Response (<b>90-00</b>)
"Countertop" - -> "Payment App": Handle Display Response (<b>90-00</b>)

"Payment App" -> "Countertop": Card Detection Command (<b>23-01</b>)
"Countertop" -> "EPP": Card Detection Command (<b>23-01</b>)
"User" -> "EPP": Card inserted
"EPP" - -> "Countertop": Card Detection Response (<b>90-00</b>)
"Countertop" - -> "Payment App": Card Detection Response (<b>90-00</b>)

"Payment App" -> "Countertop": Smart Card Activate Command (<b>41-02</b>)
"Countertop" -> "EPP": Smart Card Activate Command (<b>41-02</b>)
"EPP" - -> "Countertop": Smart Card Activate Response (<b>ATR</b>)
"Countertop" - -> "Payment App": Smart Card Activate Response (<b>ATR</b>)

== EMV CT Transaction ==

"Payment App" -> "Countertop": EMV_CT_StartTransaction (<b>39-10</b>)
"Countertop" -> "EPP": EMV_CT_StartTransaction (<b>39-10</b>)

opt Depending on EMV configuration and used card
  "User" -> "EPP": Application selected
end

"EPP" - -> "Countertop": EMV_CT_StartTransaction Response (<b>Response Data</b>)
"Countertop" - -> "Payment App": EMV_CT_StartTransaction Response (<b>Response Data</b>)

"Payment App" -> "Countertop": EMV_CT_ContinueOffline Command (<b>39-11</b>)
"Countertop" -> "EPP": EMV_CT_ContinueOffline Command (<b>39-11</b>)

opt Depending on EMV configuration and used card
  "User" -> "EPP": Ammount confirmed
end

opt Depending on EMV configuration and used card
  "User" -> "EPP": PIN entered
end

"EPP" - -> "Countertop": EMV_CT_ContinueOffline Response (<b>Response Data</b>)
"Countertop" - -> "Payment App": EMV_CT_ContinueOffline Response (<b>Response Data</b>)

== Get Encrypted PIN ==

"Payment App" -> "Countertop": Crypto Open Command (<b>70-00</b>)
"Countertop" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "Countertop": Crypto Get encrypted Pin Command (<b>70-08</b>)
"Countertop" - -> "Payment App": Crypto Get encrypted Pin Response (<b>Encrypted PIN block </b>)

"Payment App" -> "Countertop": Crypto Close Command (<b>70-01</b>)
"Countertop" - -> "Payment App": Crypto Close Response

== Fetch None Sensitive Transaction Data ==

"Payment App" -> "Countertop": fetchTrxTags Command (<b>29-02</b>)
"Countertop" - -> "Payment App": fetchTrxTags Response (<b>None sensitive Response Tags</b>)

== Get encrypted (sensitive) Transaction Data ==

"Payment App" -> "Countertop": Crypto Open Command (<b>70-00</b>)
"Countertop" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "Countertop": getEncData Command (<b>29-00</b>)
"Countertop" - -> "Payment App": getEncData Response (<b>Encrypted Data</b>)

== Get encrypted Message Data ==

"Payment App" -> "Countertop": getEncMsgData Command (<b>29-01</b>)
"Countertop" - -> "Payment App": getEncMsgData Response (Encrypted Message Data)

== Get Message Signature ==

opt
 "Payment App" -> "Countertop": getMsgSignature Command (<b>29-04</b>)
 "Countertop" - -> "Payment App": getMsgSignature Response (<b>Message Signature</b>)
end

"Payment App" -> "Countertop": Crypto Close Command (<b>70-01</b>)
"Countertop" - -> "Payment App": Crypto Close Response

opt Depending on EMV CT Continue Offline Response Code
  "Payment App" -> "Countertop": EMV_CT_ContinueOnline Command (<b>39-12</b>)
  "Countertop" -> "EPP": EMV_CT_ContinueOnline Command (<b>39-12</b>)
  "EPP" - -> "Countertop": EMV_CT_ContinueOnline Response (<b>Response Data</b>)
  "Countertop" - -> "Payment App": EMV_CT_ContinueOnline Response (<b>Response Data</b>)
end

"Payment App" -> "Countertop": Smart Card Deactivate Command (<b>41-04</b>)
"Countertop" -> "EPP": Smart Card Deactivate Command (<b>41-04</b>)
"EPP" - -> "Countertop": Smart Card Deactivate Response (<b>90-00</b>)
"Countertop" - -> "Payment App": Smart Card Deactivate Response (<b>90-00</b>)

"Payment App" -> "Countertop": Handle Display Command (<b>24-03</b>) on EPP (<b>DFA1500102</b>) "Remove Card"
"Countertop" -> "EPP": Handle Display Command (<b>24-03</b>) on EPP (<b>DFA1500102</b>) "Remove Card"
"EPP" - -> "Countertop": Handle Display Response (<b>90-00</b>)
"Countertop" - -> "Payment App": Handle Display Response (<b>90-00</b>)
"User" -> "EPP": Card removal

== Clear (sensitive) Transaction Data ==

group Mandatory
  "Payment App" -> "Countertop": clearDataStore Command (<b>29-03</b>)
  note right: automatically cleaned after 8 minutes or with the begining of the next trx
  "Countertop" - -> "Payment App": clearDataStore Response
end

== Exit EMV CT Framework ==

"Payment App" -> "Countertop": EMV_CT_Exit_Framework Command (<b>39-00</b>)
"Countertop" -> "EPP": EMV_CT_Exit_Framework Command (<b>39-00</b>)
"EPP" - -> "Countertop": EMV_CT_Exit_Framework Response (<b>90-00</b>)
"Countertop" - -> "Payment App": EMV_CT_Exit_Framework Response (<b>90-00</b>)

== Disable EPP ==

"Payment App" -> "Countertop": Enable EPP Command(<b>20-21</b>) with <b>P2=01</b>
"Countertop" - -> "Payment App": Enable EPP Response (<b>90-00</b>)

@enduml

PlantUML version 1.2019.03(Sun Mar 10 12:04:44 CET 2019)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Java Version: 16.0.1+9-24
Operating System: Windows 10
OS Version: 10.0
Default Encoding: Cp1252
Language: de
Country: DE
--></g></svg>