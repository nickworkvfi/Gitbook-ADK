<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2404px" preserveAspectRatio="none" style="width:1033px;height:2404px;" version="1.1" viewBox="0 0 1033 2404" width="1033px" zoomAndPan="magnify"><defs><filter height="300%" id="f1n3b80rtetbf5" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="301" x="361.75" y="22.9951">SDI: EMV-CTLS Basic Transaction Flow</text><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="446.5" y="259.2578"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="533.5" x="23" y="348.6563"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="446.5" y="467.1875"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="254.1953" style="stroke: #000000; stroke-width: 2.0;" width="839.5" x="23" y="527.4531"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="446.5" y="609.8516"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="446.5" y="728.3828"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="394" x="446.5" y="853.9141"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="413" x="446.5" y="914.1797"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="77.3984" style="stroke: #000000; stroke-width: 2.0;" width="553.5" x="13" y="1075.8438"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="533.5" x="23" y="1099.9766"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="401" x="446.5" y="1747.6328"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="533.5" x="23" y="1880.1641"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="533.5" x="23" y="2027.8281"/><rect fill="#FFFFFF" filter="url(#f1n3b80rtetbf5)" height="85.3984" style="stroke: #000000; stroke-width: 2.0;" width="988.5" x="23" y="2160.3594"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="87" x2="87" y1="68.5938" y2="2364.1563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="501.5" x2="501.5" y1="68.5938" y2="2364.1563"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="800.5" x2="800.5" y1="68.5938" y2="2364.1563"/><rect fill="#FEFECE" filter="url(#f1n3b80rtetbf5)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="33" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="40" y="53.292">Payment App</text><rect fill="#FEFECE" filter="url(#f1n3b80rtetbf5)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="33" y="2363.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="40" y="2383.1514">Payment App</text><rect fill="#FEFECE" filter="url(#f1n3b80rtetbf5)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="456.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="463.5" y="53.292">SDI-Server</text><rect fill="#FEFECE" filter="url(#f1n3b80rtetbf5)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="456.5" y="2363.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="463.5" y="2383.1514">SDI-Server</text><rect fill="#FEFECE" filter="url(#f1n3b80rtetbf5)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="770.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="777.5" y="53.292">PlugIn</text><rect fill="#FEFECE" filter="url(#f1n3b80rtetbf5)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="770.5" y="2363.1563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="777.5" y="2383.1514">PlugIn</text><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1018.5" x="3" y="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="99.1602" y2="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="102.1602" y2="102.1602"/><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="245" x="389.75" y="88.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="226" x="395.75" y="104.6606">Initialize EMV CTLS Framework</text><polygon fill="#A80036" points="489.5,138.8594,499.5,142.8594,489.5,146.8594,493.5,142.8594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="142.8594" y2="142.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="250" x="94.5" y="137.7935">EMV_CTLS_Init_Framework Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="344.5" y="137.7935">40-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="385.5" y="137.7935">)</text><polygon fill="#A80036" points="98.5,167.9922,88.5,171.9922,98.5,175.9922,94.5,171.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="171.9922" y2="171.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="245" x="104.5" y="166.9263">EMV_CTLS_Init_Framework Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="349.5" y="166.9263">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="390.5" y="166.9263">)</text><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1018.5" x="3" y="200.5586"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="200.5586" y2="200.5586"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="203.5586" y2="203.5586"/><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="181" x="421.75" y="189.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="162" x="427.75" y="206.0591">EMV CTLS Transaction</text><polygon fill="#A80036" points="489.5,240.2578,499.5,244.2578,489.5,248.2578,493.5,244.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="244.2578" y2="244.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="266" x="94.5" y="239.1919">EMV_CTLS_SetupTransaction Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="360.5" y="239.1919">40-10</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="401.5" y="239.1919">)</text><path d="M446.5,259.2578 L516.5,259.2578 L516.5,266.2578 L506.5,276.2578 L446.5,276.2578 L446.5,259.2578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="446.5" y="259.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="461.5" y="272.3247">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="316" x="531.5" y="271.4683">[If PlugIn for SDITrigger_ExtDataStore registered]</text><polygon fill="#A80036" points="788.5,293.5234,798.5,297.5234,788.5,301.5234,792.5,297.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="501.5" x2="794.5" y1="297.5234" y2="297.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="508.5" y="292.4575">processTrigger()</text><polygon fill="#A80036" points="98.5,329.6563,88.5,333.6563,98.5,337.6563,94.5,333.6563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="333.6563" y2="333.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="261" x="104.5" y="328.5903">EMV_CTLS_SetupTransaction Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="365.5" y="328.5903">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="477.5" y="328.5903">)</text><path d="M23,348.6563 L93,348.6563 L93,355.6563 L83,365.6563 L23,365.6563 L23,348.6563 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="533.5" x="23" y="348.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="38" y="361.7231">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="108" y="360.8667">[Standard Mode]</text><polygon fill="#A80036" points="489.5,382.9219,499.5,386.9219,489.5,390.9219,493.5,386.9219" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="386.9219" y2="386.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="94.5" y="381.856">Handle Display Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="269.5" y="381.856">24-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="76" x="310.5" y="381.856">) "Tap Card"</text><polygon fill="#A80036" points="98.5,412.0547,88.5,416.0547,98.5,420.0547,94.5,416.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="416.0547" y2="416.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="104.5" y="410.9888">Handle Display Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="274.5" y="410.9888">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="315.5" y="410.9888">)</text><polygon fill="#A80036" points="489.5,448.1875,499.5,452.1875,489.5,456.1875,493.5,452.1875" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="452.1875" y2="452.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="94.5" y="447.1216">Card Detection Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="270.5" y="447.1216">23-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="311.5" y="447.1216">)</text><path d="M446.5,467.1875 L516.5,467.1875 L516.5,474.1875 L506.5,484.1875 L446.5,484.1875 L446.5,467.1875 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="446.5" y="467.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="461.5" y="480.2544">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="316" x="531.5" y="479.3979">[If PlugIn for SDITrigger_ExtDataStore registered]</text><polygon fill="#A80036" points="788.5,501.4531,798.5,505.4531,788.5,509.4531,792.5,505.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="501.5" x2="794.5" y1="505.4531" y2="505.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="508.5" y="500.3872">processTrigger()</text><path d="M23,527.4531 L93,527.4531 L93,534.4531 L83,544.4531 L23,544.4531 L23,527.4531 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="254.1953" style="stroke: #000000; stroke-width: 2.0;" width="839.5" x="23" y="527.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="38" y="540.52">opt</text><polygon fill="#A80036" points="98.5,561.7188,88.5,565.7188,98.5,569.7188,94.5,565.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="500.5" y1="565.7188" y2="565.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="211" x="104.5" y="560.6528">Modify Candidate Data Callback (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="42" x="315.5" y="560.6528">BF-12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="357.5" y="560.6528">)</text><polygon fill="#A80036" points="489.5,590.8516,499.5,594.8516,489.5,598.8516,493.5,594.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="594.8516" y2="594.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="273" x="94.5" y="589.7856">EMV_CTLS_GetCandidateData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="367.5" y="589.7856">40-16</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="408.5" y="589.7856">)</text><path d="M446.5,609.8516 L516.5,609.8516 L516.5,616.8516 L506.5,626.8516 L446.5,626.8516 L446.5,609.8516 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="446.5" y="609.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="461.5" y="622.9185">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="316" x="531.5" y="622.062">[If PlugIn for SDITrigger_ExtDataStore registered]</text><polygon fill="#A80036" points="788.5,644.1172,798.5,648.1172,788.5,652.1172,792.5,648.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="501.5" x2="794.5" y1="648.1172" y2="648.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="508.5" y="643.0513">processTrigger()</text><polygon fill="#A80036" points="98.5,680.25,88.5,684.25,98.5,688.25,94.5,684.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="684.25" y2="684.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="104.5" y="679.1841">EMV_CTLS_GetCandidateData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="372.5" y="679.1841">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="484.5" y="679.1841">)</text><polygon fill="#A80036" points="489.5,709.3828,499.5,713.3828,489.5,717.3828,493.5,713.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="87.5" x2="495.5" y1="713.3828" y2="713.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="268" x="94.5" y="708.3169">Modify Candidate Data Callback Response</text><path d="M446.5,728.3828 L516.5,728.3828 L516.5,735.3828 L506.5,745.3828 L446.5,745.3828 L446.5,728.3828 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="446.5" y="728.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="461.5" y="741.4497">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="316" x="531.5" y="740.5933">[If PlugIn for SDITrigger_ExtDataStore registered]</text><polygon fill="#A80036" points="788.5,762.6484,798.5,766.6484,788.5,770.6484,792.5,766.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="501.5" x2="794.5" y1="766.6484" y2="766.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="508.5" y="761.5825">processTrigger()</text><polygon fill="#A80036" points="98.5,805.7813,88.5,809.7813,98.5,813.7813,94.5,809.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="809.7813" y2="809.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="104.5" y="804.7153">Card Detection Response</text><polygon fill="#A80036" points="489.5,834.9141,499.5,838.9141,489.5,842.9141,493.5,838.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="838.9141" y2="838.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="94.5" y="833.8481">EMV_CTLS_ContinueOffline Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="345.5" y="833.8481">40-11</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="386.5" y="833.8481">)</text><path d="M446.5,853.9141 L516.5,853.9141 L516.5,860.9141 L506.5,870.9141 L446.5,870.9141 L446.5,853.9141 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="394" x="446.5" y="853.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="461.5" y="866.981">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="274" x="531.5" y="866.1245">[If PlugIn for SDITrigger_CardId registered]</text><polygon fill="#A80036" points="788.5,888.1797,798.5,892.1797,788.5,896.1797,792.5,892.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="501.5" x2="794.5" y1="892.1797" y2="892.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="508.5" y="887.1138">processTrigger(PAN)</text><path d="M446.5,914.1797 L516.5,914.1797 L516.5,921.1797 L506.5,931.1797 L446.5,931.1797 L446.5,914.1797 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="413" x="446.5" y="914.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="461.5" y="927.2466">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="323" x="531.5" y="926.3901">[If PlugIn for SDITrigger_CardDataAvail registered]</text><polygon fill="#A80036" points="788.5,948.4453,798.5,952.4453,788.5,956.4453,792.5,952.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="501.5" x2="794.5" y1="952.4453" y2="952.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="508.5" y="947.3794">processTrigger(Sensitive Data)</text><polygon fill="#A80036" points="98.5,984.5781,88.5,988.5781,98.5,992.5781,94.5,988.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="988.5781" y2="988.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="104.5" y="983.5122">EMV_CTLS_ContinueOffline Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="350.5" y="983.5122">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="462.5" y="983.5122">)</text><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1018.5" x="3" y="1017.1445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1017.1445" y2="1017.1445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1020.1445" y2="1020.1445"/><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="87" x="468.75" y="1006.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="474.75" y="1022.645">PIN Entry</text><polygon fill="#A80036" points="489.5,1056.8438,499.5,1060.8438,489.5,1064.8438,493.5,1060.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="1060.8438" y2="1060.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="94.5" y="1055.7778">PED Get PIN Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="252.5" y="1055.7778">22-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="293.5" y="1055.7778">)</text><path d="M13,1075.8438 L77,1075.8438 L77,1082.8438 L67,1092.8438 L13,1092.8438 L13,1075.8438 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="77.3984" style="stroke: #000000; stroke-width: 2.0;" width="553.5" x="13" y="1075.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="1088.9106">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="92" y="1088.0542">[Headless Mode]</text><path d="M23,1099.9766 L100,1099.9766 L100,1106.9766 L90,1116.9766 L23,1116.9766 L23,1099.9766 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="533.5" x="23" y="1099.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="38" y="1113.0435">loop</text><polygon fill="#A80036" points="98.5,1134.2422,88.5,1138.2422,98.5,1142.2422,94.5,1138.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="500.5" y1="1138.2422" y2="1138.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="104.5" y="1133.1763">Status Callback (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="43" x="212.5" y="1133.1763">9F-XX</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="255.5" y="1133.1763">)</text><polygon fill="#A80036" points="98.5,1177.375,88.5,1181.375,98.5,1185.375,94.5,1181.375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="1181.375" y2="1181.375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="104.5" y="1176.3091">PED Get PIN Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="257.5" y="1176.3091">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="298.5" y="1176.3091">)</text><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1018.5" x="3" y="1209.9414"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1209.9414" y2="1209.9414"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1212.9414" y2="1212.9414"/><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="155" x="434.75" y="1199.375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="440.75" y="1215.4419">Get Encrypted PIN</text><polygon fill="#A80036" points="489.5,1249.6406,499.5,1253.6406,489.5,1257.6406,493.5,1253.6406" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="1253.6406" y2="1253.6406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="94.5" y="1248.5747">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="254.5" y="1248.5747">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="295.5" y="1248.5747">)</text><polygon fill="#A80036" points="98.5,1278.7734,88.5,1282.7734,98.5,1286.7734,94.5,1282.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="1282.7734" y2="1282.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="104.5" y="1277.7075">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="259.5" y="1277.7075">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="365.5" y="1277.7075">)</text><polygon fill="#A80036" points="489.5,1307.9063,499.5,1311.9063,489.5,1315.9063,493.5,1311.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="1311.9063" y2="1311.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="94.5" y="1306.8403">Crypto Get encrypted Pin Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="334.5" y="1306.8403">70-08</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="375.5" y="1306.8403">)</text><polygon fill="#A80036" points="98.5,1337.0391,88.5,1341.0391,98.5,1345.0391,94.5,1341.0391" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="1341.0391" y2="1341.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="104.5" y="1335.9731">Crypto Get encrypted Pin Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="150" x="339.5" y="1335.9731">Encrypted PIN block</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="489.5" y="1335.9731">)</text><polygon fill="#A80036" points="489.5,1366.1719,499.5,1370.1719,489.5,1374.1719,493.5,1370.1719" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="1370.1719" y2="1370.1719"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="94.5" y="1365.106">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="255.5" y="1365.106">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="296.5" y="1365.106">)</text><polygon fill="#A80036" points="98.5,1395.3047,88.5,1399.3047,98.5,1403.3047,94.5,1399.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="1399.3047" y2="1399.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="104.5" y="1394.2388">Crypto Close Response</text><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1018.5" x="3" y="1427.8711"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1427.8711" y2="1427.8711"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1430.8711" y2="1430.8711"/><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="304" x="360.25" y="1417.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="285" x="366.25" y="1433.3716">Fetch None Sensitive Transaction Data</text><polygon fill="#A80036" points="489.5,1467.5703,499.5,1471.5703,489.5,1475.5703,493.5,1471.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="1471.5703" y2="1471.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="94.5" y="1466.5044">fetchTrxTags Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="255.5" y="1466.5044">29-02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="296.5" y="1466.5044">)</text><polygon fill="#A80036" points="98.5,1496.7031,88.5,1500.7031,98.5,1504.7031,94.5,1500.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="1500.7031" y2="1500.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="104.5" y="1495.6372">fetchTrxTags Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="260.5" y="1495.6372">None sensitive Response Tags</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="485.5" y="1495.6372">)</text><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1018.5" x="3" y="1529.2695"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1529.2695" y2="1529.2695"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1532.2695" y2="1532.2695"/><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="337" x="343.75" y="1518.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="318" x="349.75" y="1534.77">Get encrypted (sensitive) Transaction Data</text><polygon fill="#A80036" points="489.5,1568.9688,499.5,1572.9688,489.5,1576.9688,493.5,1572.9688" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="1572.9688" y2="1572.9688"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="94.5" y="1567.9028">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="254.5" y="1567.9028">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="295.5" y="1567.9028">)</text><polygon fill="#A80036" points="98.5,1598.1016,88.5,1602.1016,98.5,1606.1016,94.5,1602.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="1602.1016" y2="1602.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="104.5" y="1597.0356">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="259.5" y="1597.0356">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="365.5" y="1597.0356">)</text><polygon fill="#A80036" points="489.5,1627.2344,499.5,1631.2344,489.5,1635.2344,493.5,1631.2344" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="1631.2344" y2="1631.2344"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="94.5" y="1626.1685">getEncData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="249.5" y="1626.1685">29-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="290.5" y="1626.1685">)</text><polygon fill="#A80036" points="98.5,1656.3672,88.5,1660.3672,98.5,1664.3672,94.5,1660.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="1660.3672" y2="1660.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="104.5" y="1655.3013">getEncData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="254.5" y="1655.3013">Encrypted Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="369.5" y="1655.3013">)</text><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1018.5" x="3" y="1688.9336"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1688.9336" y2="1688.9336"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1691.9336" y2="1691.9336"/><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="236" x="394.25" y="1678.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="217" x="400.25" y="1694.4341">Get encrypted Message Data</text><polygon fill="#A80036" points="489.5,1728.6328,499.5,1732.6328,489.5,1736.6328,493.5,1732.6328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="1732.6328" y2="1732.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="94.5" y="1727.5669">getEncMsgData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="275.5" y="1727.5669">29-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="316.5" y="1727.5669">)</text><path d="M446.5,1747.6328 L516.5,1747.6328 L516.5,1754.6328 L506.5,1764.6328 L446.5,1764.6328 L446.5,1747.6328 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="401" x="446.5" y="1747.6328"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="461.5" y="1760.6997">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="311" x="531.5" y="1759.8433">[If PlugIn for SDITrigger_MsgDataAvail registerd]</text><polygon fill="#A80036" points="788.5,1781.8984,798.5,1785.8984,788.5,1789.8984,792.5,1785.8984" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="501.5" x2="794.5" y1="1785.8984" y2="1785.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="508.5" y="1780.8325">processTrigger(Message Data in clear text)</text><polygon fill="#A80036" points="98.5,1818.0313,88.5,1822.0313,98.5,1826.0313,94.5,1822.0313" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="1822.0313" y2="1822.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="104.5" y="1816.9653">getEncMsgData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="280.5" y="1816.9653">Encrypted Message Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="466.5" y="1816.9653">)</text><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1018.5" x="3" y="1850.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1850.5977" y2="1850.5977"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="1853.5977" y2="1853.5977"/><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="192" x="416.25" y="1840.0313"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="422.25" y="1856.0981">Get Message Signature</text><path d="M23,1880.1641 L93,1880.1641 L93,1887.1641 L83,1897.1641 L23,1897.1641 L23,1880.1641 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="533.5" x="23" y="1880.1641"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="38" y="1893.231">opt</text><polygon fill="#A80036" points="489.5,1914.4297,499.5,1918.4297,489.5,1922.4297,493.5,1918.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="1918.4297" y2="1918.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="94.5" y="1913.3638">getMsgSignature Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="283.5" y="1913.3638">29-04</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="324.5" y="1913.3638">)</text><polygon fill="#A80036" points="98.5,1943.5625,88.5,1947.5625,98.5,1951.5625,94.5,1947.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="1947.5625" y2="1947.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="104.5" y="1942.4966">getMsgSignature Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="288.5" y="1942.4966">Message Signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="430.5" y="1942.4966">)</text><polygon fill="#A80036" points="489.5,1979.6953,499.5,1983.6953,489.5,1987.6953,493.5,1983.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="1983.6953" y2="1983.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="94.5" y="1978.6294">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="255.5" y="1978.6294">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="296.5" y="1978.6294">)</text><polygon fill="#A80036" points="98.5,2008.8281,88.5,2012.8281,98.5,2016.8281,94.5,2012.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="2012.8281" y2="2012.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="104.5" y="2007.7622">Crypto Close Response</text><path d="M23,2027.8281 L93,2027.8281 L93,2034.8281 L83,2044.8281 L23,2044.8281 L23,2027.8281 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="533.5" x="23" y="2027.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="38" y="2040.895">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="379" x="108" y="2040.0386">[Depending on EMV CTLS Continue Offline Response Code]</text><polygon fill="#A80036" points="489.5,2062.0938,499.5,2066.0938,489.5,2070.0938,493.5,2066.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="2066.0938" y2="2066.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="251" x="94.5" y="2061.0278">EMV_CTLS_ContinueOnline Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="345.5" y="2061.0278">39-12</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="386.5" y="2061.0278">)</text><polygon fill="#A80036" points="98.5,2091.2266,88.5,2095.2266,98.5,2099.2266,94.5,2095.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="2095.2266" y2="2095.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="246" x="104.5" y="2090.1606">EMV_CTLS_ContinueOnline Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="112" x="350.5" y="2090.1606">Response Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="462.5" y="2090.1606">)</text><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1018.5" x="3" y="2130.793"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="2130.793" y2="2130.793"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="2133.793" y2="2133.793"/><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="269" x="377.75" y="2120.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="250" x="383.75" y="2136.2935">Clear (sensitive) Transaction Data</text><path d="M23,2160.3594 L147,2160.3594 L147,2167.3594 L137,2177.3594 L23,2177.3594 L23,2160.3594 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="85.3984" style="stroke: #000000; stroke-width: 2.0;" width="988.5" x="23" y="2160.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="38" y="2173.4263">Mandatory</text><polygon fill="#A80036" points="489.5,2199.625,499.5,2203.625,489.5,2207.625,493.5,2203.625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="2203.625" y2="2203.625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="94.5" y="2198.5591">clearDataStore Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="271.5" y="2198.5591">29-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="312.5" y="2198.5591">)</text><path d="M506,2182.4922 L506,2207.4922 L992,2207.4922 L992,2192.4922 L982,2182.4922 L506,2182.4922 " fill="#FBFB77" filter="url(#f1n3b80rtetbf5)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M982,2182.4922 L982,2192.4922 L992,2192.4922 L982,2182.4922 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="465" x="512" y="2199.5591">automatically cleaned after 8 minutes or with the begining of the next trx</text><polygon fill="#A80036" points="98.5,2233.7578,88.5,2237.7578,98.5,2241.7578,94.5,2237.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="2237.7578" y2="2237.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="104.5" y="2232.6919">clearDataStore Response</text><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1018.5" x="3" y="2273.3242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="2273.3242" y2="2273.3242"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1021.5" y1="2276.3242" y2="2276.3242"/><rect fill="#EEEEEE" filter="url(#f1n3b80rtetbf5)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="211" x="406.75" y="2262.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="192" x="412.75" y="2278.8247">Exit EMV CTLS Framework</text><polygon fill="#A80036" points="489.5,2313.0234,499.5,2317.0234,489.5,2321.0234,493.5,2317.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="495.5" y1="2317.0234" y2="2317.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="254" x="94.5" y="2311.9575">EMV_CTLS_Exit_Framework Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="348.5" y="2311.9575">40-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="389.5" y="2311.9575">)</text><polygon fill="#A80036" points="98.5,2342.1563,88.5,2346.1563,98.5,2350.1563,94.5,2346.1563" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="500.5" y1="2346.1563" y2="2346.1563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="249" x="104.5" y="2341.0903">EMV_CTLS_Exit_Framework Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="353.5" y="2341.0903">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="394.5" y="2341.0903">)</text><!--
@startuml

title SDI: EMV-CTLS Basic Transaction Flow

participant "Payment App" order 10
participant "SDI-Server" order 20
participant "PlugIn" order 30

== Initialize EMV CTLS Framework ==

"Payment App" -> "SDI-Server": EMV_CTLS_Init_Framework Command (<b>40-00</b>)
"SDI-Server" - -> "Payment App": EMV_CTLS_Init_Framework Response (<b>90-00</b>)

== EMV CTLS Transaction ==

"Payment App" -> "SDI-Server": EMV_CTLS_SetupTransaction Command (<b>40-10</b>)
opt If PlugIn for SDITrigger_ExtDataStore registered
  "SDI-Server" -> "PlugIn": processTrigger()
end
"SDI-Server" - -> "Payment App": EMV_CTLS_SetupTransaction Response (<b>Response Data</b>)

opt Standard Mode
  "Payment App" -> "SDI-Server": Handle Display Command (<b>24-03</b>) "Tap Card"
  "SDI-Server" - -> "Payment App": Handle Display Response (<b>90-00</b>)
end

"Payment App" -> "SDI-Server": Card Detection Command (<b>23-01</b>)
opt If PlugIn for SDITrigger_ExtDataStore registered
  "SDI-Server" -> "PlugIn": processTrigger()
end
opt
  "SDI-Server" -> "Payment App": Modify Candidate Data Callback (<b>BF-12</b>)
  "Payment App" -> "SDI-Server": EMV_CTLS_GetCandidateData Command (<b>40-16</b>)
  opt If PlugIn for SDITrigger_ExtDataStore registered
    "SDI-Server" -> "PlugIn": processTrigger()
  end
  "SDI-Server" - -> "Payment App": EMV_CTLS_GetCandidateData Response (<b>Response Data</b>)
  "Payment App" - -> "SDI-Server": Modify Candidate Data Callback Response
  opt If PlugIn for SDITrigger_ExtDataStore registered
    "SDI-Server" -> "PlugIn": processTrigger()
  end
end
"SDI-Server" - -> "Payment App": Card Detection Response
"Payment App" -> "SDI-Server": EMV_CTLS_ContinueOffline Command (<b>40-11</b>)
opt If PlugIn for SDITrigger_CardId registered
  "SDI-Server" -> "PlugIn": processTrigger(PAN)
end
opt If PlugIn for SDITrigger_CardDataAvail registered
  "SDI-Server" -> "PlugIn": processTrigger(Sensitive Data)
end
"SDI-Server" - -> "Payment App": EMV_CTLS_ContinueOffline Response (<b>Response Data</b>)

== PIN Entry ==

"Payment App" -> "SDI-Server": PED Get PIN Command (<b>22-01</b>)
  alt Headless Mode
    loop
      "SDI-Server" -> "Payment App": Status Callback (<b>9F-XX</b>)
    end
  end
"SDI-Server" - -> "Payment App": PED Get PIN Response (<b>90-00</b>)

== Get Encrypted PIN ==

"Payment App" -> "SDI-Server": Crypto Open Command (<b>70-00</b>)
"SDI-Server" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "SDI-Server": Crypto Get encrypted Pin Command (<b>70-08</b>)
"SDI-Server" - -> "Payment App": Crypto Get encrypted Pin Response (<b>Encrypted PIN block</b>)

"Payment App" -> "SDI-Server": Crypto Close Command (<b>70-01</b>)
"SDI-Server" - -> "Payment App": Crypto Close Response

== Fetch None Sensitive Transaction Data ==

"Payment App" -> "SDI-Server": fetchTrxTags Command (<b>29-02</b>)
"SDI-Server" - -> "Payment App": fetchTrxTags Response (<b>None sensitive Response Tags</b>)

== Get encrypted (sensitive) Transaction Data ==

"Payment App" -> "SDI-Server": Crypto Open Command (<b>70-00</b>)
"SDI-Server" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "SDI-Server": getEncData Command (<b>29-00</b>)
"SDI-Server" - -> "Payment App": getEncData Response (<b>Encrypted Data</b>)

== Get encrypted Message Data ==

"Payment App" -> "SDI-Server": getEncMsgData Command (<b>29-01</b>)
opt If PlugIn for SDITrigger_MsgDataAvail registerd
  "SDI-Server" -> "PlugIn": processTrigger(Message Data in clear text)
end
"SDI-Server" - -> "Payment App": getEncMsgData Response (<b>Encrypted Message Data</b>)

== Get Message Signature ==

opt
  "Payment App" -> "SDI-Server": getMsgSignature Command (<b>29-04</b>)
  "SDI-Server" - -> "Payment App": getMsgSignature Response (<b>Message Signature</b>)
end
"Payment App" -> "SDI-Server": Crypto Close Command (<b>70-01</b>)
"SDI-Server" - -> "Payment App": Crypto Close Response

opt Depending on EMV CTLS Continue Offline Response Code
  "Payment App" -> "SDI-Server": EMV_CTLS_ContinueOnline Command (<b>39-12</b>)
  "SDI-Server" - -> "Payment App": EMV_CTLS_ContinueOnline Response (<b>Response Data</b>)
end

== Clear (sensitive) Transaction Data ==

group Mandatory
  "Payment App" -> "SDI-Server": clearDataStore Command (<b>29-03</b>)
  note right: automatically cleaned after 8 minutes or with the begining of the next trx
  "SDI-Server" - -> "Payment App": clearDataStore Response
end

== Exit EMV CTLS Framework ==

"Payment App" -> "SDI-Server": EMV_CTLS_Exit_Framework Command (<b>40-00</b>)
"SDI-Server" - -> "Payment App": EMV_CTLS_Exit_Framework Response (<b>90-00</b>)

@enduml

PlantUML version 1.2019.03(Sun Mar 10 04:04:44 PDT 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.14+7-Ubuntu-120.04
Operating System: Linux
OS Version: 5.15.0-1082-azure
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>