<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="2082px" preserveAspectRatio="none" style="width:1188px;height:2082px;" version="1.1" viewBox="0 0 1188 2082" width="1188px" zoomAndPan="magnify"><defs><filter height="300%" id="frnaebgz4fq16" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="255" x="462.25" y="22.9951">SDI: Basic MSR Transaction Flow</text><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="688.5" x="23" y="128.7266"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="601.5" y="247.2578"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="413" x="601.5" y="307.5234"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="394" x="601.5" y="367.7891"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="410" x="601.5" y="428.0547"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="208.7344" style="stroke: #000000; stroke-width: 2.0;" width="708.5" x="13" y="661.9844"/><rect fill="#FFFFFF" height="133.3359" style="stroke: none; stroke-width: 1.0;" width="708.5" x="13" y="737.3828"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="688.5" x="23" y="788.3203"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="401" x="601.5" y="1015.25"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="601.5" y="1235.1797"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="401" x="601.5" y="1556.5078"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="688.5" x="23" y="1689.0391"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="145.6641" style="stroke: #000000; stroke-width: 2.0;" width="1143.5" x="23" y="1879.8359"/><rect fill="#FFFFFF" filter="url(#frnaebgz4fq16)" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="601.5" y="1943.1016"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="87" x2="87" y1="68.5938" y2="2042.5"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="656.5" x2="656.5" y1="68.5938" y2="2042.5"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="955.5" x2="955.5" y1="68.5938" y2="2042.5"/><rect fill="#FEFECE" filter="url(#frnaebgz4fq16)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="33" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="40" y="53.292">Payment App</text><rect fill="#FEFECE" filter="url(#frnaebgz4fq16)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="105" x="33" y="2041.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="91" x="40" y="2061.4951">Payment App</text><rect fill="#FEFECE" filter="url(#frnaebgz4fq16)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="611.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="618.5" y="53.292">SDI-Server</text><rect fill="#FEFECE" filter="url(#frnaebgz4fq16)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="86" x="611.5" y="2041.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="72" x="618.5" y="2061.4951">SDI-Server</text><rect fill="#FEFECE" filter="url(#frnaebgz4fq16)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="925.5" y="33.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="932.5" y="53.292">PlugIn</text><rect fill="#FEFECE" filter="url(#frnaebgz4fq16)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="925.5" y="2041.5"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="932.5" y="2061.4951">PlugIn</text><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1173.5" x="3" y="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="99.1602" y2="99.1602"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="102.1602" y2="102.1602"/><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="120" x="529.75" y="88.5938"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="101" x="535.75" y="104.6606">Card Reading</text><path d="M23,128.7266 L93,128.7266 L93,135.7266 L83,145.7266 L23,145.7266 L23,128.7266 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="688.5" x="23" y="128.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="38" y="141.7935">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="108" y="140.937">[Standard Mode]</text><polygon fill="#A80036" points="644.5,162.9922,654.5,166.9922,644.5,170.9922,648.5,166.9922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="166.9922" y2="166.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="94.5" y="161.9263">Handle Display Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="269.5" y="161.9263">24-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="90" x="310.5" y="161.9263">) "Swipe Card"</text><polygon fill="#A80036" points="98.5,192.125,88.5,196.125,98.5,200.125,94.5,196.125" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="196.125" y2="196.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="104.5" y="191.0591">Handle Display Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="274.5" y="191.0591">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="315.5" y="191.0591">)</text><polygon fill="#A80036" points="644.5,228.2578,654.5,232.2578,644.5,236.2578,648.5,232.2578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="232.2578" y2="232.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="94.5" y="227.1919">Card Detection Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="270.5" y="227.1919">23-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="311.5" y="227.1919">)</text><path d="M601.5,247.2578 L671.5,247.2578 L671.5,254.2578 L661.5,264.2578 L601.5,264.2578 L601.5,247.2578 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="601.5" y="247.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="616.5" y="260.3247">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="316" x="686.5" y="259.4683">[If PlugIn for SDITrigger_ExtDataStore registered]</text><polygon fill="#A80036" points="943.5,281.5234,953.5,285.5234,943.5,289.5234,947.5,285.5234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656.5" x2="949.5" y1="285.5234" y2="285.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="663.5" y="280.4575">processTrigger()</text><path d="M601.5,307.5234 L671.5,307.5234 L671.5,314.5234 L661.5,324.5234 L601.5,324.5234 L601.5,307.5234 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="413" x="601.5" y="307.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="616.5" y="320.5903">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="323" x="686.5" y="319.7339">[If PlugIn for SDITrigger_CardDataAvail registered]</text><polygon fill="#A80036" points="943.5,341.7891,953.5,345.7891,943.5,349.7891,947.5,345.7891" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656.5" x2="949.5" y1="345.7891" y2="345.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="197" x="663.5" y="340.7231">processTrigger(Sensitive Data)</text><path d="M601.5,367.7891 L671.5,367.7891 L671.5,374.7891 L661.5,384.7891 L601.5,384.7891 L601.5,367.7891 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="394" x="601.5" y="367.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="616.5" y="380.856">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="274" x="686.5" y="379.9995">[If PlugIn for SDITrigger_CardId registered]</text><polygon fill="#A80036" points="943.5,402.0547,953.5,406.0547,943.5,410.0547,947.5,406.0547" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656.5" x2="949.5" y1="406.0547" y2="406.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="131" x="663.5" y="400.9888">processTrigger(PAN)</text><path d="M601.5,428.0547 L671.5,428.0547 L671.5,435.0547 L661.5,445.0547 L601.5,445.0547 L601.5,428.0547 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="410" x="601.5" y="428.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="616.5" y="441.1216">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="320" x="686.5" y="440.2651">[If PlugIn for SDITrigger_CardDetected registered]</text><polygon fill="#A80036" points="943.5,462.3203,953.5,466.3203,943.5,470.3203,947.5,466.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656.5" x2="949.5" y1="466.3203" y2="466.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="135" x="663.5" y="461.2544">processTrigger(Data)</text><polygon fill="#A80036" points="98.5,498.4531,88.5,502.4531,98.5,506.4531,94.5,502.4531" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="502.4531" y2="502.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="104.5" y="497.3872">Card Detection Response</text><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1173.5" x="3" y="531.0195"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="531.0195" y2="531.0195"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="534.0195" y2="534.0195"/><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="133" x="523.25" y="520.4531"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="114" x="529.25" y="536.52">Card Validation</text><polygon fill="#A80036" points="644.5,570.7188,654.5,574.7188,644.5,578.7188,648.5,574.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="574.7188" y2="574.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="94.5" y="569.6528">performValidationChecks Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="334.5" y="569.6528">29-05</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="375.5" y="569.6528">)</text><polygon fill="#A80036" points="98.5,599.8516,88.5,603.8516,98.5,607.8516,94.5,603.8516" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="603.8516" y2="603.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="104.5" y="598.7856">performValidationChecks Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="304" x="339.5" y="598.7856">Validation results and best match record</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="6" x="643.5" y="598.7856">)</text><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1173.5" x="3" y="632.418"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="632.418" y2="632.418"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="635.418" y2="635.418"/><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="87" x="546.25" y="621.8516"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="68" x="552.25" y="637.9185">PIN Entry</text><path d="M13,661.9844 L77,661.9844 L77,668.9844 L67,678.9844 L13,678.9844 L13,661.9844 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="208.7344" style="stroke: #000000; stroke-width: 2.0;" width="708.5" x="13" y="661.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="19" x="28" y="675.0513">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="107" x="92" y="674.1948">[Standard Mode]</text><polygon fill="#A80036" points="644.5,696.25,654.5,700.25,644.5,704.25,648.5,700.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="700.25" y2="700.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="94.5" y="695.1841">PED Get PIN Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="252.5" y="695.1841">22-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="293.5" y="695.1841">)</text><polygon fill="#A80036" points="98.5,725.3828,88.5,729.3828,98.5,733.3828,94.5,729.3828" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="729.3828" y2="729.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="104.5" y="724.3169">PED Get PIN Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="257.5" y="724.3169">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="298.5" y="724.3169">)</text><line style="stroke: #000000; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="13" x2="721.5" y1="738.3828" y2="738.3828"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="108" x="18" y="748.5933">[Headless Mode]</text><polygon fill="#A80036" points="644.5,769.3203,654.5,773.3203,644.5,777.3203,648.5,773.3203" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="773.3203" y2="773.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="158" x="94.5" y="768.2544">PED Get PIN Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="252.5" y="768.2544">22-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="293.5" y="768.2544">)</text><path d="M23,788.3203 L100,788.3203 L100,795.3203 L90,805.3203 L23,805.3203 L23,788.3203 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="688.5" x="23" y="788.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="38" y="801.3872">loop</text><polygon fill="#A80036" points="98.5,822.5859,88.5,826.5859,98.5,830.5859,94.5,826.5859" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="92.5" x2="655.5" y1="826.5859" y2="826.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="108" x="104.5" y="821.52">Status Callback (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="39" x="212.5" y="821.52">9F-xx</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="251.5" y="821.52">)</text><polygon fill="#A80036" points="98.5,858.7188,88.5,862.7188,98.5,866.7188,94.5,862.7188" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="862.7188" y2="862.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="104.5" y="857.6528">PED Get PIN Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="257.5" y="857.6528">90-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="298.5" y="857.6528">)</text><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1173.5" x="3" y="898.2852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="898.2852" y2="898.2852"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="901.2852" y2="901.2852"/><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="155" x="512.25" y="887.7188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="518.25" y="903.7856">Get Encrypted PIN</text><polygon fill="#A80036" points="644.5,937.9844,654.5,941.9844,644.5,945.9844,648.5,941.9844" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="941.9844" y2="941.9844"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="94.5" y="936.9185">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="254.5" y="936.9185">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="295.5" y="936.9185">)</text><polygon fill="#A80036" points="98.5,967.1172,88.5,971.1172,98.5,975.1172,94.5,971.1172" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="971.1172" y2="971.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="104.5" y="966.0513">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="259.5" y="966.0513">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="365.5" y="966.0513">)</text><polygon fill="#A80036" points="644.5,996.25,654.5,1000.25,644.5,1004.25,648.5,1000.25" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="1000.25" y2="1000.25"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="240" x="94.5" y="995.1841">Crypto Get Encrypted Pin Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="334.5" y="995.1841">70-08</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="375.5" y="995.1841">)</text><path d="M601.5,1015.25 L671.5,1015.25 L671.5,1022.25 L661.5,1032.25 L601.5,1032.25 L601.5,1015.25 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="401" x="601.5" y="1015.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="616.5" y="1028.3169">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="311" x="686.5" y="1027.4604">[If PlugIn for SDITrigger_ExternalCSD registered]</text><polygon fill="#A80036" points="943.5,1049.5156,953.5,1053.5156,943.5,1057.5156,947.5,1053.5156" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656.5" x2="949.5" y1="1053.5156" y2="1053.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="663.5" y="1048.4497">processTrigger()</text><polygon fill="#A80036" points="98.5,1085.6484,88.5,1089.6484,98.5,1093.6484,94.5,1089.6484" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="1089.6484" y2="1089.6484"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="235" x="104.5" y="1084.5825">Crypto Get Encrypted Pin Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="150" x="339.5" y="1084.5825">Encrypted PIN block</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="489.5" y="1084.5825">)</text><polygon fill="#A80036" points="644.5,1114.7813,654.5,1118.7813,644.5,1122.7813,648.5,1118.7813" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="1118.7813" y2="1118.7813"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="94.5" y="1113.7153">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="255.5" y="1113.7153">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="296.5" y="1113.7153">)</text><polygon fill="#A80036" points="98.5,1143.9141,88.5,1147.9141,98.5,1151.9141,94.5,1147.9141" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="1147.9141" y2="1147.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="104.5" y="1142.8481">Crypto Close Response</text><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1173.5" x="3" y="1176.4805"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="1176.4805" y2="1176.4805"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="1179.4805" y2="1179.4805"/><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="304" x="437.75" y="1165.9141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="285" x="443.75" y="1181.981">Fetch None Sensitive Transaction Data</text><polygon fill="#A80036" points="644.5,1216.1797,654.5,1220.1797,644.5,1224.1797,648.5,1220.1797" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="1220.1797" y2="1220.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="94.5" y="1215.1138">fetchTrxTags Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="255.5" y="1215.1138">29-02</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="296.5" y="1215.1138">)</text><path d="M601.5,1235.1797 L671.5,1235.1797 L671.5,1242.1797 L661.5,1252.1797 L601.5,1252.1797 L601.5,1235.1797 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="601.5" y="1235.1797"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="616.5" y="1248.2466">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="316" x="686.5" y="1247.3901">[If PlugIn for SDITrigger_ExtDataStore registered]</text><polygon fill="#A80036" points="943.5,1269.4453,953.5,1273.4453,943.5,1277.4453,947.5,1273.4453" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656.5" x2="949.5" y1="1273.4453" y2="1273.4453"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="663.5" y="1268.3794">processTrigger()</text><polygon fill="#A80036" points="98.5,1305.5781,88.5,1309.5781,98.5,1313.5781,94.5,1309.5781" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="1309.5781" y2="1309.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="156" x="104.5" y="1304.5122">fetchTrxTags Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="225" x="260.5" y="1304.5122">None sensitive Response Tags</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="485.5" y="1304.5122">)</text><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1173.5" x="3" y="1338.1445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="1338.1445" y2="1338.1445"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="1341.1445" y2="1341.1445"/><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="337" x="421.25" y="1327.5781"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="318" x="427.25" y="1343.645">Get encrypted (sensitive) Transaction Data</text><polygon fill="#A80036" points="644.5,1377.8438,654.5,1381.8438,644.5,1385.8438,648.5,1381.8438" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="1381.8438" y2="1381.8438"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="160" x="94.5" y="1376.7778">Crypto Open Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="254.5" y="1376.7778">70-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="295.5" y="1376.7778">)</text><polygon fill="#A80036" points="98.5,1406.9766,88.5,1410.9766,98.5,1414.9766,94.5,1410.9766" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="1410.9766" y2="1410.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="104.5" y="1405.9106">Crypto Open Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="106" x="259.5" y="1405.9106">Crypto Handle</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="365.5" y="1405.9106">)</text><polygon fill="#A80036" points="644.5,1436.1094,654.5,1440.1094,644.5,1444.1094,648.5,1440.1094" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="1440.1094" y2="1440.1094"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="94.5" y="1435.0435">getEncData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="249.5" y="1435.0435">29-00</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="290.5" y="1435.0435">)</text><polygon fill="#A80036" points="98.5,1465.2422,88.5,1469.2422,98.5,1473.2422,94.5,1469.2422" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="1469.2422" y2="1469.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="150" x="104.5" y="1464.1763">getEncData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="115" x="254.5" y="1464.1763">Encrypted Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="369.5" y="1464.1763">)</text><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1173.5" x="3" y="1497.8086"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="1497.8086" y2="1497.8086"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="1500.8086" y2="1500.8086"/><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="236" x="471.75" y="1487.2422"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="217" x="477.75" y="1503.3091">Get encrypted Message Data</text><polygon fill="#A80036" points="644.5,1537.5078,654.5,1541.5078,644.5,1545.5078,648.5,1541.5078" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="1541.5078" y2="1541.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="94.5" y="1536.4419">getEncMsgData Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="275.5" y="1536.4419">29-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="316.5" y="1536.4419">)</text><path d="M601.5,1556.5078 L671.5,1556.5078 L671.5,1563.5078 L661.5,1573.5078 L601.5,1573.5078 L601.5,1556.5078 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="401" x="601.5" y="1556.5078"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="616.5" y="1569.5747">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="311" x="686.5" y="1568.7183">[If PlugIn for SDITrigger_MsgDataAvail registerd]</text><polygon fill="#A80036" points="943.5,1590.7734,953.5,1594.7734,943.5,1598.7734,947.5,1594.7734" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656.5" x2="949.5" y1="1594.7734" y2="1594.7734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="663.5" y="1589.7075">processTrigger(Message Data in clear text)</text><polygon fill="#A80036" points="98.5,1626.9063,88.5,1630.9063,98.5,1634.9063,94.5,1630.9063" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="1630.9063" y2="1630.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="104.5" y="1625.8403">getEncMsgData Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="186" x="280.5" y="1625.8403">Encrypted Message Data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="466.5" y="1625.8403">)</text><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1173.5" x="3" y="1659.4727"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="1659.4727" y2="1659.4727"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="1662.4727" y2="1662.4727"/><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="192" x="493.75" y="1648.9063"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="173" x="499.75" y="1664.9731">Get Message Signature</text><path d="M23,1689.0391 L93,1689.0391 L93,1696.0391 L83,1706.0391 L23,1706.0391 L23,1689.0391 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="75.3984" style="stroke: #000000; stroke-width: 2.0;" width="688.5" x="23" y="1689.0391"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="38" y="1702.106">opt</text><polygon fill="#A80036" points="644.5,1723.3047,654.5,1727.3047,644.5,1731.3047,648.5,1727.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="1727.3047" y2="1727.3047"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="189" x="94.5" y="1722.2388">getMsgSignature Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="283.5" y="1722.2388">29-04</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="324.5" y="1722.2388">)</text><polygon fill="#A80036" points="98.5,1752.4375,88.5,1756.4375,98.5,1760.4375,94.5,1756.4375" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="1756.4375" y2="1756.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="184" x="104.5" y="1751.3716">getMsgSignature Response (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="142" x="288.5" y="1751.3716">Message Signature</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="430.5" y="1751.3716">)</text><polygon fill="#A80036" points="644.5,1788.5703,654.5,1792.5703,644.5,1796.5703,648.5,1792.5703" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="1792.5703" y2="1792.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="161" x="94.5" y="1787.5044">Crypto Close Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="255.5" y="1787.5044">70-01</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="296.5" y="1787.5044">)</text><polygon fill="#A80036" points="98.5,1817.7031,88.5,1821.7031,98.5,1825.7031,94.5,1821.7031" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="1821.7031" y2="1821.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="104.5" y="1816.6372">Crypto Close Response</text><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="3" style="stroke: #EEEEEE; stroke-width: 1.0;" width="1173.5" x="3" y="1850.2695"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="1850.2695" y2="1850.2695"/><line style="stroke: #000000; stroke-width: 1.0;" x1="3" x2="1176.5" y1="1853.2695" y2="1853.2695"/><rect fill="#EEEEEE" filter="url(#frnaebgz4fq16)" height="23.1328" style="stroke: #000000; stroke-width: 2.0;" width="269" x="455.25" y="1839.7031"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="250" x="461.25" y="1855.77">Clear (sensitive) Transaction Data</text><path d="M23,1879.8359 L147,1879.8359 L147,1886.8359 L137,1896.8359 L23,1896.8359 L23,1879.8359 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="145.6641" style="stroke: #000000; stroke-width: 2.0;" width="1143.5" x="23" y="1879.8359"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="79" x="38" y="1892.9028">Mandatory</text><polygon fill="#A80036" points="644.5,1919.1016,654.5,1923.1016,644.5,1927.1016,648.5,1923.1016" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="87.5" x2="650.5" y1="1923.1016" y2="1923.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="94.5" y="1918.0356">clearDataStore Command (</text><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="41" x="271.5" y="1918.0356">29-03</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="5" x="312.5" y="1918.0356">)</text><path d="M661,1901.9688 L661,1926.9688 L1147,1926.9688 L1147,1911.9688 L1137,1901.9688 L661,1901.9688 " fill="#FBFB77" filter="url(#frnaebgz4fq16)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M1137,1901.9688 L1137,1911.9688 L1147,1911.9688 L1137,1901.9688 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="465" x="667" y="1919.0356">automatically cleaned after 8 minutes or with the begining of the next trx</text><path d="M601.5,1943.1016 L671.5,1943.1016 L671.5,1950.1016 L661.5,1960.1016 L601.5,1960.1016 L601.5,1943.1016 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="46.2656" style="stroke: #000000; stroke-width: 2.0;" width="406" x="601.5" y="1943.1016"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="25" x="616.5" y="1956.1685">opt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="316" x="686.5" y="1955.312">[If PlugIn for SDITrigger_ExtDataStore registered]</text><polygon fill="#A80036" points="943.5,1977.3672,953.5,1981.3672,943.5,1985.3672,947.5,1981.3672" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="656.5" x2="949.5" y1="1981.3672" y2="1981.3672"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="104" x="663.5" y="1976.3013">processTrigger()</text><polygon fill="#A80036" points="98.5,2013.5,88.5,2017.5,98.5,2021.5,94.5,2017.5" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 2.0,2.0;" x1="92.5" x2="655.5" y1="2017.5" y2="2017.5"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="163" x="104.5" y="2012.4341">clearDataStore Response</text><!--
@startuml

title SDI: Basic MSR Transaction Flow

participant "Payment App" order 10
participant "SDI-Server" order 20
participant "PlugIn" order 30

== Card Reading ==

opt Standard Mode
  "Payment App" -> "SDI-Server": Handle Display Command (<b>24-03</b>) "Swipe Card"
  "SDI-Server" - -> "Payment App": Handle Display Response (<b>90-00</b>)
end

"Payment App" -> "SDI-Server": Card Detection Command (<b>23-01</b>)
opt If PlugIn for SDITrigger_ExtDataStore registered
  "SDI-Server" -> "PlugIn": processTrigger()
end
opt If PlugIn for SDITrigger_CardDataAvail registered
  "SDI-Server" -> "PlugIn": processTrigger(Sensitive Data)
end
opt If PlugIn for SDITrigger_CardId registered
  "SDI-Server" -> "PlugIn": processTrigger(PAN)
end
opt If PlugIn for SDITrigger_CardDetected registered
  "SDI-Server" -> "PlugIn": processTrigger(Data)
end
"SDI-Server" - -> "Payment App": Card Detection Response

== Card Validation ==

"Payment App" -> "SDI-Server": performValidationChecks Command (<b>29-05</b>)
"SDI-Server" - -> "Payment App": performValidationChecks Response (<b>Validation results and best match record<b>)

== PIN Entry ==

alt Standard Mode
  "Payment App" -> "SDI-Server": PED Get PIN Command (<b>22-01</b>)
  "SDI-Server" - -> "Payment App": PED Get PIN Response (<b>90-00</b>)
else Headless Mode
  "Payment App" -> "SDI-Server": PED Get PIN Command (<b>22-01</b>)
    loop
      "SDI-Server" -> "Payment App": Status Callback (<b>9F-xx</b>)
    end
  "SDI-Server" - -> "Payment App": PED Get PIN Response (<b>90-00</b>)
end

== Get Encrypted PIN ==

"Payment App" -> "SDI-Server": Crypto Open Command (<b>70-00</b>)
"SDI-Server" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "SDI-Server": Crypto Get Encrypted Pin Command (<b>70-08</b>)
opt If PlugIn for SDITrigger_ExternalCSD registered
  "SDI-Server" -> "PlugIn": processTrigger()
end
"SDI-Server" - -> "Payment App": Crypto Get Encrypted Pin Response (<b>Encrypted PIN block</b>)

"Payment App" -> "SDI-Server": Crypto Close Command (<b>70-01</b>)
"SDI-Server" - -> "Payment App": Crypto Close Response

== Fetch None Sensitive Transaction Data ==

"Payment App" -> "SDI-Server": fetchTrxTags Command (<b>29-02</b>)
opt If PlugIn for SDITrigger_ExtDataStore registered
  "SDI-Server" -> "PlugIn": processTrigger()
end
"SDI-Server" - -> "Payment App": fetchTrxTags Response (<b>None sensitive Response Tags</b>)

== Get encrypted (sensitive) Transaction Data ==

"Payment App" -> "SDI-Server": Crypto Open Command (<b>70-00</b>)
"SDI-Server" - -> "Payment App": Crypto Open Response (<b>Crypto Handle</b>)

"Payment App" -> "SDI-Server": getEncData Command (<b>29-00</b>)
"SDI-Server" - -> "Payment App": getEncData Response (<b>Encrypted Data</b>)

== Get encrypted Message Data ==

"Payment App" -> "SDI-Server": getEncMsgData Command (<b>29-01</b>)
opt If PlugIn for SDITrigger_MsgDataAvail registerd
  "SDI-Server" -> "PlugIn": processTrigger(Message Data in clear text)
end
"SDI-Server" - -> "Payment App": getEncMsgData Response (<b>Encrypted Message Data</b>)

== Get Message Signature ==

opt
  "Payment App" -> "SDI-Server": getMsgSignature Command (<b>29-04</b>)
  "SDI-Server" - -> "Payment App": getMsgSignature Response (<b>Message Signature</b>)
end

"Payment App" -> "SDI-Server": Crypto Close Command (<b>70-01</b>)
"SDI-Server" - -> "Payment App": Crypto Close Response

== Clear (sensitive) Transaction Data ==

group Mandatory
  "Payment App" -> "SDI-Server": clearDataStore Command (<b>29-03</b>)
  note right: automatically cleaned after 8 minutes or with the begining of the next trx
  opt If PlugIn for SDITrigger_ExtDataStore registered
    "SDI-Server" -> "PlugIn": processTrigger()
  end
  "SDI-Server" - -> "Payment App": clearDataStore Response
end

@enduml

PlantUML version 1.2019.03(Sun Mar 10 04:04:44 PDT 2019)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 17.0.14+7-Ubuntu-120.04
Operating System: Linux
OS Version: 5.15.0-1082-azure
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>