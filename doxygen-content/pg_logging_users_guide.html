<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ADK-Programmers-Guides: ADK-LOGGING Programmers Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="verifone.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="verifonelogo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ADK-Programmers-Guides
   &#160;<span id="projectnumber">5.0.3-CD1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('pg_logging_users_guide.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ADK-LOGGING Programmers Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec_logging_Preface"></a>
Preface</h1>
<p>This document is intended for developers to understand how to use the ADK logging.</p>
<h2><a class="anchor" id="subsec_logging_Audience"></a>
Audience</h2>
<p>This guide provides information of the ADK Logging usage. Discussed topics of application configuration, deployment, API usage. Guide also contains common usage examples.</p>
<h2><a class="anchor" id="subsec_logging_Organization"></a>
Organization</h2>
<p>This guide is organized as follows:</p>
<p><a class="el" href="pg_logging_users_guide.html#sec_logging_Introduction">Introduction</a>. Brief summary on how ADK Logging works.</p>
<p><a class="el" href="pg_logging_users_guide.html#sec_logging_Getting_Started">Getting Started</a>. Most simple usage example.</p>
<p><a class="el" href="pg_logging_users_guide.html#sec_logging_Programming">Programming</a>. Explains how to use the Logging API.</p>
<p><a class="el" href="pg_logging_users_guide.html#sec_logging_Setup">System Setup and Requirements</a>. How to deploy ADK Logging.</p>
<p><a class="el" href="pg_logging_users_guide.html#sec_logging_Android">Logging on android devices</a>. Logging on android devices.</p>
<p><a class="el" href="pg_logging_users_guide.html#sec_logging_Cleanup">Storage Space, Log Cleanup, and Limits</a> Storage Space, Log Cleanup, and Limits</p>
<p><a class="el" href="pg_logging_users_guide.html#sec_logging_Troubleshooting">Troubleshooting</a>. Common problems encountered for ADK Logging.</p>
<p><a class="el" href="pg_logging_users_guide.html#sec_logging_Appendix">Appendix</a>. Known issues and limitations, acronym definition.</p>
<h1><a class="anchor" id="sec_logging_Introduction"></a>
Introduction</h1>
<p>This chapter shows the basic logging process used by ADK logging.</p>
<h2><a class="anchor" id="subsec_logging_Concepts"></a>
Concepts</h2>
<p>ADK Logging is a solution targeted to make logging accessible and universal </p><div class="image">
<img src="04_logging_information_service_overview.png" alt=""/>
<div class="caption">
ADK Logging</div></div>
   <p>ADK Logging, uses syslog to process user and system messages.</p>
<h1><a class="anchor" id="sec_logging_Getting_Started"></a>
Getting Started</h1>
<h2><a class="anchor" id="subsec_logging_Usage_Example"></a>
ADK Logging Usage Example</h2>
<p>This code below shows most simple example:</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="liblog2_8h.html">liblog2.h</a>&gt;</span></div>
<div class="line"> </div>
<div class="line">log_hdl = LOGAPI_INIT(<span class="stringliteral">&quot;demoapp&quot;</span>);</div>
<div class="line">LOGF_TRACE(log_hdl, <span class="stringliteral">&quot;Trace: %s&quot;</span>, <span class="stringliteral">&quot;Hello world!&quot;</span>);</div>
<div class="line">LOGAPI_DEINIT(log_hdl);</div>
</div><!-- fragment --><p>First, the header file <a class="el" href="liblog2_8h.html">liblog2.h</a> is included. Next, the logging channel <code>demoapp</code> is initialized, and its handle is stored. Tracing is performed using the <code>LOGF_TRACE()</code> API function, which utilizes the channel handle and follows printf-style syntax. Once all logging tasks are complete, the channel is closed. In most scenarios, the logging channel should be initialized at application startup and closed at exit, eliminating the need to reopen it before each logging operation.<br  />
 An application can have multiple logging channels, each configured independently. Most parameters are managed through the Logging Control Panel(LCP), that modifies the application's configuration file.<br  />
<br  />
To run this example, you need to create a configuration file for the <code>demoapp</code> channel. The file should be named <code>demoapp_log.conf</code>. It can be generated using the LCP or included in the application package.</p>
<h2><a class="anchor" id="subsec_logging_How_To_Build_Example"></a>
How To build Example</h2>
<p>You could find ADK Logging example and makefiles in the doc\log\example folder. Follow these steps to build the example:</p>
<dl class="section note"><dt>Note</dt><dd>Prerequisites: You have already installed ADK, SDK and toolchain</dd></dl>
<ol type="1">
<li>Change to <em>ADK</em>\doc\log\example folder</li>
<li>Edit VERSION.mk file and put your toolchain versions/paths here</li>
<li>Build an example:</li>
</ol>
<p>VOS build: </p><div class="fragment"><div class="line">make vos-release-pack</div>
</div><!-- fragment --><p>VOS2 build: </p><div class="fragment"><div class="line">make vos2-release-pack</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_logging_Programming"></a>
Programming</h1>
<h2><a class="anchor" id="subsec_new_logging_Channel_Configuration"></a>
Configuration</h2>
<h3><a class="anchor" id="subsubsec_logging_Configuration_Application_Channel"></a>
Application Channel</h3>
<p>Each logging channel used in the application must be configured; otherwise, logging will be disabled for that channel.</p>
<p>ADK Logging relies on a JSON-format configuration file that stores all logging parameters, such as masks, verbosity, and more. This file is managed through the LCP or Logging API: <a class="el" href="pg_logging_users_guide.html#subsubsec_new_Application_Configuration_Functions">Configuration functions</a> <br  />
Configuration file for the example above: demoapp_log.conf. </p><div class="fragment"><div class="line">{</div>
<div class="line">  <span class="stringliteral">&quot;schema_version&quot;</span>: <span class="stringliteral">&quot;1.0&quot;</span>,</div>
<div class="line">  <span class="stringliteral">&quot;enabled&quot;</span>: <span class="keyword">true</span>,</div>
<div class="line">  <span class="stringliteral">&quot;mask&quot;</span>: 16,</div>
<div class="line">  <span class="stringliteral">&quot;verbosity&quot;</span> : 1,</div>
<div class="line">  <span class="stringliteral">&quot;output&quot;</span> : <span class="stringliteral">&quot;LOGAPI_SYSLOG&quot;</span></div>
<div class="line">}</div>
</div><!-- fragment --><h3><a class="anchor" id="subsubsec_new_Application_Configuration_Log_Masks"></a>
Log Masks</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Log level </th><th class="markdownTableHeadNone">Bitmask </th><th class="markdownTableHeadNone">Log level description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOGAPI_EMERG </td><td class="markdownTableBodyNone">1 </td><td class="markdownTableBodyNone">Emergency / system is unusable  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LOGAPI_ALERT </td><td class="markdownTableBodyNone">2 </td><td class="markdownTableBodyNone">An immediate action must be taken  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOGAPI_CRIT </td><td class="markdownTableBodyNone">4 </td><td class="markdownTableBodyNone">Critical conditions  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LOGAPI_ERROR </td><td class="markdownTableBodyNone">8 </td><td class="markdownTableBodyNone">Error reporting  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOGAPI_WARN </td><td class="markdownTableBodyNone">16 </td><td class="markdownTableBodyNone">Warning reporting  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LOGAPI_NOTICE </td><td class="markdownTableBodyNone">32 </td><td class="markdownTableBodyNone">Normal, but significant condition  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOGAPI_INFO </td><td class="markdownTableBodyNone">64 </td><td class="markdownTableBodyNone">Regular info message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LOGAPI_TRACE </td><td class="markdownTableBodyNone">128 </td><td class="markdownTableBodyNone">High verbosity messages  </td></tr>
</table>
<h3><a class="anchor" id="subsubsec_new_Application_Configuration_Verbosity"></a>
Verbosity</h3>
<p>Following information is available with verbosity mode switched "ON":</p><ul>
<li>FILE:LINE</li>
<li>[PROCESS ID]</li>
<li>[THREAD ID]</li>
</ul>
<h3><a class="anchor" id="subsubsec_new_Application_Configuration_Output_Sources"></a>
Output sources</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Output </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOGAPI_CONSOLE </td><td class="markdownTableBodyNone">Output to console  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LOGAPI_SYSLOG </td><td class="markdownTableBodyNone">Output to syslog  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOGAPI_ALL </td><td class="markdownTableBodyNone">Output to both console and syslog  </td></tr>
</table>
<h3><a class="anchor" id="subsubsec_new_logging_ADK_Configuration"></a>
ADK Component Configuration</h3>
<p>Each ADK component initializes its channel using a stored configuration file. The file is named in the format <code><b>id_log.conf</b>,</code> where <code>id</code> represents the ADK component <code>ID</code>. For example, the configuration file for the <code>ADK</code> <code><b>COM</b> channel</code> is named <code><b>COM_log.conf</b>.</code> <br  />
<br  />
The table below lists all ADK components and their corresponding IDs:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Component name </th><th class="markdownTableHeadNone">Component Id </th><th class="markdownTableHeadNone"><a class="el" href="class_config.html">Config</a> bundle VOS  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-ASL (ADK system loader) </td><td class="markdownTableBodyNone">ASL </td><td class="markdownTableBodyNone"><a href="config/dl.ASL_log_cfg.tgz">dl.ASL_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-AST (Anti Skimming Tool) </td><td class="markdownTableBodyNone">AST </td><td class="markdownTableBodyNone"><a href="config/dl.AST_log_cfg.tgz">dl.AST_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-CCP (Communication Control Panel) </td><td class="markdownTableBodyNone">CCP </td><td class="markdownTableBodyNone"><a href="config/dl.CCP_log_cfg.tgz">dl.CCP_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-COM (Communication Service) </td><td class="markdownTableBodyNone">COM </td><td class="markdownTableBodyNone"><a href="config/dl.COM_log_cfg.tgz">dl.COM_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-CP (Commerce platform) </td><td class="markdownTableBodyNone">CPR </td><td class="markdownTableBodyNone"><a href="config/dl.CPR_log_cfg.tgz">dl.CPR_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-CPL (Commerce Platform Library) </td><td class="markdownTableBodyNone">CPL </td><td class="markdownTableBodyNone"><a href="config/dl.CPL_log_cfg.tgz">dl.CPL_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-EMV-CT (EMV Contact) </td><td class="markdownTableBodyNone">EMVCT </td><td class="markdownTableBodyNone"><a href="config/dl.EMVCT_log_cfg.tgz">dl.EMVCT_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-EMV-CTLS (EMV Contactless) </td><td class="markdownTableBodyNone">EMVCTLS </td><td class="markdownTableBodyNone"><a href="config/dl.EMVCTLS_log_cfg.tgz">dl.EMVCTLS_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-EVENT </td><td class="markdownTableBodyNone">EVT </td><td class="markdownTableBodyNone"><a href="config/dl.EVT_log_cfg.tgz">dl.EVT_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-FPS (Finger print sensor) </td><td class="markdownTableBodyNone">FPS </td><td class="markdownTableBodyNone"><a href="config/dl.FPS_log_cfg.tgz">dl.FPS_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-UTIL-EXPAT </td><td class="markdownTableBodyNone">EXP </td><td class="markdownTableBodyNone"><a href="config/dl.EXP_log_cfg.tgz">dl.EXP_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-PRX </td><td class="markdownTableBodyNone">PRX </td><td class="markdownTableBodyNone"><a href="config/dl.PRX_log_cfg.tgz">dl.PRX_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-INF </td><td class="markdownTableBodyNone">INF </td><td class="markdownTableBodyNone"><a href="config/dl.INF_log_cfg.tgz">dl.INF_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-IPC (IPC layer) </td><td class="markdownTableBodyNone">IPC </td><td class="markdownTableBodyNone"><a href="config/dl.IPC_log_cfg.tgz">dl.IPC_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-IPC (Notification server) </td><td class="markdownTableBodyNone">NFY </td><td class="markdownTableBodyNone"><a href="config/dl.NFY_log_cfg.tgz">dl.NFY_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-IPC (Notification clients) </td><td class="markdownTableBodyNone">NFYCL </td><td class="markdownTableBodyNone"><a href="config/dl.NFYCL_log_cfg.tgz">dl.NFYCL_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-GUIPRT (GUI server) </td><td class="markdownTableBodyNone">GUI </td><td class="markdownTableBodyNone"><a href="config/dl.GUI_log_cfg.tgz">dl.GUI_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-GUIPRT (GUI clients) </td><td class="markdownTableBodyNone">GUICL </td><td class="markdownTableBodyNone"><a href="config/dl.GUICL_log_cfg.tgz">dl.GUICL_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-GUIPRT (Printer server) </td><td class="markdownTableBodyNone">PRT </td><td class="markdownTableBodyNone"><a href="config/dl.PRT_log_cfg.tgz">dl.PRT_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-GUIPRT (Printer clients) </td><td class="markdownTableBodyNone">PRTCL </td><td class="markdownTableBodyNone"><a href="config/dl.PRTCL_log_cfg.tgz">dl.PRTCL_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-MSR </td><td class="markdownTableBodyNone">MSR </td><td class="markdownTableBodyNone"><a href="config/dl.MSR_log_cfg.tgz">dl.MSR_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-NFC (NFC framework) </td><td class="markdownTableBodyNone">NFC </td><td class="markdownTableBodyNone"><a href="config/dl.NFC_log_cfg.tgz">dl.NFC_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-SDI </td><td class="markdownTableBodyNone">SDI </td><td class="markdownTableBodyNone"><a href="config/dl.SDI_log_cfg.tgz">dl.SDI_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-SEC </td><td class="markdownTableBodyNone">SEC </td><td class="markdownTableBodyNone"><a href="config/dl.SEC_log_cfg.tgz">dl.SEC_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-SYS (client) </td><td class="markdownTableBodyNone">SYSCL </td><td class="markdownTableBodyNone"><a href="config/dl.SYSCL_log_cfg.tgz">dl.SYSCL_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-SYS (server) </td><td class="markdownTableBodyNone">SYS </td><td class="markdownTableBodyNone"><a href="config/dl.SYS_log_cfg.tgz">dl.SYS_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-TEC </td><td class="markdownTableBodyNone">TEC </td><td class="markdownTableBodyNone"><a href="config/dl.TEC_log_cfg.tgz">dl.TEC_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-TMS-AGENT </td><td class="markdownTableBodyNone">TMS </td><td class="markdownTableBodyNone"><a href="config/dl.TMS_log_cfg.tgz">dl.TMS_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-PM (Power managment) </td><td class="markdownTableBodyNone">PM </td><td class="markdownTableBodyNone"><a href="config/dl.PM_log_cfg.tgz">dl.PM_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-PM (Power managment clients) </td><td class="markdownTableBodyNone">PMCL </td><td class="markdownTableBodyNone"><a href="config/dl.PMCL_log_cfg.tgz">dl.PMCL_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-MAC (MAC) </td><td class="markdownTableBodyNone">MAC </td><td class="markdownTableBodyNone"><a href="config/dl.MAC_log_cfg.tgz">dl.MAC_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">ADK-MAC (MACt clients) </td><td class="markdownTableBodyNone">MACCL </td><td class="markdownTableBodyNone"><a href="config/dl.MACCL_log_cfg.tgz">dl.MACCL_log_cfg.tgz</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK-LCP </td><td class="markdownTableBodyNone">LCP </td><td class="markdownTableBodyNone"><a href="config/dl.LCP_log_cfg.tgz">dl.LCP_log_cfg.tgz</a>  </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>VOS2 only: The following non-ADK channels can also be configured using LCP: VOSBT, VOSGSM, VOSNET, VOSWIFI</dd></dl>
<p>Package to disable all ADK logging<br  />
V/OS: <a href="config/dl.disable_logs.tgz">dl.disable_logs.tgz</a></p>
<h3><a class="anchor" id="subsubsec_new_Application_Configuration_Package"></a>
Configuration Package</h3>
<p>For the <b>VOS</b> platform, configuration file should be placed to the "/mnt/flash/etc/config/adk-log" directory. This can be reached if package has "Type: flashconfig" in "control" file and destination file starts with "adk-log/" prefix. In this case config package content is extracted to the directory "/mnt/flash/etc/config/adk-log". For backward compatibility configuration file for requested channel is also searched in "/mnt/flash/etc/config/" directory if nothing is found in "/mnt/flash/etc/config/adk-log" directory. But note, LCP completely ignores content located in obsolete "/mnt/flash/etc/config/" directory.</p>
<p>In the <b>VOS3</b> platform configuration files stored at "/mnt/appdata/versioned/globalshare/adk-log/" directory. You can enable ADK Component logging by installing the log enable package. Packages are stored:<br  />
 In ADK <em>full</em> release package: "doc/log/example/load/config/vos3"<br  />
 In ADK-Log <em>full</em> release package "vos3/load/log/config"<br  />
 Among of all logging enable packages for ADK Components, that are system signed, there is a <em>SAMPLE</em> package that is signed as usr1. This is example how to create user-made logging enable packages.</p>
<h3><a class="anchor" id="subsubsec_new_Application_Configuration_Functions"></a>
Configuration functions</h3>
<p>The following API is used to modify configuration options for any LOG channel:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_GETCONFIG(channel, param, *value)</code>  </td><td class="markdownTableBodyNone">Retrieves the configuration parameter for the specified channel and stores its value in <em>value</em>  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGAPI_SETCONFIG(channel, param, value)</code>  </td><td class="markdownTableBodyNone">Sets the specified channel configuration parameter to the value provided in <em>value</em>  </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>After channel configuration done you may need to call LOGAPI_RECONFIG_NOTIFY() to make all channels re-read their configuration files</dd></dl>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Parameter </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOGAPI_ENABLED_PARAM </td><td class="markdownTableBodyNone"><code>enabled</code> parameter. As value you must specify LOGAPI_ENABLED or LOGAPI_DISABLED  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LOGAPI_MASK_PARAM </td><td class="markdownTableBodyNone"><code>mask</code> parameter (See <a class="el" href="pg_logging_users_guide.html#subsubsec_new_Application_Configuration_Log_Masks">Log Masks</a> for available values)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOGAPI_VERBOSITY_PARAM </td><td class="markdownTableBodyNone"><code>verbosity</code> parameter (See <a class="el" href="pg_logging_users_guide.html#subsubsec_new_Application_Configuration_Verbosity">Verbosity</a> for available values)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LOGAPI_OUTPUT_PARAM </td><td class="markdownTableBodyNone"><code>output</code> parameter (see <a class="el" href="pg_logging_users_guide.html#subsubsec_new_Application_Configuration_Output_Sources">Output sources</a> for available values)  </td></tr>
</table>
<p>Configuration functions could return following error codes:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Code </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOGAPI_CFG_OK </td><td class="markdownTableBodyNone">Configuration done  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LOGAPI_PARAM_ERROR </td><td class="markdownTableBodyNone">Parameter is not supported  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOGAPI_VALUE_ERROR </td><td class="markdownTableBodyNone">Value out of range  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LOGAPI_READ_ERROR </td><td class="markdownTableBodyNone">Error parsing channel current configuration file  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LOGAPI_WRITE_ERROR </td><td class="markdownTableBodyNone">Error writing configuration file  </td></tr>
</table>
<h2><a class="anchor" id="subsec_logging_Init_API"></a>
Initialization Functions</h2>
<p>Before an application can log any data, it must initialize the logging channel(s). Once all logging is complete (typically at exit), the application should close these channels. The following API functions handle these tasks:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_INIT(channel)</code>  </td><td class="markdownTableBodyNone">Initializes <code>liblog</code> channel. Returns channel handle.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGAPI_DEINIT(handle)</code>  </td><td class="markdownTableBodyNone">Deinitializes liblog channel.  </td></tr>
</table>
<h2><a class="anchor" id="subsec_logging_Logging_API"></a>
Logging Functions</h2>
<p>Generic logging functions are level-specific. All these functions take <em>handle</em> from LOGAPI_INIT() and use printf-like <em>format</em>. Provided function set from less critical level <em>TRACE</em> till most critical level <em>EMERG</em>.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGF_TRACE(handle, format, ...)</code>  </td><td class="markdownTableBodyNone">Log <em>Trace</em> message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGF_INFO(handle, format, ...)</code>  </td><td class="markdownTableBodyNone">Log <em>Information</em> message  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGF_NOTICE(handle, format, ...)</code>  </td><td class="markdownTableBodyNone">Log <em>Notice</em> message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGF_WARN(handle, format, ...)</code>  </td><td class="markdownTableBodyNone">Log <em>Warning</em> message  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGF_ERROR(handle, format, ...)</code>  </td><td class="markdownTableBodyNone">Log <em>Error</em> message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGF_CRIT(handle, format, ...)</code>  </td><td class="markdownTableBodyNone">Log <em>Critical</em> message  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGF_ALERT(handle, format, ...)</code>  </td><td class="markdownTableBodyNone">Log <em>Alert</em> message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGF_EMERG(handle, format, ...)</code>  </td><td class="markdownTableBodyNone">Log <em>Emergency</em> message  </td></tr>
</table>
<p>You must pass a valid <em>handle</em>. Passing deinitialized handle results in undefined behavior.</p>
<p><b>Example</b> </p><div class="fragment"><div class="line">LOGF_TRACE(handle, <span class="stringliteral">&quot;Trace Printf %d test&quot;</span>, 1);</div>
</div><!-- fragment --><p> Result: </p><div class="fragment"><div class="line">&lt;71&gt;Sep 17 10:28:41    TESTD: (src/<a class="code" href="main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>.cpp:117) Trace Printf 1 test</div>
</div><!-- fragment --><p>In the <b>VOS3</b> platform there are additional auxiliary functions:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGF_ESCAPE(string)</code>  </td><td class="markdownTableBodyNone">Processes a string by removing non-printable characters. Returns a pointer to a new string escaped string. Memory for the new string is obtained with new(), and must be freed with delete().  </td></tr>
</table>
<h2><a class="anchor" id="subsec_logging_Hex_Dump_API"></a>
Hex Dump Logging Functions</h2>
<p>Hex Dump Logging Functions like a generic logging functions are level-specific, so functions available for each Log Level. There are two choices are available for Hex Dump format output: <em>RAW</em> and <em>FULL</em>.<br  />
<br  />
<b>Raw Hex Dump</b><br  />
Raw Hex Dump API generates output messages in traditional format: Offset + HEX + ASCII.<br  />
Example: </p><div class="fragment"><div class="line"><span class="keywordtype">char</span> buffer[15] = “logapi hexdump”;</div>
<div class="line">LOGAPI_HEXDUMP_RAW_TRACE(handle, (<span class="keywordtype">void</span> *)buffer, 15);</div>
</div><!-- fragment --><p> The result is: </p><div class="fragment"><div class="line">6C 6<a class="code" href="md5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a> 67 61 70 69 20 68 65 78 64 75 6D 70 00    logapi hexdump</div>
</div><!-- fragment --><p> <br  />
<b>Full Hex Dump</b><br  />
Full Hex Dump API additionally adds separator line, title, data and size information.<br  />
Example: </p><div class="fragment"><div class="line"><span class="keyword">const</span> <span class="keywordtype">char</span> buf[] = <span class="stringliteral">&quot;12345678901234567890123456789012345678901234567890\x00\x01\xFF&quot;</span>;</div>
<div class="line">LOGAPI_HEXDUMP_TRACE( handle, <span class="stringliteral">&quot;Buffer&quot;</span>, buf, <span class="keyword">sizeof</span>( buf ) );</div>
</div><!-- fragment --><p>The result is: </p><div class="fragment"><div class="line">&lt;71&gt;Sep 17 10:28:41  TESTD: Buffer ptr:0x7041FB7C <a class="code" href="namespacevficom_1_1cmdparam_1_1in_1_1ping.html#ae0d180616fe53dddd61f70c62526b0db">size</a>:0x36</div>
<div class="line">&lt;71&gt;Sep 17 10:28:41  TESTD:  ---- ----------------------------------------------- ----------------</div>
<div class="line">&lt;71&gt;Sep 17 10:28:41  TESTD:  000| 31 32 33 34 35 36 37 38 39 30 31 32 33 34 35 36 1234567890123456</div>
<div class="line">&lt;71&gt;Sep 17 10:28:41  TESTD:  010| 37 38 39 30 31 32 33 34 35 36 37 38 39 30 31 32 7890123456789012</div>
<div class="line">&lt;71&gt;Sep 17 10:28:41  TESTD:  020| 33 34 35 36 37 38 39 30 31 32 33 34 35 36 37 38 3456789012345678</div>
<div class="line">&lt;71&gt;Sep 17 10:28:41  TESTD:  030| 39 30 00 01 <a class="code" href="md5_8cpp.html#a0a143972cb6c4fe16f0ffa8a3d41ebf3">FF</a> 00 90....</div>
<div class="line">&lt;71&gt;Sep 17 10:28:41  TESTD:  ---- ----------------------------------------------- ----------------</div>
</div><!-- fragment --><p>Raw Hex Dump functions:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>DBG_HEXDUMP_TRACE(handle, data, size)</code>  </td><td class="markdownTableBodyNone">Debug hex dump message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_RAW_TRACE(handle, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Trace</em> message  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_RAW_INFO(handle, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Information</em> message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_RAW_NOTICE(handle, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Notice</em> message  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_RAW_WARN(handle, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Warning</em> message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_RAW_ERROR(handle, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Error</em> message  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_RAW_CRIT(handle, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Critical</em> message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_RAW_ALERT(handle, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Alert</em> message  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_RAW_EMERG(handle, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Emergency</em> message  </td></tr>
</table>
<p><br  />
Full Hex Dump functions:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Function </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>DBG_HEXDUMP_TRACE(handle, title, data, size)</code>  </td><td class="markdownTableBodyNone">Debug hex dump message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_TRACE(handle, title, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Trace</em> message  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_INFO(handle, title, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Information</em> message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_NOTICE(handle, title, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Notice</em> message  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_WARN(handle, title, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Warning</em> message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_ERROR(handle, title, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Error</em> message  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_CRIT(handle, title, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Critical</em> message  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_ALERT(handle, title, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Alert</em> message  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_HEXDUMP_EMERG(handle, title, data, size)</code>  </td><td class="markdownTableBodyNone">Hex dump <em>Emergency</em> message  </td></tr>
</table>
<p>Parameter <em>title</em> shall specify the string which should be printed in the header of the hexdump output. If the parameter value is NULL, then the header will contain 0 in place of the title<br  />
 Parameter <em>data</em> shall contain the pointer to the data, which is required to be printed. The parameter expects <code>void</code> * <code>pointer</code>.<br  />
 <code>Parameter</code> <em>size</em> indicates the length of the data in bytes.<br  />
<br  />
It should be always kept in mind, that the data printed will be a set of bytes stored in the specified address passed in this parameter. If the parameter value is NULL, then nothing will be printed</p>
<dl class="section note"><dt>Note</dt><dd>A misleading situation may occur, when the intention is to print a hex representation of the <code>const</code> <code>char</code> * string, but the pointer to an <code>std::string</code> object is passed instead. In such case, the hexdump will print the contents of the <code>std::string</code> object, which is not originally expected.</dd></dl>
<h2><a class="anchor" id="subsec_logging_API_for_Controlling_a_syslog_Daemon"></a>
Syslog Daemon Configuration API</h2>
<p>Syslog daemon could be configured by API calls:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="syslogcmd_8h.html#a9b45919ef5fe9f2b4ec89ff27d19ec30" title="Sets level on syslog daemon side.">syslcmd_set_level(enum SYSL_LVL lvl)</a> </td><td class="markdownTableBodyNone">Sets maximum logging level  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="syslogcmd_8h.html#afa7176aab63ea25440d5790c64885caa" title="Sets source of log messages.">syslcmd_set_source(enum SYSL_SRC src)</a> </td><td class="markdownTableBodyNone">Sets a source of log messages Note: has no effect on V/OS  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="syslogcmd_8h.html#a155d47993134d2694a06ffd000d06dd8" title="Sets serial as destination for messages.">syslcmd_set_dest_COM(int serial_port)</a> </td><td class="markdownTableBodyNone">Sets destination to COM  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="syslogcmd_8h.html#ae5d5ce27ee87e076c762b06d8fe26fc5" title="Sets UPD as destination for messages.">syslcmd_set_dest_UDP(const char *addr, int port)</a> </td><td class="markdownTableBodyNone">Sets destination to UDP  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="syslogcmd_8h.html#aff55c12911bcfc4dceee1e717a904e88" title="Sets file as destination for messages.">syslcmd_set_dest_FILE(const char *filename)</a> </td><td class="markdownTableBodyNone">Sets destination to file  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="syslogcmd_8h.html#a8fe51a2185b092cbdcd6e883b93248bf" title="Sets integer options(others than UDP host and file name) on syslog daemon side.">syslcmd_set_cfg_int(enum config_option option, int ival)</a> </td><td class="markdownTableBodyNone">Sets integer options(others than UDP host and file name)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="syslogcmd_8h.html#aa4b80452347490e05b502546792aadae" title="Sets string options(UDP host and file name) on syslog daemon side.">syslcmd_set_cfg_str(enum config_option option, const char *sval)</a> </td><td class="markdownTableBodyNone">Sets string options(UDP host and file name)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="syslogcmd_8h.html#a1665cdbed014c0926a02a242708c5234" title="Returns integer options(others than UDP host and file name) on syslog daemon side.">syslcmd_get_cfg_int(enum config_option option, int *ival)</a> </td><td class="markdownTableBodyNone">Returns integer options(others than UDP host and file name)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a class="el" href="syslogcmd_8h.html#a94f13c3a6a608ba2c24ace72bbc2714c" title="Returns string options(UDP host and file name) from syslog daemon side.">syslcmd_get_cfg_str(enum config_option option, char *sval)</a> </td><td class="markdownTableBodyNone">Returns string options(UDP host and file name)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a class="el" href="syslogcmd_8h.html#ae79e868aa5c9cd5cbcf2772c9938c8ce" title="apply configuration to syslog daemon">syslcmd_apply_config()</a> </td><td class="markdownTableBodyNone">Apply configuration to syslog daemon  </td></tr>
</table>
<p>Example: </p><div class="fragment"><div class="line"><span class="preprocessor">#include &lt;<a class="code" href="syslogcmd_8h.html">syslogcmd.h</a>&gt;</span></div>
<div class="line"><a class="code" href="syslogcmd_8h.html#a1665cdbed014c0926a02a242708c5234">syslcmd_get_cfg_int</a>(<a class="code" href="syslogcmd_8h.html#aa5ce2add12b42175db5dbab55d3c384ca99788d1f27bac42d0c7bac63026c5959">ENABLED</a>, enabled);</div>
<div class="line"><a class="code" href="syslogcmd_8h.html#ae79e868aa5c9cd5cbcf2772c9938c8ce">syslcmd_apply_config</a>();</div>
</div><!-- fragment --><p> <br  />
 The following configuration options are available:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Configuration option </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>ENABLED</code>  </td><td class="markdownTableBodyNone">Enable/Disable syslog daemon  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>DESTINATION</code>  </td><td class="markdownTableBodyNone">Destination (Serial, UDP, File, USB)  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>SERIAL_COM</code>  </td><td class="markdownTableBodyNone">COM port, if destination is serial  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>UDP_HOST</code>  </td><td class="markdownTableBodyNone">UDP host, if destination UDP  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>UDP_PORT</code>  </td><td class="markdownTableBodyNone">UDP host port, if destination UDP  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOG_LEVEL</code>  </td><td class="markdownTableBodyNone">Log message level  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>FILE_NAME</code>  </td><td class="markdownTableBodyNone">File name, if destination File  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>MAX_LOGFILE_SIZE</code>  </td><td class="markdownTableBodyNone">Max log file size, if destination File  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>NUMBER_OF_FILES</code>  </td><td class="markdownTableBodyNone">Number of log files, if destination File  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOG_FORMAT</code>  </td><td class="markdownTableBodyNone">Log format (RFC3164 or RFC5424)  </td></tr>
</table>
<h2><a class="anchor" id="subsec_lcp"></a>
Logging control panel</h2>
<h3><a class="anchor" id="sec_conf_v2"></a>
ADK logging configuration</h3>
<div class="image">
<img src="conf_v2.png" alt=""/>
</div>
   <h3><a class="anchor" id="sec_lcp_overview_main_screen"></a>
LCP Main Screen</h3>
<p>The Logging Control Panel (LCP) is a tool to provide the user of an ADK based Verifone Payment device with the following functions:</p>
<ol type="1">
<li>Set / change the application logging settings</li>
<li>Set / change the syslog settings</li>
<li>Set / change logs destination</li>
<li>Check versions of LCP, liblog, syslog</li>
</ol>
<p>The following picture shows the main screen of the LCP :</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Screenshot </th><th class="markdownTableHeadLeft">Hints  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_mainscreen.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">This is main menu, to configure ADK logging:<br  />
<br  />
 Application - configuration for single application<br  />
 Syslog - configuration for global syslog<br  />
 Destination - configuration where to send/store logs<br  />
 Transfer Logs - Transfers syslog logs to external drive <br  />
 Version - information about LCP, Liblog and Syslog version  </td></tr>
</table>
<h3><a class="anchor" id="sec_lcp_application_menu"></a>
LCP application menu</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Screenshot </th><th class="markdownTableHeadLeft">Hints  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_application_menu.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">This is application configuraton menu:<br  />
<br  />
Create config - create new logging configuration for application<br  />
Edit config - edit already existing application logging configuration<br  />
Remove config - remove existing application configuration<br  />
Apply config - applys new/changed configuration  </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Screenshot </th><th class="markdownTableHeadLeft">Hints  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_application_settings1.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">Application configuration:<br  />
<br  />
APPID - same as used in LOGAPI_INIT(APPID)<br  />
Enabled - enable/disable logs from application<br  />
Verbosity -  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_application_settings2.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">Application configuration:<br  />
<br  />
Log mask - Can set which logs to see from application  </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Screenshot </th><th class="markdownTableHeadLeft">Hints  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_application_list.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">When editing/removing application configuration list of all configurations is showed  </td></tr>
</table>
<h3><a class="anchor" id="sec_lcp_syslog_menu"></a>
LCP syslog settings</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Screenshot </th><th class="markdownTableHeadLeft">Hints  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_syslog_settings1.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">Syslog configuration:<br  />
<br  />
 Destination - where to send/store logs (more options under Main menu -&gt; Destinations<br  />
 Log level - max level of log message. See <a class="el" href="pg_logging_users_guide.html#subsubsec_new_Application_Configuration_Log_Masks">Log masks</a> for detailed description of each log level  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_syslog_settings2.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">Syslog configuration:<br  />
<br  />
 Log format - syslog daemon will compose messages according to chosen format  </td></tr>
</table>
<h3><a class="anchor" id="sec_lcp_destination_menu"></a>
LCP destination menu</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Screenshot </th><th class="markdownTableHeadLeft">Hints  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_destination_menu.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">Destination menu:<br  />
<br  />
File settings<br  />
Serial settings<br  />
UDP settings<br  />
  </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Screenshot </th><th class="markdownTableHeadLeft">Hints  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_destination_file.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">File settings:<br  />
<br  />
File name - name of file where to write logs<br  />
 Number of files - how many files keep for log rotation. Range: 1..99 <br  />
Max file size (in Kb) - max size of each file. Range: 1..4096<br  />
<br  />
<b>Notice:</b><br  />
Device flash section is with size of 12MB (compression is used).<br  />
<br  />
This limits to aprox. 40 MB of uncompressed syslog messages as max.  </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Screenshot </th><th class="markdownTableHeadLeft">Hints  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_destination_serial.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">Serial settings:<br  />
<br  />
Port number - number of pourt where to send log messages  </td></tr>
</table>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Screenshot </th><th class="markdownTableHeadLeft">Hints  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_destination_udp.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">UDP settings:<br  />
<br  />
IP - IP where to send log messages<br  />
Port - port of IP where to send log messages  </td></tr>
</table>
<h3><a class="anchor" id="sec_lcp_version_info"></a>
LCP version info</h3>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Screenshot </th><th class="markdownTableHeadLeft">Hints  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="lcp_version.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">Versions:<br  />
<br  />
 lcp version - LCP version<br  />
liblog version - liblog version used<br  />
 syslog version - version of syslogc  </td></tr>
</table>
<h2><a class="anchor" id="subsec_logging_Miscellaneous_API"></a>
Miscellaneous API</h2>
<p>Listed below are the miscellaneous APIs used for logging</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Macro </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_RECONFIG_NOTIFY()</code>  </td><td class="markdownTableBodyNone">Notifies all applications and channels to re-read their configuration files.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>LOGAPI_DUMP_SYS_INFO</code>  </td><td class="markdownTableBodyNone">Outputs essential system info such as OS version, RAM size, model number and so on.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>log_getVersion()</code>  </td><td class="markdownTableBodyNone">Returns string with version of a library  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>Log_GetSvcVersion()</code>  </td><td class="markdownTableBodyNone">Returns string with version of a syslog daemon  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><code>LOGAPI_PRINT_CALLSTACK(level)</code>  </td><td class="markdownTableBodyNone">Prints actual call stack. <dl class="section note"><dt>Note</dt><dd>Implemented only for V/OS.  </dd></dl>
</td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><code>dumpLogs(location, fileName)</code>  </td><td class="markdownTableBodyNone">Dumps logs to /tmp/ folder (0) or to external storage (1) . File name "logs" will create file "logs.tgz"  </td></tr>
</table>
<h1><a class="anchor" id="sec_logging_Setup"></a>
System Setup and Requirements</h1>
<h2><a class="anchor" id="subsec_logging_Deployment_liblog"></a>
Deploy liblog</h2>
<p>liblog ships in two forms – as a shared object (<code>liblog.so</code>) and a static library (<code>liblog-static.a</code>).</p>
<p>To use liblog on V/OS, one must link against libsvc_logmgr.so (located under <b>SDK_DIR%/usr/local/lib</b>).</p>
<dl class="section note"><dt>Note</dt><dd>In order for linker to resolve symbols in a correct manner, path to said libraries has to be put after a path to <code>liblog-static.a</code>.</dd></dl>
<p>There is also a <code><a class="el" href="syslogcmd_8h.html">syslogcmd.h</a></code> with API for controlling syslog daemon.</p>
<h2><a class="anchor" id="subsec_logging_Deployment_syslogd_VOS"></a>
VOS logging service</h2>
<p>Terminal already has default syslog configuration file <code>user_syslog.conf</code>.<br  />
VOS1/VOS2 - <code>/mnt/flash/etc/config/syslog/user_syslog</code>.conf.<br  />
VOS3 - <code>/mnt/appdata/versioned/globalshare/syslog/user_syslog</code>.conf.<br  />
<br  />
<code>Default</code> <code>user_syslog.conf</code> content:</p><ul>
<li>enabled = 1</li>
<li>log_level = 6</li>
<li>number_of_files = 2</li>
<li>max_logfile_size = 200</li>
<li>destination = 2</li>
<li>file_name = messages</li>
<li>udp_host = 127.0.0.1</li>
<li>udp_port = 514</li>
<li>serial_com = 1</li>
<li>log_format = 0</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>This file could be modified through syslcmd_set_XXX calls. Please refer to subsubsec_logging_configuration.</dd></dl>
<h2><a class="anchor" id="sec_logging_Syslog_Configuration_File"></a>
Syslog Configuration File</h2>
<p>This section gives an overview of parameters which can be set for syslog daemon (see <b>example/conf/syslog.conf</b> for example).</p>
<p><code>enabled</code> – [1 – enabled, 0 - disabled] enables or disables syslog daemon</p>
<p><code>destination</code> – sets destination for log messages.</p><ul>
<li>0 – serial</li>
<li>1 – UDP</li>
<li>2 – File (default)</li>
<li>3 – USB [*]</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>[*] - USB port should be in device mode and connected to PC. Logging through serial over USB is only supported mode.</dd></dl>
<p><code>log_level</code> – sets maximum level of a log message:</p><ul>
<li>0 – LOG_EMERG</li>
<li>1 – LOG_ALERT</li>
<li>2 – LOG_CRIT</li>
<li>3 – LOG_ERR</li>
<li>4 – LOG_WARNING</li>
<li>5 – LOG_NOTICE</li>
<li>6 – LOG_INFO</li>
<li>7 – LOG_DEBUG</li>
</ul>
<p><code>file_name</code> – denotes the name of the output file when a file is specified as the destination</p>
<p>There are two log files:</p><ul>
<li>Temporary memory: /var/log/messages – Contains logs from the most recent reboot.</li>
<li>Permanent memory (flash): VOS1/VOS2 - /mnt/flash/logs/system/messages. VOS3 - /mnt/sysdata/logs/messages for the system messages and /mnt/appdata/logs/messages for the user/application messages.</li>
</ul>
<p>The <code>file_name</code> configuration parameter specifies the file name in temporary memory (VOS1/VOS2).</p>
<dl class="section note"><dt>Note</dt><dd>VOS3 does not use this; instead, it consistently uses the name 'messages'.</dd></dl>
<p><code>max_logfile_size</code> – maximum log file size (in Kb) before logs get rotated</p>
<p><code>number_of_files</code> – number of files to rotate, i.e <code>&lt;file_name&gt;0</code> would contain the most recent logs and <code>&lt;file_name&gt;9</code> would contain the oldest.</p>
<p><code>send_retries</code> – count of retries to be attempted by daemon to resend failed message</p>
<p><code>serial_com</code> – [1,2,6] when serial is set as destination, denotes COM port number</p>
<p><code>udp_host</code> – when UDP is set as destination, denotes IP address of a host to which messages will be sent</p>
<p><code>udp_port</code> – when UDP is set as destination, denotes port of a host to which messages will be sent</p>
<p><code>log_format</code> – syslog daemon will compose messages according to chosen format.</p><ul>
<li>0 - RFC3164:<div class="fragment"><div class="line">&lt;priority&gt;Mmm DD <a class="code" href="md5_8cpp.html#a8b9f1c4778df01ef970b87dbe5541dc5">HH</a>:MM:SS host tag[pid]: msg</div>
</div><!-- fragment --> Example:<div class="fragment"><div class="line">&lt;165&gt;Aug 24 05:14:15 192.0.2.1 myproc[8710]: hello world!</div>
</div><!-- fragment --></li>
<li>1 - RFC5424:<div class="fragment"><div class="line">&lt;priority&gt;version YYYY-MM-DDTHH:MM:SS.MMMZ host proc pid msgid structured_data msg</div>
</div><!-- fragment --> Example:<div class="fragment"><div class="line">&lt;165&gt;1 2019-02-14T05:14:15.003Z 192.0.2.1 myproc 8710-   - hello world!</div>
</div><!-- fragment --></li>
</ul>
<dl class="section note"><dt>Note</dt><dd>When you install the ADK release, the logging settings will be reset to the default values. This applies to both syslog settings and channel settings. If you need to keep your settings after installing an ADK release, you can use the liblog API and update the settings programmatically, or create a configuration package with your settings and install it right after the ADK release.</dd></dl>
<h1><a class="anchor" id="sec_logging_Android"></a>
Logging on android devices</h1>
<p>As ADK-LOGGING project was initially made for VOS devices only, there are a few differences in the way logging works on android devices, therefore it has it's own section in documentation. To use ADK-LOGGING functions on android, liblog.so which is compiled for android-arm devices should be used. ADK logging configurations are stored on the device at /sdcard/config/adk-log/. Essentially usage is the same as on VOS devices (check out <a class="el" href="pg_logging_users_guide.html#sec_logging_Getting_Started">Getting Started</a> for code example), but with some prerequisites:</p>
<h2><a class="anchor" id="subsec_logging_Android_permissions"></a>
Android permissions necessary for logging</h2>
<p>Starting from android 10 and up, android introduces scoped storage - this interferes with functionality of liblog, as it's primary functionality of reading configuration files from a specific directory was broken. For liblog.so to function properly (read configuration files) it is necessary to grant these android permissions for apps which want to use liblog (in <code>AndroidManifest.xml</code>):</p>
<p>Android 10 (NEO) devices need to grant <code>READ_EXTERNAL_STORAGE</code> permission and use <code>android:requestLegacyExternalStorage="true"</code> : </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;utf-8&quot;</span>?&gt;</div>
<div class="line">  &lt;manifest ...&gt;</div>
<div class="line">  ...</div>
<div class="line">  &lt;uses-permission android:name=<span class="stringliteral">&quot;android.permission.READ_EXTERNAL_STORAGE&quot;</span>/&gt;</div>
<div class="line">    &lt;application android:requestLegacyExternalStorage=<span class="stringliteral">&quot;true&quot;</span>&gt;</div>
<div class="line">      ...</div>
<div class="line">    &lt;/application&gt;</div>
<div class="line">  &lt;/manifest&gt;</div>
<div class="line">&lt;/xml&gt;</div>
</div><!-- fragment --><p>Android 13 (NEO2) and up need to request <code>MANAGE_EXTERNAL_STORAGE</code> permission to function properly: </p><div class="fragment"><div class="line">&lt;?xml version=<span class="stringliteral">&quot;1.0&quot;</span> encoding=<span class="stringliteral">&quot;utf-8&quot;</span>?&gt;</div>
<div class="line">  &lt;manifest ...&gt;</div>
<div class="line">  ...</div>
<div class="line">  &lt;uses-permission android:name=<span class="stringliteral">&quot;android.permission.MANAGE_EXTERNAL_STORAGE&quot;</span>/&gt;</div>
<div class="line">  ...</div>
<div class="line">  &lt;/manifest&gt;</div>
<div class="line">&lt;/xml&gt;</div>
</div><!-- fragment --><p>Also, these permissions have to be requested programmatically for them to be granted (adding these permissions in the android manifest is not enough). Code simillar to this should be used to request those permissions: </p><div class="fragment"><div class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keywordtype">int</span> STORAGE_PERMISSION_CODE = 23;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keywordtype">boolean</span> checkStoragePermissions() {</div>
<div class="line">    <span class="keywordflow">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {</div>
<div class="line">        <span class="comment">//Android is 11 (R) or above</span></div>
<div class="line">        <span class="keywordflow">return</span> Environment.isExternalStorageManager();</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">//Below android 11</span></div>
<div class="line">        <span class="keywordtype">int</span> write = ContextCompat.checkSelfPermission(<span class="keyword">this</span>, Manifest.permission.WRITE_EXTERNAL_STORAGE);</div>
<div class="line">        <span class="keywordtype">int</span> read = ContextCompat.checkSelfPermission(<span class="keyword">this</span>, Manifest.permission.READ_EXTERNAL_STORAGE);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">return</span> read == PackageManager.PERMISSION_GRANTED &amp;&amp; write == PackageManager.PERMISSION_GRANTED;</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">private</span> <span class="keywordtype">void</span> requestForStoragePermissions() {</div>
<div class="line">    <span class="comment">//Android is 11 (R) or above</span></div>
<div class="line">    <span class="keywordflow">if</span> (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.R) {</div>
<div class="line">        <span class="keywordflow">try</span> {</div>
<div class="line">            Intent intent = <span class="keyword">new</span> Intent();</div>
<div class="line">            intent.setAction(Settings.ACTION_MANAGE_APP_ALL_FILES_ACCESS_PERMISSION);</div>
<div class="line">            Uri uri = Uri.fromParts(<span class="stringliteral">&quot;package&quot;</span>, this.getPackageName(), <span class="keyword">null</span>);</div>
<div class="line">            intent.setData(uri);</div>
<div class="line">            this.startActivity(intent);</div>
<div class="line">        } <span class="keywordflow">catch</span> (Exception e) {</div>
<div class="line">            Intent intent = <span class="keyword">new</span> Intent();</div>
<div class="line">            intent.setAction(Settings.ACTION_MANAGE_ALL_FILES_ACCESS_PERMISSION);</div>
<div class="line">            this.startActivity(intent);</div>
<div class="line">        }</div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line">        <span class="comment">//Below android 11</span></div>
<div class="line">        ActivityCompat.requestPermissions(</div>
<div class="line">                <span class="keyword">this</span>,</div>
<div class="line">                <span class="keyword">new</span> String[] {</div>
<div class="line">                        Manifest.permission.WRITE_EXTERNAL_STORAGE,</div>
<div class="line">                        Manifest.permission.READ_EXTERNAL_STORAGE</div>
<div class="line">                },</div>
<div class="line">                STORAGE_PERMISSION_CODE</div>
<div class="line">        );</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>As it is best to not grant these dangerous permissions to apps, it is also possible to make liblog.so work by installing Log control panel for android. Log control panel shold be available on newest android NEO and NEO2 releases and it is possible to launch it from sysmode -&gt; Other options -&gt; Logging channels. Liblog.so has functionality to connect to LCP service to request config files without needing READ permissions, this means that LCP reads config files and sends this information to liblog.so to use for processing. </p><dl class="section note"><dt>Note</dt><dd>If permissions are not granted to application which uses liblog and LCP is not installed on the device which runs android &gt;=10, logging will not work! Either add above mentioned permissions, or install LCP and grant it MANAGE_EXTERNAL_STORAGE permissions on first run.</dd></dl>
<h2><a class="anchor" id="subsec_logging_Log_control_panel_on_Android"></a>
Log control panel on Android</h2>
<p>Latest android releases should have a LCP (Log control panel) application which adds possibility to add/modify/remove logging channels on the device and additionally has functionality to send config data to liblog if the application which uses liblog does not have read permissions. To launch LCP on android, open sysmode, press back arrow to enter "other options" menu and press "Logging channels" button. This should open LCP app.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Screenshot </th><th class="markdownTableHeadLeft">Additional info  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="android_sysmode_enter_lcp.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">LCP can be opened by pressing "logging channels" button in sysmode "other options" menu.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><div class="image">
<img src="android_lcp_main.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">Main menu of log control panel. Press "Add new channel" to add new config, or press on existing config to edit or delete selected entry.  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><div class="image">
<img src="android_lcp_new_config.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">LCP new config menu. press on editable fields to edit them (add name, state, logging level, etc.) and press "save channel" to save it, or cancel.  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter"><div class="image">
<img src="android_lcp_edit_config.png" alt=""/>
</div>
     </td><td class="markdownTableBodyLeft">LCP edit config menu. Press on fields to edit them, possible to save channel or delete it.  </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>As logcat has less levels of logging, some liblog logging levels share the same level in logcat. <br  />
"EMERGENCY" and "ALERT" are printed as <code>ANDROID_LOG_FATAL</code>; <br  />
"CRITICAL" and "ERROR" are printed as <code>ANDROID_LOG_ERROR</code>; <br  />
"WARNING" and "NOTICE" are printed as <code>ANDROID_LOG_WARN</code>.</dd></dl>
<h2><a class="anchor" id="sec_logging_Logs_On_Android"></a>
How to obtain logs on Android</h2>
<p>The logcat logging utility is a command-line tool included with the Android SDK that is used to obtain log on Android.</p>
<p><b>Example</b> </p><div class="fragment"><div class="line">$ adb logcat</div>
</div><!-- fragment --><p>The utility allows to define a list of tags used in the system, with priorities, by running logcat and observing the first two columns of each message, given as &lt;priority&gt;/&lt;tag&gt;</p>
<p>The priority is one of the following character values, ordered from lowest to highest priority:</p><ul>
<li>V: Verbose (lowest priority)</li>
<li>D: Debug</li>
<li>I: Info</li>
<li>W: Warning</li>
<li>E: Error</li>
<li>F: Fatal</li>
<li>S: Silent (highest priority, on which nothing is ever printed)</li>
</ul>
<p>Here's an example of a filter expression that suppresses all log messages except those with the tag "SYSCL", at priority "Verbose" or above, and all log messages with tag "TEST", with priority "Debug" or above: </p><div class="fragment"><div class="line">$ adb logcat SYSCL:V TEST:D *:S</div>
</div><!-- fragment --><h1><a class="anchor" id="sec_logging_Cleanup"></a>
Storage Space, Log Cleanup, and Limits</h1>
<p>By default, all log channels are disabled except for system logs, which are written to files (default destination). Log rotation periodically overwrites older files, enabling a relatively long log history with minimal flash space usage.</p>
<p>Two configuration options control log storage:</p><ul>
<li><code>number_of_files</code> </li>
<li><code>max_logfile_size</code> </li>
</ul>
<p>The default settings allow for 2 log files, each up to 2MB (200KB for VOS1/VOS2). Log rotation maintains 3 files (2 active + 1 in progress) to provide a history spanning 2 files.</p>
<p>For multiple debug-level channels enabled, the default may be insufficient and should be increased. However, setting very high values risks excessive flash usage.</p>
<p>In VOS3, automatic limits ensure logs do not consume all system data partition space. These adjust /c max_logfile_size to maintain at least 200MB of free system space.</p>
<p>In VOS3, applying new configurations may delete older logs if the current number of files or sizes on the flash exceed the set values. This can also be used to manually free up space: reducing /c max_logfile_size option will automatically remove all existing logs.</p>
<h1><a class="anchor" id="sec_logging_Troubleshooting"></a>
Troubleshooting</h1>
<p>One of the issues met by liblog user is that changing settings in LCP does not take an effect after editing existing logging channel or creating new one.<br  />
Make sure to press 'Apply config' menu button to apply logging settings immediately.<br  />
Otherwise these will be reread after next logging library initialization or after apropriate API function call.<br  />
 </p><div class="image">
<img src="lcp_apply_config.png" alt=""/>
<div class="caption">
LCP Apply config</div></div>
   <h1><a class="anchor" id="sec_logging_Appendix"></a>
Appendix</h1>
<h2><a class="anchor" id="subsec_logging_Known_Issues_and_Limitations"></a>
Known Issues and Limitations</h2>
<p>Be aware of the following issues and limitations you may encounter:</p><ul>
<li>HOSTNAME part of syslog message is empty unless UDP is used as a destination.</li>
<li>Some packets may be lost when using UDP due to the nature of the protocol.</li>
<li>BOOT messages are not being converted to syslog format.</li>
<li><code>LOG_ODELAY</code>, <code>LOG_NDELAY</code>, <code>LOG_NOWAIT</code>, <code>LOG_PERROR</code> flags in <code>syslog.h</code> currently are not being used and are present for compatibility.</li>
<li>Using printf-like macros (LOGF*): passing NULL to string format specifier will cause a crash, e.g. LOGF_TRACE(“%s”, NULL).</li>
<li>Applying settings to syslog daemon make it restart and few messages are lost.</li>
</ul>
<h2><a class="anchor" id="subsubsec_logging_Acronym_Definitions"></a>
Acronym Definitions</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Acronym </th><th class="markdownTableHeadNone">Definitions  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ADK </td><td class="markdownTableBodyNone">Application Development Kit  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">API </td><td class="markdownTableBodyNone">Application Protocol Interface  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">LCP </td><td class="markdownTableBodyNone">Logging Control Panel  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">OS </td><td class="markdownTableBodyNone">Operating System  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">V/OS </td><td class="markdownTableBodyNone">Verifone Operating System  </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<div class="ttc" id="asyslogcmd_8h_html_a1665cdbed014c0926a02a242708c5234"><div class="ttname"><a href="syslogcmd_8h.html#a1665cdbed014c0926a02a242708c5234">syslcmd_get_cfg_int</a></div><div class="ttdeci">LOGAPI_PUBLIC enum SYSL_ERROR syslcmd_get_cfg_int(enum config_option option, int *ival)</div><div class="ttdoc">Returns integer options(others than UDP host and file name) on syslog daemon side.</div></div>
<div class="ttc" id="asyslogcmd_8h_html_ae79e868aa5c9cd5cbcf2772c9938c8ce"><div class="ttname"><a href="syslogcmd_8h.html#ae79e868aa5c9cd5cbcf2772c9938c8ce">syslcmd_apply_config</a></div><div class="ttdeci">LOGAPI_PUBLIC enum SYSL_ERROR syslcmd_apply_config(void)</div><div class="ttdoc">apply configuration to syslog daemon</div></div>
<div class="ttc" id="amd5_8cpp_html_a96d73bbd7af15cb1fc38c3f4a3bd82e9"><div class="ttname"><a href="md5_8cpp.html#a96d73bbd7af15cb1fc38c3f4a3bd82e9">F</a></div><div class="ttdeci">#define F(x, y, z)</div><div class="ttdef"><b>Definition:</b> md5.cpp:81</div></div>
<div class="ttc" id="asyslogcmd_8h_html_aa5ce2add12b42175db5dbab55d3c384ca99788d1f27bac42d0c7bac63026c5959"><div class="ttname"><a href="syslogcmd_8h.html#aa5ce2add12b42175db5dbab55d3c384ca99788d1f27bac42d0c7bac63026c5959">ENABLED</a></div><div class="ttdeci">@ ENABLED</div><div class="ttdef"><b>Definition:</b> syslogcmd.h:56</div></div>
<div class="ttc" id="aliblog2_8h_html"><div class="ttname"><a href="liblog2_8h.html">liblog2.h</a></div></div>
<div class="ttc" id="amd5_8cpp_html_a8b9f1c4778df01ef970b87dbe5541dc5"><div class="ttname"><a href="md5_8cpp.html#a8b9f1c4778df01ef970b87dbe5541dc5">HH</a></div><div class="ttdeci">#define HH(a, b, c, d, x, s, ac)</div><div class="ttdef"><b>Definition:</b> md5.cpp:97</div></div>
<div class="ttc" id="amd5_8cpp_html_a0a143972cb6c4fe16f0ffa8a3d41ebf3"><div class="ttname"><a href="md5_8cpp.html#a0a143972cb6c4fe16f0ffa8a3d41ebf3">FF</a></div><div class="ttdeci">#define FF(a, b, c, d, x, s, ac)</div><div class="ttdef"><b>Definition:</b> md5.cpp:95</div></div>
<div class="ttc" id="asyslogcmd_8h_html"><div class="ttname"><a href="syslogcmd_8h.html">syslogcmd.h</a></div></div>
<div class="ttc" id="anamespacevficom_1_1cmdparam_1_1in_1_1ping_html_ae0d180616fe53dddd61f70c62526b0db"><div class="ttname"><a href="namespacevficom_1_1cmdparam_1_1in_1_1ping.html#ae0d180616fe53dddd61f70c62526b0db">vficom::cmdparam::in::ping::size</a></div><div class="ttdeci">const COM3_DllSpec char size[]</div><div class="ttdoc">integer - [optional] use &quot;size&quot; as number of data bytes to be sent, default 56</div></div>
<div class="ttc" id="amain_8cpp_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition:</b> main.cpp:1237</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Application Development Kit (ADK)</a></li><li class="navelem"><a class="el" href="system_overview.html">System Overview</a></li><li class="navelem"><a class="el" href="pg_all_components.html">ADK Components</a></li>
    <li class="footer">Generated on Mon Jun 16 2025 16:04:01 for ADK-Programmers-Guides by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
