<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ADK-Programmers-Guides: Packman Tool</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="verifone.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="verifonelogo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ADK-Programmers-Guides
   &#160;<span id="projectnumber">5.0.3-CD1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('packman_users_guide.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Packman Tool </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#packman_page">Packman tool</a></li>
<li class="level1"><a href="#packman_intro">Introduction</a></li>
<li class="level1"><a href="#packman_installation">Installation</a><ul><li class="level2"><a href="#packman_installation_prerequisites">Pre-requisites</a></li>
<li class="level2"><a href="#packman_installation_windows">Windows</a></li>
<li class="level2"><a href="#packman_installation_linux">Linux</a></li>
<li class="level2"><a href="#packman_installation_ref">Reference</a></li>
</ul>
</li>
<li class="level1"><a href="#packman_launch">Launch</a><ul><li class="level2"><a href="#packman_launch_windows">Windows</a></li>
<li class="level2"><a href="#packman_launch_linux">Linux</a></li>
</ul>
</li>
<li class="level1"><a href="#packman_cli">Command line interface</a><ul><li class="level2"><a href="#packman_cli_launch">Launch</a></li>
<li class="level2"><a href="#packman_cli_help">Help</a></li>
<li class="level2"><a href="#packman_cli_special_flags">Windows force permissions (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_build">build command</a><ul><li class="level3"><a href="#vos2">vos2</a></li>
<li class="level3"><a href="#vos3">vos3</a></li>
</ul>
</li>
<li class="level2"><a href="#packman_cli_extract">extract command</a></li>
<li class="level2"><a href="#packman_cli_db_add">db_add command (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_gen_diff">gen_diff command (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_list">list command</a></li>
<li class="level2"><a href="#packman_cli_gen_removal">gen_removal command (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_merge">merge command</a></li>
<li class="level2"><a href="#packman_cli_sign">sign command</a></li>
<li class="level2"><a href="#packman_cli_validate">validate command</a></li>
<li class="level2"><a href="#packman_cli_cpapp_convert">cpapp_convert command (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_gen_activation">gen_activation command (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_upwd_build">upwd_build command (vos3 &amp; vaos only)</a></li>
<li class="level2"><a href="#packman_cli_uvrk_build">uvrk_build command (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_pre_signingportal">pre_signingportal command</a></li>
<li class="level2"><a href="#packman_cli_post_signingportal">post_signingportal command</a></li>
<li class="level2"><a href="#packman_cli_zip_create">zip_create command (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_sponsor_change_create">sponsor_change_create command (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_sponsor_change_merge">sponsor_change_merge command (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_zip_sign">zip_sign command (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_zip_apply">zip_apply command (vos3 only)</a></li>
<li class="level2"><a href="#packman_cli_stat">stat command</a></li>
<li class="level2"><a href="#packman_cli_ui">ui command</a></li>
</ul>
</li>
<li class="level1"><a href="#packman_bundle_filters">Bundle filters (vos3 only)</a></li>
<li class="level1"><a href="#packman_ui">User interface</a><ul><li class="level2"><a href="#packman_ui_start">Start</a></li>
<li class="level2"><a href="#packman_ui_add_catalog">Add to catalog</a></li>
<li class="level2"><a href="#packman_ui_dlfile_treeview">Tree view</a></li>
<li class="level2"><a href="#packman_ui_contentview">Content view</a></li>
<li class="level2"><a href="#packman_ui_find">Search</a></li>
<li class="level2"><a href="#packman_ui_validation">Validation report</a></li>
<li class="level2"><a href="#packman_ui_breadcrumbs">Bread crumbs</a></li>
<li class="level2"><a href="#packman_ui_create_project">Create a project</a></li>
<li class="level2"><a href="#packman_ui_create_writable">Writable nodes</a></li>
<li class="level2"><a href="#packman_ui_select_signer">Select signer and signer users</a></li>
<li class="level2"><a href="#packman_ui_delete_selected">Delete selected nodes</a></li>
<li class="level2"><a href="#packman_ui_undo_redo">Undo / redo</a></li>
<li class="level2"><a href="#packman_ui_context_menu">Context menu</a></li>
<li class="level2"><a href="#packman_ui_edit_text_file">Edit text file</a></li>
<li class="level2"><a href="#packman_ui_add_files">Adding files to archive</a></li>
<li class="level2"><a href="#packman_ui_change_permissions">Change permissions</a></li>
<li class="level2"><a href="#packman_ui_export">Exporting</a></li>
</ul>
</li>
<li class="level1"><a href="#packman_automatic_fixes">Automatic fixes</a></li>
<li class="level1"><a href="#packman_device_modes">Device mode validation  (vos3 only)</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="packman_page"></a>
Packman tool</h1>
<p>This page contains information about the Packman tool usage and design.</p>
<h1><a class="anchor" id="packman_intro"></a>
Introduction</h1>
<p>On V/OS and V/OS2 platforms, the packaging is using three levels of archives.</p><ul>
<li>Dlfile<ul>
<li>Bundle(s)<ul>
<li>Package(s)</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>Please refer to <a class="el" href="pg_vos_secins_guide.html#secins_page">Secure Installer</a> for complete description of these archives.</p>
<p>The Packman tool is providing three facilities to manage the creation, modification and signing of archives:</p><ol type="1">
<li>Command line interface</li>
<li>UI interface</li>
<li>Python library with APIs</li>
</ol>
<h1><a class="anchor" id="packman_installation"></a>
Installation</h1>
<h2><a class="anchor" id="packman_installation_prerequisites"></a>
Pre-requisites</h2>
<p>Packman tool has following pre-requisites:</p><ul>
<li>Host OS: Windows or Linux.</li>
<li>HTML5 CSS3 Javascript browser (only if UI interface is used)</li>
</ul>
<h2><a class="anchor" id="packman_installation_windows"></a>
Windows</h2>
<ol type="1">
<li>Install python 3.8+ for windows<ul>
<li>choose 'Customize Installation' <div class="image">
<img src="windows_python_setup.png" alt=""/>
</div>
</li>
<li>verify that install 'pip' is ticked <div class="image">
<img src="windows_python_setup_pip.png" alt=""/>
</div>
</li>
<li>launch installation</li>
</ul>
</li>
<li>Extract packman release file (.zip) to a directory of your choice<ul>
<li>tools like 7-zip and the like can be used</li>
<li>'c:\tools\packman' is assumed in this documentation</li>
</ul>
</li>
<li>Open a command line window 'cmd'</li>
<li>Change current directory to packman directory <div class="fragment"><div class="line">cd c:\tools\packman </div>
</div><!-- fragment --></li>
<li>Install requirements <div class="fragment"><div class="line">py -m pip install -e . </div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="packman_installation_linux"></a>
Linux</h2>
<p>These steps may vary upon linux distributions. Ubuntu is assumed in the examples.</p><ol type="1">
<li>Install python 3.8+ <div class="fragment"><div class="line">sudo apt install python3 </div>
</div><!-- fragment --></li>
<li>Install pip <div class="fragment"><div class="line">sudo apt install python3-pip </div>
</div><!-- fragment --></li>
<li>Extract packman release file (tgz) to a directory of your choice<ul>
<li>'~/tools/packman' is assumed in this documentation <div class="fragment"><div class="line">tar xzvf packman_x.y.z.tgz  </div>
</div><!-- fragment --></li>
</ul>
</li>
<li>Change current directory to packman directory <div class="fragment"><div class="line">cd ~/tools/packman </div>
</div><!-- fragment --></li>
<li>Install requirements <div class="fragment"><div class="line">pip install -e . </div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="packman_installation_ref"></a>
Reference</h2>
<h1><a class="anchor" id="packman_launch"></a>
Launch</h1>
<h2><a class="anchor" id="packman_launch_windows"></a>
Windows</h2>
<ol type="1">
<li>Open a command line window 'cmd' <div class="fragment"><div class="line">py packman.py </div>
</div><!-- fragment --></li>
</ol>
<h2><a class="anchor" id="packman_launch_linux"></a>
Linux</h2>
<ul>
<li>Open a terminal (ie Ctrl+Alt+T)</li>
</ul>
<ol type="1">
<li>Launch <div class="fragment"><div class="line">packman.py </div>
</div><!-- fragment --></li>
</ol>
<h1><a class="anchor" id="packman_cli"></a>
Command line interface</h1>
<h2><a class="anchor" id="packman_cli_launch"></a>
Launch</h2>
<p>All command line examples will use the same format: </p><div class="fragment"><div class="line">packman.py &lt;command&gt; &lt;options&gt;</div>
</div><!-- fragment --><p>Please adapt to:</p><ul>
<li>on Windows: <div class="fragment"><div class="line">python packman.py &lt;command&gt; &lt;options&gt;</div>
</div><!-- fragment --></li>
<li>on Linux: <div class="fragment"><div class="line">./packman.py &lt;command&gt; &lt;options&gt;</div>
</div><!-- fragment --></li>
</ul>
<h2><a class="anchor" id="packman_cli_help"></a>
Help</h2>
<ul>
<li>General help: <div class="fragment"><div class="line">packman.py -h</div>
</div><!-- fragment --></li>
</ul>
<p>Example output: </p><div class="fragment"><div class="line">usage: packman.py [-h] [--show_all] [--winforce_permissions]</div>
<div class="line">                  {build,cpapp_convert,db_add,extract,gen_activation,gen_diff,gen_removal,list,merge,post_signingportal,pre_signingportal,sign,sponsor_change_create,sponsor_change_merge,stat,ui,up_build,upwd_build,uvrk_build,validate,zip_apply,zip_create,zip_sign}</div>
<div class="line">                  ...</div>
<div class="line"> </div>
<div class="line">Packman v1.9.3</div>
<div class="line"> </div>
<div class="line">positional arguments:</div>
<div class="line">  {build,cpapp_convert,db_add,extract,gen_activation,gen_diff,gen_removal,list,merge,post_signingportal,pre_signingportal,sign,sponsor_change_create,sponsor_change_merge,stat,ui,up_build,upwd_build,uvrk_build,validate,zip_apply,zip_create,zip_sign}</div>
<div class="line">                        Detailed command usage: &lt;command&gt; -h</div>
<div class="line"> </div>
<div class="line">optional arguments:</div>
<div class="line">  -h, --help            show this help message and exit</div>
<div class="line">  --show_all            do not collapse issues</div>
<div class="line">  --winforce_permissions</div>
<div class="line">                        force usrX exec permissions on windows</div>
<div class="line"> </div>
<div class="line">Examples:</div>
<div class="line">    Build dlfile</div>
<div class="line">        packman.py build -t vos2 -i input_dir -d dl.file.tgz</div>
<div class="line">        packman.py build -t vos3 -i input_dir -d dl.file.tar</div>
<div class="line"> </div>
<div class="line">    Convert CP application</div>
<div class="line">        packman.py cpapp_convert -t vos3 -s dev -z cpapp-123345678.zip -o dl.dlfile.tar</div>
<div class="line">        packman.py cpapp_convert -t vos3 -s dev --cpapp_type appdev -d dl.cpapp_prod.tar -o dl.cpapp_appdev.tar</div>
<div class="line"> </div>
<div class="line">    Add bundles to database</div>
<div class="line">        packman.py db_add -t vos3 -d dl.file.tar</div>
<div class="line"> </div>
<div class="line">    Extract dlfile</div>
<div class="line">        packman.py extract -t vos2 -d dl.file.tgz -o ouputdir</div>
<div class="line">        packman.py extract -t vos3 -d dl.file.tar -o ouputdir</div>
<div class="line"> </div>
<div class="line">    Generate activation dlfile</div>
<div class="line">        packman.py gen_activation -t vos3 -s dev -d dl.file.tar -o dl.file_activate.tar</div>
<div class="line"> </div>
<div class="line">    Generate differential dlfile</div>
<div class="line">        packman.py gen_diff -t vos3 --src dl.source.tar --dst dl.destination.tar -o dl.differential.tar</div>
<div class="line"> </div>
<div class="line">    Generate removal dlfile</div>
<div class="line">        packman.py gen_removal -t vos3 -s dev -d dl.file.tar -o dl.file_remove.tar</div>
<div class="line"> </div>
<div class="line">    List content of &#39;dlfile.tgz</div>
<div class="line">        packman.py list -t vos2 -d dlfile.tgz</div>
<div class="line">        packman.py list -t vos3 -d dl.file.tar</div>
<div class="line"> </div>
<div class="line">    Merge or filter dlfile</div>
<div class="line">        packman.py merge -t vos2 -d dl.file1.tgz dl.file2.tgz -o dl.file_merged.tgz</div>
<div class="line">        packman.py merge -t vos3 -d dl.file1.tar dl.file2.tar -o dl.file_merged.tar</div>
<div class="line"> </div>
<div class="line">    Postprocess dlfile after Signing Portal or Package Manager</div>
<div class="line">        packman.py post_signingportal -t vos2 -d dlfile.tgz -o output.tgz</div>
<div class="line"> </div>
<div class="line">    Preprocess dlfile for Signing Portal or Package Manager</div>
<div class="line">        packman.py pre_signingportal -t vos2 -d dlfile.tgz -o output.tgz</div>
<div class="line"> </div>
<div class="line">    Sign dlfile</div>
<div class="line">        packman.py sign -t vos2 -s dev -d dl.file.tgz -o dl.file_signed.tgz</div>
<div class="line">        packman.py sign -t vos3 -s dev -d dl.file.tar -o dl.file_signed.tar</div>
<div class="line"> </div>
<div class="line">    Create a sponsor change into &#39;dl.dlfile.tar&#39;</div>
<div class="line">        packman.py sponsor_change_create -t vos3 -s dev --current_sponsor 123456 --serial_numbers &quot;123-456-789&quot; -o dl.dlfile.tar</div>
<div class="line"> </div>
<div class="line">    Merge two sponsor change dlfiles into &#39;dl.dlfile.tar&#39;</div>
<div class="line">        packman.py sponsor_change_merge -t vos3 -i dl.signed_current.tar dl.signed_new.tar -o dl.dlfile.tar</div>
<div class="line"> </div>
<div class="line">    Output information on dlfile</div>
<div class="line">        packman.py stat -t vos2 -d dlfile.tgz</div>
<div class="line">        packman.py stat -t vos3 -d dl.file.tar</div>
<div class="line"> </div>
<div class="line">    User interface</div>
<div class="line">        packman.py ui</div>
<div class="line"> </div>
<div class="line">    Unified VRK packaging into &#39;file.uvrk.tar&#39;</div>
<div class="line">        packman.py uvrk_build -t vos3 -i payload_123-456-789.vrk2.json -o file.uvrk.tar</div>
<div class="line"> </div>
<div class="line">    Unified password packaging</div>
<div class="line">        packman.py upwd_build -t vos3 -s dev -e test -i password_changes.json -o file.upwd.tar</div>
<div class="line">        packman.py upwd_build -t vos3 -s dev -e encryption_cert.pem -i password_changes.json -o file.upwd.tar</div>
<div class="line">        packman.py upwd_build -t vaos -s dev -e encryption_cert.pem -i password_changes.json -o file.zip</div>
<div class="line">        packman.py upwd_build -t vaos -s dev -e encryption_cert.pem -i password_changes.json -o file.apk</div>
<div class="line"> </div>
<div class="line">    Unified VRK packaging into &#39;file.uvrk.tar&#39;</div>
<div class="line">        packman.py uvrk_build -t vos3 -i payload_123-456-789.vrk2.json -o file.uvrk.tar</div>
<div class="line"> </div>
<div class="line">    Validate dlfile</div>
<div class="line">        packman.py validate -t vos2 -d dl.file.tgz</div>
<div class="line">        packman.py validate -t vos3 -d dl.file.tar</div>
<div class="line"> </div>
<div class="line">    Apply zip file signed to directory</div>
<div class="line">        packman.py zip_apply -t vos3 -i directory -z files_signed.zip</div>
<div class="line"> </div>
<div class="line">    Create zip file to sign</div>
<div class="line">        packman.py zip_create -t vos3 -i directory -o files_to_sign.zip</div>
<div class="line"> </div>
<div class="line">    Sign content of zip</div>
<div class="line">        packman.py zip_sign -t vos3 -s dev -c EMV -z files.zip -o files_signed.zip</div>
</div><!-- fragment --><dl class="section note"><dt>Note</dt><dd>that options can be combined: '-r -d dlfile.tgz' is equivalent to '-rd dlfile.tgz'</dd></dl>
<ul>
<li>Command help: <div class="fragment"><div class="line">packman.py &lt;command&gt; -h</div>
</div><!-- fragment --></li>
</ul>
<p>Example output: </p><div class="fragment"><div class="line">packman.py list -h </div>
</div><!-- fragment --> <div class="fragment"><div class="line">usage: packman.py list [-h] [--report_type {security,dependency,content}] [-r] -t {vos1,vos2,vos3} (-d DLFILE | -b BUNDLE | -p PACKAGE)</div>
<div class="line"> </div>
<div class="line">list content of archive</div>
<div class="line"> </div>
<div class="line">optional arguments:</div>
<div class="line">  -h, --help            show this help message and exit</div>
<div class="line">  --report_type {security,dependency,content}</div>
<div class="line">                        report type - vos1:{&#39;content&#39;} vos2:{&#39;content&#39;} vos3:{&#39;security&#39;, &#39;dependency&#39;, &#39;content&#39;}</div>
<div class="line">  -r, --recurse         act recursively</div>
<div class="line">  -t {vos1,vos2,vos3}, --platform {vos1,vos2,vos3}</div>
<div class="line">                        target platform</div>
<div class="line">  -d DLFILE, --dlfile DLFILE</div>
<div class="line">                        dlfile path</div>
<div class="line">  -b BUNDLE, --bundle BUNDLE</div>
<div class="line">                        bundle path</div>
<div class="line">  -p PACKAGE, --package PACKAGE</div>
<div class="line">                        package path</div>
</div><!-- fragment --><p>Here a summary of commands:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Command </th><th class="markdownTableHeadLeft">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">build </td><td class="markdownTableBodyLeft">build archive from directories  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">cpapp_convert </td><td class="markdownTableBodyLeft">convert CP application  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">db_add </td><td class="markdownTableBodyLeft">add bundles to database  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">extract </td><td class="markdownTableBodyLeft">extract content of archive  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">gen_activation </td><td class="markdownTableBodyLeft">generate activation dlfile  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">gen_diff </td><td class="markdownTableBodyLeft">generate differential dlfile  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">gen_removal </td><td class="markdownTableBodyLeft">generate removal dlfile  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">keywrap </td><td class="markdownTableBodyLeft">wrap key into archive  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">list </td><td class="markdownTableBodyLeft">list content of archive  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">merge </td><td class="markdownTableBodyLeft">merge several archives into one  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">pre_signingportal </td><td class="markdownTableBodyLeft">modify dlfile for usage with signing portal  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">post_signingportal </td><td class="markdownTableBodyLeft">modify dlfile after signing portal usage  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">sign </td><td class="markdownTableBodyLeft">sign archive content  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">sponsor_change_create </td><td class="markdownTableBodyLeft">create a sponsor change  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">sponsor_change_merge </td><td class="markdownTableBodyLeft">merge two sponsor change  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">stat </td><td class="markdownTableBodyLeft">output information on archive  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ui </td><td class="markdownTableBodyLeft">launch user interface  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">upwd_build </td><td class="markdownTableBodyLeft">build unified packaging password  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">uvrk_build </td><td class="markdownTableBodyLeft">build unified packaging vrk  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">validate </td><td class="markdownTableBodyLeft">retrieve validation report on archive  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">zip_create </td><td class="markdownTableBodyLeft">create zip file with files to sign in directory  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">zip_sign </td><td class="markdownTableBodyLeft">sign file within zip file  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">zip_apply </td><td class="markdownTableBodyLeft">add signatures in zip file back to directory  </td></tr>
</table>
<dl class="section note"><dt>Note</dt><dd>All operations require to provide the target platform (ie '-t vos2')</dd></dl>
<h2><a class="anchor" id="packman_cli_special_flags"></a>
Windows force permissions (vos3 only)</h2>
<p>In order to force executable permission bits when running packman on Windows, a special option flag '&ndash;winforce_permissions' can be used: </p><div class="fragment"><div class="line">packman.py --winforce_permissions build -t vos3 -s dev -i input_dir -fd dlfile.tar </div>
</div><!-- fragment --><p> On Windows, this will build a dlfile archive named 'dlfile.tar' from the content of the directories 'input_dir' for the platform vos3 and if a user package has an executable file, its permissions bits for execution will be set.</p>
<h2><a class="anchor" id="packman_cli_build"></a>
build command</h2>
<p>The 'build' command creates archives (dlfile, bundle, package) from the contents of directories. Please refer to 'build' help for all options.</p>
<h3><a class="anchor" id="vos2"></a>
vos2</h3>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py build -t vos2 -i input_dir input_dir2 -d dlfile.tgz </div>
</div><!-- fragment --><p> This will build a dlfile archive 'dlfile.tgz' from the content of the directories 'input_dir' and 'input_dir2' for the platform vos2. This input directory should normally contain CONTROL directory, bundles, ...</p>
<p>The 'build' command can also act recursively to create archives from the content of a directory. The top directory provided contains bundle directories which in turn contain package directories. Each directory must contain the appropriate CONTROL directory and files. The recursive build will recursively package all of them to produce a dlfile. The recursive build is enabled using the option flag '-r'.</p>
<p>Example usage (recursive): </p><div class="fragment"><div class="line">packman.py build -t vos2 -ri input_dir -d dlfile.tgz </div>
</div><!-- fragment --><p> This will build a dlfile archive named 'dlfile.tgz' from the content of the directory 'input_dir' recursively packaging dlfile/bundle/package directories inside for the platform vos2.</p>
<h3><a class="anchor" id="vos3"></a>
vos3</h3>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py build -t vos3 -i input_dir input_dir2 -d dlfile.tar </div>
</div><!-- fragment --><p> This will build a dlfile archive 'dlfile.tar' from the content of the directories 'input_dir' and 'input_dir2' for the platform vos3. Each input directory should normally contain manifest and package directories coresponding to one bundle.</p>
<p>Here is an example of a bundle input directory structure: </p><div class="image">
<img src="vos3_directory_structure_ex1.png" alt=""/>
</div>
<p>The 'build' command can also act recursively to create archives from the content of a directory. The top directory provided contains bundle directories which in turn contain package directories. Each directory must contain the appropriate manifest file and package directories (with their content). The recursive build will recursively package all of them to produce a dlfile. The recursive build is enabled using the option flag '-r'.</p>
<p>Example usage (recursive): </p><div class="fragment"><div class="line">packman.py build -t vos3 -ri input_dir -d dlfile.tar </div>
</div><!-- fragment --><p> This will build a dlfile archive named 'dlfile.tar' from the content of the directory 'input_dir' recursively packaging dlfile/bundle directories inside for the platform vos3.</p>
<p>This command allows to specify <a class="el" href="packman_users_guide.html#packman_device_modes">Device mode validation (vos3 only)</a></p>
<h2><a class="anchor" id="packman_cli_extract"></a>
extract command</h2>
<p>The 'extract' command extracts recursively the content of archives (dlfile, bundle, package) to directories. The extracted content is layed out such as a recursive build done on this output would recreate the original archive. Please refer to 'extract' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py extract -t vos2 -d dlfile.tgz -o dlfile_dir</div>
</div><!-- fragment --><p> This will extract a dlfile archive named 'dlfile.tgz' recursively to the directory 'dlfile_dir' for the platform vos2.</p>
<h2><a class="anchor" id="packman_cli_db_add"></a>
db_add command (vos3 only)</h2>
<p>The 'db_add' command takes as input a dlfile and registers its content to a local database. This database is located at &lt;user_home&gt;/.packman/db/ The content of the database can be used for generating differentials: see <a class="el" href="packman_users_guide.html#packman_cli_gen_diff">gen_diff command (vos3 only)</a>.</p>
<p>Before being registered, the dlfile is first validated.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py db_add -t vos3 -d dlfile.tar</div>
</div><!-- fragment --><p> This will look register to database all bundles and upfiles in 'dlfile.tar'.</p>
<h2><a class="anchor" id="packman_cli_gen_diff"></a>
gen_diff command (vos3 only)</h2>
<p>The 'gen_diff' command takes as input source and destination bundles and creates a differential dlfile. This command operates either by providing a differential description file or by providing source ans destination dlfiles</p>
<p>When providing source and destination dlfiles, packman will add all bundles and upfiles of all dlfiles to the database (see <a class="el" href="packman_users_guide.html#packman_cli_db_add">db_add command (vos3 only)</a> ) then create a differential description file containing the matching information and run the differential command with it.</p>
<p>Differential process overview:</p><ul>
<li>In all steps, targeting of both source and destination are taken into account</li>
<li>For all upfiles, removal bundles and sponsor changes in destination: add to diff dlfile</li>
<li>In all other cases: perform entry by entry selection between "add", "copy" and "sbspatch" operations : add resulting differential bundle to diff dlfile</li>
</ul>
<p>Example usage (differential description file): </p><div class="fragment"><div class="line">packman.py gen_diff -t vos3 --diff diff_file.json -o dl.diff.tar</div>
</div><!-- fragment --><p> This will look for the bundles listed in diff_file.json (source and destination), check that they are present in database and generate a differential dlfile 'dl.diff.tar' for the platform vos3.</p>
<p>Example usage (source and destination dlfiles): </p><div class="fragment"><div class="line">packman.py gen_diff -t vos3 --src dl.source.tar --dst dl.destination.tar -o dl.diff.tar</div>
</div><!-- fragment --><p> This will add to database all bundles and upfiles in 'dl.source.tar' and 'dl.destination.tar' and then generate a differential dlfile 'dl.diff.tar' for the platform vos3.</p>
<p>Here is shown the structure of a differential description file: </p><div class="fragment"><div class="line">{</div>
<div class="line">    &quot;source&quot;: {</div>
<div class="line">        &quot;bundles&quot;: [</div>
<div class="line">            {</div>
<div class="line">                &quot;digest&quot;: &quot;36e7300a0559831ede5065d1dd10d6802e4ad884d7965d512eabcb6f562430de&quot;,</div>
<div class="line">                &quot;name&quot;: &quot;bundle_a&quot;,</div>
<div class="line">                &quot;version&quot;: &quot;1.0.0&quot;</div>
<div class="line">            }</div>
<div class="line">            ...</div>
<div class="line">        ]</div>
<div class="line">        &quot;upfiles&quot;: [</div>
<div class="line">            {</div>
<div class="line">                &quot;digest&quot;: &quot;6802e4ad884d7965d512eabcb6f562430de36e7300a0559831ede5065d1dd10d&quot;,</div>
<div class="line">                &quot;name&quot;: &quot;mykeya.uvrk.tar&quot;</div>
<div class="line">            },</div>
<div class="line">            ...</div>
<div class="line">        ]</div>
<div class="line">    },</div>
<div class="line">    &quot;destination&quot;: {</div>
<div class="line">        &quot;bundles&quot;: [</div>
<div class="line">            {</div>
<div class="line">                &quot;digest&quot;: &quot;4ad884d7965d512eabcb6f562430de36e7300a0559831ede5065d1dd10d6802e&quot;,</div>
<div class="line">                &quot;name&quot;: &quot;bundle_b&quot;,</div>
<div class="line">                &quot;version&quot;: &quot;1.0.0&quot;</div>
<div class="line">            },</div>
<div class="line">            ...</div>
<div class="line">        ]</div>
<div class="line">        &quot;upfiles&quot;: [</div>
<div class="line">            {</div>
<div class="line">                &quot;digest&quot;: &quot;e36e7300a06802e4ad884d7965d512eabcb6f562430d559831ede5065d1dd10d&quot;,</div>
<div class="line">                &quot;name&quot;: &quot;mykeyb.uvrk.tar&quot;</div>
<div class="line">            },</div>
<div class="line">            ...</div>
<div class="line">        ]</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><p>Note: the differential process on entries ('copy' and 'sbspatch' operations) are allowed on all destination package types (read-only or not) and can refer any file of any source bundle/package as long as this source package is read-only.</p>
<p>This command allows to specify <a class="el" href="packman_users_guide.html#packman_bundle_filters">Bundle filters (vos3 only)</a></p>
<h2><a class="anchor" id="packman_cli_list"></a>
list command</h2>
<p>The 'list' command lists content of archives (dlfile, bundle, package). Please refer to 'list' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py list -t vos2 -rd dlfile.tgz </div>
</div><!-- fragment --><p> This will list recursively (-r) the content of a dlfile archive (-d) named 'dlfile.tgz' for the platform vos2.</p>
<h2><a class="anchor" id="packman_cli_gen_removal"></a>
gen_removal command (vos3 only)</h2>
<p>The 'gen_removal' takes as input a dlfile containing bundles and creates a dlfile containing the corresponding removal bundles. The type of remove bundles can be chosen with '&ndash;remove_type' which takes one of the following values:</p><ul>
<li><b>bundle_version</b> (default): this creates remove bundles for the bundle and its version</li>
<li><b>bundle</b> : this creates remove bundles for the bundle without version specified</li>
<li><b>user</b> : this creates remove bundles for the user (removing all bundles for that user)</li>
</ul>
<p>Please refer to 'gen_removal' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py gen_removal -t vos3 -s dev -d dl.file.tar -o dl.file_remove.tar</div>
</div><!-- fragment --><p> This will look for the bundles in dlfile named 'dlfile.tgz' and create in 'dl.file_remove.tar' removal bundles using the 'bundle_version' type for the platform vos3.</p>
<p>This command allows to specify <a class="el" href="packman_users_guide.html#packman_bundle_filters">Bundle filters (vos3 only)</a></p>
<h2><a class="anchor" id="packman_cli_list"></a>
list command</h2>
<p>The 'list' command lists content of archives (dlfile, bundle, package). Please refer to 'list' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py list -t vos2 -rd dlfile.tgz </div>
</div><!-- fragment --><p> This will list recursively (-r) the content of a dlfile archive (-d) named 'dlfile.tgz' for the platform vos2.</p>
<p>Example: </p><div class="fragment"><div class="line">&gt; ./packman.py list -t vos2 -rd dl.normal.tgz</div>
<div class="line">Dlfile dl.normal.tgz</div>
<div class="line">   Bundle bdl_normal.tgz</div>
<div class="line">      Dir CONTROL/</div>
<div class="line">         File control</div>
<div class="line">         File filelist</div>
<div class="line">      Package pkg_normal.tgz</div>
<div class="line">         Dir CONTROL/</div>
<div class="line">            File control</div>
<div class="line">            File filelist</div>
<div class="line">         File normal</div>
<div class="line">      Signature pkg_normal.tgz.p7s</div>
</div><!-- fragment --><p>Other types of reports are available by using the '&ndash;report_type' option with:</p><ul>
<li><b>content</b> (all platforms, default): lists content and entry types</li>
<li><b>security</b> (vos3 only): list bundles, their signer, user membership and requested capabilities</li>
<li><b>dependency</b> (vos3 only): list bundles, their hardware platform, targeting and dependencies</li>
<li><b>target</b> (vos3 only): lists installed entries with location, type (Dir, File, Symlink), size, linkname, user, group, mode, capabilities, sha1</li>
<li><b>similarity</b> (vos3 only) (experimental): lists equal or similar file contents</li>
</ul>
<h2><a class="anchor" id="packman_cli_merge"></a>
merge command</h2>
<p>The 'merge' command allows to combine several archives of same type (dlfile, bundle, package, uvrk, upwd) to create a single archive of that same type containing the merge of all contents. Merging archives with different types is not allowed except between dlfile and a unified package (uvrk, upwd). Please refer to 'merge' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py merge -t vos2 -d dlfile1.tgz dlfile2.tgz -o dlfile.tgz </div>
</div><!-- fragment --><p> This will create a dlfile archive named 'dlfile.tgz' which contains all content of the 'dlfile1.tgz' and 'dlfile2.tgz' for the platform vos2.</p>
<div class="fragment"><div class="line">packman.py merge -t vos3 -u mykey1.uvrk.tar mykey2.uvrk.tar -o mykeys.uvrk.tar </div>
</div><!-- fragment --><p> This will create a combined uvrk archive with both uvrk archive keys merged.</p>
<div class="fragment"><div class="line">packman.py merge -t vos3 -d dlfile.tar -u mykeys.uvrk.tar mypasswords.upwd.tar -o dl.merged.tar </div>
</div><!-- fragment --><p> This will create a dlfile 'dl.merged.tar' that contains all bundles of 'dlfile.tar', 'mykeys.uvrk.tar' and 'mypasswords.upwd.tar'.</p>
<p>This command allows to specify <a class="el" href="packman_users_guide.html#packman_bundle_filters">Bundle filters (vos3 only)</a> and <a class="el" href="packman_users_guide.html#packman_device_modes">Device mode validation (vos3 only)</a></p>
<h2><a class="anchor" id="packman_cli_sign"></a>
sign command</h2>
<p>The 'sign' command signs content of archives (dlfile, bundle, package). Please refer to 'sign' help for all options.</p>
<p>Example usage 1: </p><div class="fragment"><div class="line">packman.py sign -t vos2 -s dev_usr -d dlfile.tgz -o dlfile_signed.tgz </div>
</div><!-- fragment --><p> This will list recursively sign the content of a dlfile archive (-d) named 'dlfile.tgz' for the platform vos2 and output result in 'dlfile_signed.tgz'.</p>
<p>Example usage 2: </p><div class="fragment"><div class="line">packman.py sign -t vos2 -rs dev_usr -d dlfile.tgz -fo dlfile_signed.tgz </div>
</div><!-- fragment --><p> Same as above except that if a signature already exists, it will resign anyway (-r) and if output file already exists, it will force overwriting (-f).</p>
<h2><a class="anchor" id="packman_cli_validate"></a>
validate command</h2>
<p>The 'validate' command creates a validation report for the content of archives (dlfile, bundle, package). Please refer to 'validate' help for all options.</p>
<p>Example usage (vos2): </p><div class="fragment"><div class="line">packman.py validate -t vos2 -rd dlfile.tgz </div>
</div><!-- fragment --><p> This will recursively scan the archive and display packaging errors if found.</p>
<p>Example usage (vos3): </p><div class="fragment"><div class="line">packman.py validate -t vos3 -rd dlfile.tar </div>
</div><!-- fragment --><p> This will recursively scan the archive and display packaging errors if found.</p>
<p>Example output: </p><div class="fragment"><div class="line">&gt; ./packman.py validate -t vos2 -rd test_resources/dl.pkg_notcompressed.tgz</div>
<div class="line">ERROR (structure) - bdl_pkg_notcompressed.tgz/pkg_pkg_notcompressed.tar : Package is not compressed</div>
<div class="line">errors:1 warnings:0</div>
</div><!-- fragment --><p>This command allows to specify <a class="el" href="packman_users_guide.html#packman_device_modes">Device mode validation (vos3 only)</a></p>
<h2><a class="anchor" id="packman_cli_cpapp_convert"></a>
cpapp_convert command (vos3 only)</h2>
<p>The 'cpapp_convert' command converts a CP application (Commerce Plaform) into an installable dlfile. The input can be a CP application zip file or a dlfile. The type of dlfile output can be chosen using the '&ndash;cpapp_type' option: 'prod' for normal type, 'appdev' for development on appdev devices. Please refer to 'cpapp_convert' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py cpapp_convert -t vos3 -s dev -z mycpapp-887643134.zip -o dl.mycpapp-887643134.tar</div>
</div><!-- fragment --><p> This will extract the CP application zip named 'mycpapp-887643134.zip', generate a CP application dlfile and sign it for development for the platform vos3.</p>
<div class="fragment"><div class="line">packman.py cpapp_convert -t vos3 -s dev --cpapp_type appdev -z mycpapp-887643134.zip -o dl.mycpapp-887643134_appdev.tar</div>
</div><!-- fragment --><p> This will extract the CP application zip named 'mycpapp-887643134.zip', generate a CP application dlfile for appdev device and sign it for development for the platform vos3.</p>
<div class="fragment"><div class="line">packman.py cpapp_convert -t vos3 -s dev --cpapp_type appdev -d dl.mycpapp-887643134.tar -o dl.mycpapp-887643134_appdev.tar</div>
</div><!-- fragment --><p> This will convert the CP application dlfile named dl.mycpapp-887643134.tar to CP application dlfile for appdev device and sign it for development for the platform vos3.</p>
<h2><a class="anchor" id="packman_cli_gen_activation"></a>
gen_activation command (vos3 only)</h2>
<p>The 'gen_activation' command creates usr1 activation installable dlfile which activates features of the system. This can be used typically to generate activation for Commerce Applications. Please refer to 'gen_activation' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py gen_activation -t vos3 -s dev -d dl.mycpapp-887643134.tar dl.mycpapp-887643134_activate.tar</div>
</div><!-- fragment --><p> This will extract the CP application bundle in dl.mycpapp-887643134.tar and generate a corresponding activation dlfile and sign it for development for the platform vos3.</p>
<h2><a class="anchor" id="packman_cli_upwd_build"></a>
upwd_build command (vos3 &amp; vaos only)</h2>
<p>The 'upwd_build' command creates unified packaging for password changes. Please refer to 'upwd_build' help for all options.</p>
<p>Example usage (vos3): </p><div class="fragment"><div class="line">packman.py upwd_build -t vos3 -e encryption_cert.pem -s dev -i password_change.json -o file.upwd.tar </div>
</div><!-- fragment --><p> This will create the file.upwd.tar package containing encrypted and signed password changes instructions. The '-e encryption_cert.pem' indicates which encryption certificate (pem file) to use for encryption and the '-s dev' indicates signing with development key. For testing purposes only, a generic 'test' encryption certificate is bundled with packman and can be specified with option '-e test' (to test both on prod and dev devices). The password changes instructions are passed using the content of a JSON file named 'password_change.json' in this example. The structure of this instruction file is:</p><ul>
<li><b>password_changes</b> (mandatory): array of objects<ul>
<li><b>target</b> (mandatory): array of strings containing target serial numbers expressions</li>
<li><b>name</b> (mandatory): string containing name of the password</li>
<li><b>pass</b> (mandatory): string containing value of the password. Valid passwords are 7 to 12 digits.</li>
<li><b>expired</b> (optional, default to false): boolean indicating if password is expired</li>
<li><b>require_old</b> (optional, default to false): boolean indicating if old password is needed to change password</li>
</ul>
</li>
</ul>
<p>For the target field, the serial number expression must be either:</p><ul>
<li>a fully defined serial number for a single device: like "123-456-789" (1 serial number)</li>
<li>a globing serial number expression using one or more wildcard (*) like "12*-456-78*" (100 serial numbers)</li>
</ul>
<p>Here is an example of such file: </p><div class="fragment"><div class="line">{</div>
<div class="line">  &quot;password_changes&quot;: [</div>
<div class="line">    {</div>
<div class="line">        &quot;target&quot;: [&quot;112-123-123&quot;],</div>
<div class="line">        &quot;name&quot;: &quot;SUPERVISOR&quot;,</div>
<div class="line">        &quot;pass&quot;: &quot;1234567&quot;</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">        &quot;target&quot;: [&quot;112-123-123&quot;],</div>
<div class="line">        &quot;name&quot;: &quot;LEVEL1&quot;,</div>
<div class="line">        &quot;pass&quot;: &quot;1234567&quot;</div>
<div class="line">    },</div>
<div class="line">    {</div>
<div class="line">        &quot;target&quot;: [&quot;112-123-555&quot;,&quot;112-123-44*&quot;],</div>
<div class="line">        &quot;name&quot;: &quot;LEVEL1&quot;,</div>
<div class="line">        &quot;pass&quot;: &quot;00123471321&quot;,</div>
<div class="line">        &quot;expired&quot;: true,</div>
<div class="line">        &quot;require_old&quot;: true</div>
<div class="line">    }</div>
<div class="line">  ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>In such unified packaging, the naming of content and output archive is important and packman will fail on wrong namings.</p>
<p>Note that 'merge' and 'validate' accept these type of unified packages for processing using the '-u' option.</p>
<p><b> Special case of vaos </b></p>
<p>Example usage (vaos): </p><div class="fragment"><div class="line">packman.py upwd_build -t vaos -e encryption_cert.pem -s dev -i password_change.json -o file.zip </div>
</div><!-- fragment --><p> In order to be comply with vaos package signing, the upwd archive mentioned above will be automatically wrapped into a zip archive. The output archive file can be named with:</p><ul>
<li>'.zip' extension: can be directly installed on device</li>
<li>'.apk' extension: can be used to sign online. Once signed, resulting file can be renamed with '.zip' extension for installation. If dev signature is requested (-s dev) this output file will be development signed using 'apksigner' tool. This 'apksigner' tool needs to be installed separately and PATH environment variable set for packman to invoke it. It is available in the Android SDK but can also be installed separately using the Android "Build tools" (choose OS flavor). Some linux distributions allow direct package installation (ie ubuntu: 'sudo apt install apksigner').</li>
</ul>
<h2><a class="anchor" id="packman_cli_uvrk_build"></a>
uvrk_build command (vos3 only)</h2>
<p>The 'uvrk_build' command creates unified packaging for vrk payloads. Please refer to 'uvrk_build' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py uvrk_build -t vos3 -i payload_123-456-789.vrk2.json -o file.uvrk.tar </div>
</div><!-- fragment --><p> This will create the file.uvrk.tar package containing the payload passed as parameter. In such unified packaging, the naming of content and output archive is important and packman will fail on wrong namings.</p>
<p>Note that 'merge' and 'validate' accept these type of unified packages for processing using the '-u' option.</p>
<h2><a class="anchor" id="packman_cli_pre_signingportal"></a>
pre_signingportal command</h2>
<p>The 'pre_signingportal' command preprocesses a dlfile before usage in Signing Portal or Package Manager. This command and the associated 'post_signingportal' work as workarounds for those tools for vos2 platform. It performs the following operations:</p><ol type="1">
<li>remove blacklist directory in dlfile</li>
<li>applies all automatic fixes see <a class="el" href="packman_users_guide.html#packman_automatic_fixes">Automatic fixes</a></li>
</ol>
<p>To restore the optimizations, it is recommended to use 'post_signingportal' on resulting dlfile after Signing Portal and Package Manager usage. Please refer to 'pre_signingportal' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py pre_signingportal -t vos2 -d dlfile.tgz -o output.tgz </div>
</div><!-- fragment --><p> This will preprocess the dlfile 'dlfile.tgz' and write preprocessed dlfile to 'ouput.tgz'.</p>
<h2><a class="anchor" id="packman_cli_post_signingportal"></a>
post_signingportal command</h2>
<p>The 'post_signingportal' command postprocesses a dlfile after usage in Signing Portal or Package Manager. This command and the associated 'pre_signingportal' work as workarounds for those tools for vos2 platform. It performs the following operations:</p><ol type="1">
<li>restore blacklist directory in dlfile Please refer to 'post_signingportal' help for all options.</li>
</ol>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py post_signingportal -t vos2 -d dlfile.tgz -o output.tgz </div>
</div><!-- fragment --><p> This will postprocess the dlfile 'dlfile.tgz' and write postprocessed dlfile to 'ouput.tgz'.</p>
<h2><a class="anchor" id="packman_cli_zip_create"></a>
zip_create command (vos3 only)</h2>
<p>The 'zip_create' command creates a zip file containing all files to be signed recursively in a directory. Please refer to 'zip_create' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py zip_create -t vos3 -i directory -fo zip_to_sign.zip </div>
</div><!-- fragment --><p> This will recursively scan files and archive in directory and create zip file to be signed.</p>
<h2><a class="anchor" id="packman_cli_sponsor_change_create"></a>
sponsor_change_create command (vos3 only)</h2>
<p>The 'sponsor_change_create' command creates a sponsor change dlfile. Please refer to 'sponsor_change_create' help for all options.</p>
<p>Example usage (unlock): </p><div class="fragment"><div class="line">packman.py sponsor_change_create -t vos3 -s dev --current_sponsor 123456 --serial_numbers &quot;123-456-789&quot; -o dl.dlfile.tar </div>
</div><!-- fragment --><p> This will create dl.dlfile.tar that can be used to remove sponsor of device with serial number 123-456-789 and sponsor ID 123456. This dlfile will need to be production signed with matching sponsor signer 123456 that can sign for usr1.</p>
<p>Example usage (change): </p><div class="fragment"><div class="line">packman.py sponsor_change_create -t vos3 -s dev --current_sponsor 123456 --new_sponsor 456789 --serial_numbers &quot;123-456-789&quot; -o dl.dlfile.tar </div>
</div><!-- fragment --><p> This will create dl.dlfile.tar that can be used to change sponsor of device with serial number 123-456-789 and sponsor ID 123456 to sponsor 456789. This dlfile will need to be production signed two times:</p><ol type="1">
<li>signed with matching sponsor signer 123456 that can sign for usr1.</li>
<li>signed with matching sponsor signer 456789 that can sign for usr1. Those two signed outputs need then to be merged back with the merge command see <a class="el" href="packman_users_guide.html#packman_cli_sponsor_change_merge">sponsor_change_merge command (vos3 only)</a></li>
</ol>
<h2><a class="anchor" id="packman_cli_sponsor_change_merge"></a>
sponsor_change_merge command (vos3 only)</h2>
<p>The 'sponsor_change_merge' command merges two signed dlfiles to create a sponsor change dlfile. Please refer to 'sponsor_change_merge' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py sponsor_change_merge -t vos3 -i dl.signed_current.tar dl.signed_new.tar -o dl.dlfile.tar </div>
</div><!-- fragment --><p> This will create dl.dlfile.tar that can be used to change the sponsor of a device. The two dlfiles provided need to be signed by the correct signers for the current and new sponsors. see <a class="el" href="packman_users_guide.html#packman_cli_sponsor_change_create">sponsor_change_create command (vos3 only)</a></p>
<h2><a class="anchor" id="packman_cli_zip_sign"></a>
zip_sign command (vos3 only)</h2>
<p>The 'zip_sign' command signs the files contained in a zip file and create a signed zip file. Zip file used as input is typically the output of the above "zip_create" command. Please refer to 'zip_sign' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py zip_sign -t vos3 -s dev -z zip_to_sign.zip -fo zip_zigned.zip </div>
</div><!-- fragment --><p> This will recursively scan files in zip_to_sign.zip and create zip_zigned.zip containing dev signatures.</p>
<h2><a class="anchor" id="packman_cli_zip_apply"></a>
zip_apply command (vos3 only)</h2>
<p>The 'zip_apply' command will insert all signatures in zip file back to directories or archives. Zip file used as input is typically the output of the above "zip_sign" command or from signing portal. <a class="el" href="class_directory.html">Directory</a> needs to be the exact same as when the "zip_create" command was used. Please refer to 'zip_apply' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py zip_apply -t vos3 -i directory -z zip_zigned.zip </div>
</div><!-- fragment --><p> This will recursively scan files in directories and add signatures from zip_zigned.zip.</p>
<h2><a class="anchor" id="packman_cli_stat"></a>
stat command</h2>
<p>The 'stat' command outputs general information about an archive in a parsable form. Please refer to 'stat' help for all options.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py stat -t vos3 -d dlfile.tar</div>
</div><!-- fragment --><p> This will output information like: </p><div class="fragment"><div class="line">name = dlfile.tar</div>
<div class="line">archive_type = Dlfile</div>
<div class="line">platform = vos3</div>
<div class="line">size = 10240</div>
<div class="line">hash_sha256 = 6b8018510c77b26fa80a651a86db4334d1dbe4f7dcefb843cab304a75644ee7e</div>
<div class="line">bundle_count = 1</div>
<div class="line">sponsor_id = 010245</div>
</div><!-- fragment --><h2><a class="anchor" id="packman_cli_ui"></a>
ui command</h2>
<p>The 'ui' command launches a local webserver and a browser client for user interface.</p>
<p>Example usage: </p><div class="fragment"><div class="line">packman.py ui </div>
</div><!-- fragment --><p>Please refer to <a class="el" href="packman_users_guide.html#packman_ui">User interface</a> for how to use user interface.</p>
<h1><a class="anchor" id="packman_bundle_filters"></a>
Bundle filters (vos3 only)</h1>
<p>Where mentioned, commands like <a class="el" href="packman_users_guide.html#packman_cli_gen_removal">gen_removal command (vos3 only)</a>, <a class="el" href="packman_users_guide.html#packman_cli_merge">merge command</a> and <a class="el" href="packman_users_guide.html#packman_cli_list">list command</a> allow to use bundle filters to include or exclude some bundles from the processing. The following filter options are available:</p><ul>
<li><b>&ndash;include_bundle_name:</b> select which bundle names to be included (*)</li>
<li><b>&ndash;exclude_bundle_name:</b> select which bundle names to be excluded (*)</li>
<li><b>&ndash;include_bundle_user:</b> select which bundle users to be included (*)</li>
<li><b>&ndash;exclude_bundle_user:</b> select which bundle users to be excluded (*)</li>
<li><b>&ndash;include_tgt_devices:</b> select bundle matching target device models to be included</li>
<li><b>&ndash;include_tgt_dt_names:</b> select bundle matching target device tree names to be included</li>
<li><b>&ndash;include_tgt_serial_numbers:</b> select bundle matching serial numbers to be included</li>
<li><b>&ndash;include_arch_type:</b> select type of archives to be included (one or more of 'bundle', 'upfile', 'upwd' and 'uvrk')</li>
<li><b>&ndash;exclude_arch_type:</b> select type of archives to be excluded (one or more of 'bundle', 'upfile', 'upwd' and 'uvrk')</li>
</ul>
<p>(*) accepts wilcard '*' to specify globing for the match.</p>
<p>All filters can be combined and each accept multiple values separated by spaces.</p>
<h1><a class="anchor" id="packman_ui"></a>
User interface</h1>
<h2><a class="anchor" id="packman_ui_start"></a>
Start</h2>
<p>When initially started, the browser window shows the following: </p><div class="image">
<img src="ui_open.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_add_catalog"></a>
Add to catalog</h2>
<p>To add an archive to the catalog, click on "Add", this will open this dialog: </p><div class="image">
<img src="add_to_catalog.jpg" alt=""/>
</div>
<p> Select the archive on your disk, select the type of archive and the platform, then confirm with "Add" button. The newly added archive will appear in the list and can be removed using remove button "X". This operation can be performed several times and the current archive can be selected in the dropdown list.</p>
<h2><a class="anchor" id="packman_ui_dlfile_treeview"></a>
Tree view</h2>
<p>The selected archive from the catalog is shown using a tree view which looks like a file explorer view, you can fold and open directories as well as archives. </p><div class="image">
<img src="dlfile_open.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_contentview"></a>
Content view</h2>
<p>If the currently selected node in the tree has content that packman can display, the content of the file will be shown on the right side of the window. Control files, signatures, images, html, xml, css, etc. can be viewed this way. </p><div class="image">
<img src="content_view.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_find"></a>
Search</h2>
<p>The search entry area allows to look for nodes in the tree that contains the entered text. Note that clicking on the node path will bring you directly to the selected node in the tree. </p><div class="image">
<img src="find.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_validation"></a>
Validation report</h2>
<p>The billboard icon right to the catalog list shows the current number of validation errors, clicking on it will bring up the validation report. </p><div class="image">
<img src="validation_report.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_breadcrumbs"></a>
Bread crumbs</h2>
<p>When selecting a node, the complete path of this node (separated by '/') is displayed. Each of these breadcrumbs are clickable to jump to their location. </p><div class="image">
<img src="bread_crumbs.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_create_project"></a>
Create a project</h2>
<p>In order to edit an archive, select it and click on the 'pen' icon. It will ask for a name for this project archive. This project file must have a name that does not already exist in the catalog. </p><div class="image">
<img src="new_project.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_create_writable"></a>
Writable nodes</h2>
<p>Depending on the signer that is currently selected and the chosen signer users, the nodes of a project archive may be modifiable or not. This is shown with lock icons. </p><div class="image">
<img src="locks.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_select_signer"></a>
Select signer and signer users</h2>
<p>Choosing a signer is done using the signer dropbox. </p><div class="image">
<img src="signers.jpg" alt=""/>
</div>
<p> When a signer has been selected, the icon next to it allows to select the signer users. The users shown are the ones supported by the current signer. Thus for local signer, this is also depending on the currently inserted smartcard. Checking or unchecking users allows to limit the allowed signed users. </p><div class="image">
<img src="signer_users.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_delete_selected"></a>
Delete selected nodes</h2>
<p>Nodes can be selected (checkbox) and removed using 'X' button </p><div class="image">
<img src="delete_selected.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_undo_redo"></a>
Undo / redo</h2>
<p>Operations done to the project can be undone or redone using these buttons. </p><div class="image">
<img src="undo_redo.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_context_menu"></a>
Context menu</h2>
<p>A context menu is available on nodes for renaming, deleting, ... </p><div class="image">
<img src="context_menu.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_edit_text_file"></a>
Edit text file</h2>
<p>In order to edit text files, select the file (file must be writable) and when content is displayed on the right pane, click on 'edit' button. This allows to modify content and save modified content into selected file.</p>
<div class="image">
<img src="edit_text.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_add_files"></a>
Adding files to archive</h2>
<p>In order to add files to the current project, select the "Add from catalog" from the "Add" button. This will bring the catalog list into the right part of the window for selection and will show treeview too. To add files to the current project, drag and drop the file into the project.</p>
<div class="image">
<img src="drag_drop.jpg" alt=""/>
</div>
<p>Another way to add a file is to choose "Add from disk". The will bring up a file chooser dialog box to insert it into the tree.</p>
<div class="image">
<img src="add_from_disk.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_change_permissions"></a>
Change permissions</h2>
<p>Selecting and right-click on node allows to choose "Permissions" that let you choose the permissions to set/unset.</p>
<div class="image">
<img src="permissions.jpg" alt=""/>
</div>
<h2><a class="anchor" id="packman_ui_export"></a>
Exporting</h2>
<p>The exporting operation will use the current signer and create the resulting archive you edited. Some specific exports are also available which correspond to command line operation. Please refer to <a class="el" href="packman_users_guide.html#packman_cli">Command line interface</a> for more information on their usage. </p><div class="image">
<img src="export.jpg" alt=""/>
</div>
<h1><a class="anchor" id="packman_automatic_fixes"></a>
Automatic fixes</h1>
<p>When generating an archive, packman applies automatic fixes on contents that are writable. A content is considered writable when one of the following applies:</p><ul>
<li>content does not involve a signature nor signature of its parent</li>
<li>content involves a signature and selected signer is applicable</li>
<li>special operation where signing is postponed: ie pre_signingportal</li>
</ul>
<p>Here is the list of automatic fixes:</p><ul>
<li>fix depth-first ordering of archives</li>
<li>fix compression on archives</li>
<li>fix naming of extensions for archives, signature, certificate directory, remove '.' directories</li>
<li>fix filelist presence and content</li>
<li>fix blacklist presence and content</li>
<li>fix order of items in archives</li>
<li>fix permissions on windows</li>
<li>remove permissions on non-executable files</li>
<li>fix VHQ manifest presence and content</li>
<li>fix control file fields like ensuring 'Name' usage in bundle and 'Package' in packages</li>
</ul>
<h1><a class="anchor" id="packman_device_modes"></a>
Device mode validation  (vos3 only)</h1>
<p>When validating an archive, packman checks for signature coherency. User can specify four different behaviors explained here:</p><ul>
<li>Specifying "--mode prod", both system and user bundles must be prod signed</li>
<li>Specifying "--mode osdev", both system and user bundles must be osdev signed</li>
<li>Specifying "--mode appdev", system bundles must be appdev signed and user bundles must be osdev signed</li>
<li>Without specifying the mode, one of the below must validate:<ul>
<li>one of the above modes is matching</li>
<li>system bundles must be prod and user bundles may be osdev signed: this however triggers a warning that user prod signing is needed </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Application Development Kit (ADK)</a></li><li class="navelem"><a class="el" href="developing_applications.html">Developing Applications</a></li>
    <li class="footer">Generated on Mon Jun 16 2025 16:04:01 for ADK-Programmers-Guides by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
