<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ADK-Programmers-Guides: msr/export/msr.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="verifone.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="verifonelogo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ADK-Programmers-Guides
   &#160;<span id="projectnumber">5.0.3-CD1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('msr_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">msr.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="msr__common_8h_source.html">msr_common.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for msr.h:</div>
<div class="dyncontent">
<div class="center"><img src="msr_8h__incl.png" border="0" usemap="#msr_2export_2msr_8h" alt=""/></div>
<map name="msr_2export_2msr_8h" id="msr_2export_2msr_8h">
<area shape="rect" title=" " alt="" coords="5,5,139,32"/>
<area shape="rect" href="msr__common_8h.html" title=" " alt="" coords="11,80,133,107"/>
</map>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="msr_8h__dep__incl.png" border="0" usemap="#msr_2export_2msr_8hdep" alt=""/></div>
<map name="msr_2export_2msr_8hdep" id="msr_2export_2msr_8hdep">
<area shape="rect" title=" " alt="" coords="189,5,323,32"/>
<area shape="rect" href="loadplugin_8cpp.html" title=" " alt="" coords="5,80,168,107"/>
<area shape="rect" href="main_8cpp.html" title=" " alt="" coords="192,80,320,107"/>
<area shape="rect" href="sys_8cpp.html" title=" " alt="" coords="344,80,461,107"/>
</map>
</div>
</div>
<p><a href="msr_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a612917ffe22ec9bedebfad13038d28fd"><td class="memItemLeft" align="right" valign="top">typedef void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msr_8h.html#a612917ffe22ec9bedebfad13038d28fd">MSR_Callback</a>) (void *data)</td></tr>
<tr class="separator:a612917ffe22ec9bedebfad13038d28fd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac3c6f568aa57690a8b369936fc362c2a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msr_8h.html#ac3c6f568aa57690a8b369936fc362c2a">MSR_SetOptions</a> (unsigned char *options, unsigned char options_len)</td></tr>
<tr class="separator:ac3c6f568aa57690a8b369936fc362c2a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1e92fd29720fecbf50da24a30c7b512f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate</a> (<a class="el" href="msr_8h.html#a612917ffe22ec9bedebfad13038d28fd">MSR_Callback</a> cbf, void *cb_data)</td></tr>
<tr class="separator:a1e92fd29720fecbf50da24a30c7b512f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac28b2c3771f8221fc26a35f0fd6d0f8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msr_8h.html#aac28b2c3771f8221fc26a35f0fd6d0f8">MSR_Deactivate</a> (void)</td></tr>
<tr class="separator:aac28b2c3771f8221fc26a35f0fd6d0f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8096fa193f035eb4b80673260d720477"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msr_8h.html#a8096fa193f035eb4b80673260d720477">MSR_DataAvailable</a> (void)</td></tr>
<tr class="separator:a8096fa193f035eb4b80673260d720477"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad00fdde838f486d43be689650ab58d43"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData</a> (int timeout_msec, <a class="el" href="msr__common_8h.html#struct_m_s_r___track_data">MSR_TrackData</a> *tracks, <a class="el" href="msr__common_8h.html#struct_m_s_r___decoded_data">MSR_DecodedData</a> *data)</td></tr>
<tr class="separator:ad00fdde838f486d43be689650ab58d43"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bf2f70013c79b94a09b3504607a0667"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msr_8h.html#a1bf2f70013c79b94a09b3504607a0667">MSR_GetData2</a> (int timeout_msec, <a class="el" href="msr__common_8h.html#struct_m_s_r___track_data2">MSR_TrackData2</a> *tracks, <a class="el" href="msr__common_8h.html#struct_m_s_r___decoded_data">MSR_DecodedData</a> *data)</td></tr>
<tr class="separator:a1bf2f70013c79b94a09b3504607a0667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2415e817a7d2a1189897757485ff660"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msr_8h.html#ab2415e817a7d2a1189897757485ff660">MSR_GetData3</a> (int timeout_msec, <a class="el" href="msr__common_8h.html#struct_m_s_r___track_data3">MSR_TrackData3</a> *tracks, <a class="el" href="msr__common_8h.html#struct_m_s_r___decoded_data">MSR_DecodedData</a> *data)</td></tr>
<tr class="separator:ab2415e817a7d2a1189897757485ff660"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7436a0f6d88d3eb717c10025325b47e8"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msr_8h.html#a7436a0f6d88d3eb717c10025325b47e8">MSR_GetData4</a> (int timeout_msec, <a class="el" href="msr__common_8h.html#struct_m_s_r___track_data4">MSR_TrackData4</a> *tracks, <a class="el" href="msr__common_8h.html#struct_m_s_r___decoded_data4">MSR_DecodedData4</a> *data)</td></tr>
<tr class="separator:a7436a0f6d88d3eb717c10025325b47e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a70fedc4ea5687982f39102e2738d8ef5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msr_8h.html#a70fedc4ea5687982f39102e2738d8ef5">MSR_AbortGetData</a> (void)</td></tr>
<tr class="separator:a70fedc4ea5687982f39102e2738d8ef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abca7e8953c8430d80f51c867c7699fa6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="msr_8h.html#abca7e8953c8430d80f51c867c7699fa6">MSR_SwitchLeds</a> (int led1, int led2, int led3, int duration)</td></tr>
<tr class="separator:abca7e8953c8430d80f51c867c7699fa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface definitions for libmsr. This file defines the API for the magnetic card reader library. </p><dl class="section author"><dt>Author</dt><dd>Thomas Buening, GSS</dd></dl>
<p>Interface definitions for libmsr - part which is common for direct linking and client/server. This file defines the API for the magnetic card reader library. </p><dl class="section author"><dt>Author</dt><dd>Dirk Germann, GSS </dd></dl>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a612917ffe22ec9bedebfad13038d28fd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a612917ffe22ec9bedebfad13038d28fd">&#9670;&nbsp;</a></span>MSR_Callback</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef void(* MSR_Callback) (void *data)</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Type of function that is called after magnetic card has been swiped, see <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a>. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">data</td><td>: Data pointer provided by the application. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a70fedc4ea5687982f39102e2738d8ef5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a70fedc4ea5687982f39102e2738d8ef5">&#9670;&nbsp;</a></span>MSR_AbortGetData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void MSR_AbortGetData </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Abort blocking function <a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData()</a>. If <a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData()</a> is waiting for a card swipe, the blocking function can be aborted by invoking this function from another thread. If <a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData()</a> wasn't invoked, this function does nothing. </p>

</div>
</div>
<a id="a1e92fd29720fecbf50da24a30c7b512f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1e92fd29720fecbf50da24a30c7b512f">&#9670;&nbsp;</a></span>MSR_Activate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MSR_Activate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="msr_8h.html#a612917ffe22ec9bedebfad13038d28fd">MSR_Callback</a>&#160;</td>
          <td class="paramname"><em>cbf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>cb_data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Activate magnetic card reader interface. After successful execution of this function every swiped card is read and its data is stored internally. Upon storing card data any previously stored data is erased, so only the data of the last swiped card remains available. To obtain the stored data, call <a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData()</a>. After doing so, the stored data is erased as well, so that card data can only be obtained once. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">cbf</td><td>: Callback function that is called every time a card has been swiped, may be NULL. Within the callback function card data can be obtained by <a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData()</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">cb_data</td><td>: Data pointer that is passed on to the callback function cbf, may be NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga56ff5f02000b1dcc767ffeea8f6478a7">MSR_OK</a> : Successfully activated.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2754c1ade01b6307220538b6bb3f885a">MSR_ERROR</a> : No reader present, device could not be opened, or internal error.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga1c81c696181e8a6201fd677a7b65252a">MSR_ACTIVE</a> : Interface is already activated, nothing done (especially cbf and cb_data are not taken over, these will only be set if function returns <a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga56ff5f02000b1dcc767ffeea8f6478a7">MSR_OK</a>). </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a8096fa193f035eb4b80673260d720477"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8096fa193f035eb4b80673260d720477">&#9670;&nbsp;</a></span>MSR_DataAvailable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MSR_DataAvailable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Check if magnetic card has been swiped and its data is stored. After obtaining the stored data with <a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData()</a> or deactivating the card reader interface with <a class="el" href="msr_8h.html#aac28b2c3771f8221fc26a35f0fd6d0f8">MSR_Deactivate()</a> the stored data is erased and not available any longer. </p><dl class="section return"><dt>Returns</dt><dd><ul>
<li>1 : Data available.</li>
<li>0 : No data available.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2754c1ade01b6307220538b6bb3f885a">MSR_ERROR</a> : Magnetic card reader interface not activated.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2af4877ec63b78f5c2a85d77813bc056">MSR_PROCESS</a> : MSR_ONE_SWIPE was set and card data has already been obtained by <a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData()</a>. Reactivation needed before next card swipe. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="aac28b2c3771f8221fc26a35f0fd6d0f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aac28b2c3771f8221fc26a35f0fd6d0f8">&#9670;&nbsp;</a></span>MSR_Deactivate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MSR_Deactivate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deactivate magnetic card reader interface. After deactivating the card reader interface no more swiped cards are read and no data is stored. Any previously stored card data will be erased. </p><dl class="section note"><dt>Note</dt><dd>Calling this function is mandatory at the end of each transaction. Otherwise the internal thread is not correctly ended and resource leaks are remain. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga56ff5f02000b1dcc767ffeea8f6478a7">MSR_OK</a> : Successfully deactivated or not activated before.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2754c1ade01b6307220538b6bb3f885a">MSR_ERROR</a> : Internal error. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ad00fdde838f486d43be689650ab58d43"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad00fdde838f486d43be689650ab58d43">&#9670;&nbsp;</a></span>MSR_GetData()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MSR_GetData </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout_msec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msr__common_8h.html#struct_m_s_r___track_data">MSR_TrackData</a> *&#160;</td>
          <td class="paramname"><em>tracks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msr__common_8h.html#struct_m_s_r___decoded_data">MSR_DecodedData</a> *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Obtain magnetic card data. With this function the internally stored card data can be obtained. In doing so, the internally stored data is erased, so that data of each card swipe can only be obtained once. If no card data is stored at the moment, the function waits for a specified time for a card swipe. If a timeout is supplied, the function is blocking and can be aborted by <a class="el" href="msr_8h.html#a70fedc4ea5687982f39102e2738d8ef5">MSR_AbortGetData()</a>. If a callback function is supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a>, setting a timeout != 0 is not allowed. <a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData()</a> can be called from within a callback function supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a> but there's no need to do so. <br  />
 Remark: In case the terminal has two magnetic heads the data from the first head is populated. If there is no data from first head the data from the second head is returned. If you need data from both heads you shall use <a class="el" href="msr_8h.html#a7436a0f6d88d3eb717c10025325b47e8">MSR_GetData4()</a>. </p><dl class="section note"><dt>Note</dt><dd>To clear the internal resources a succeeding call to <a class="el" href="msr_8h.html#aac28b2c3771f8221fc26a35f0fd6d0f8">MSR_Deactivate()</a> is mandatory. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_msec</td><td>: Time (in milliseconds, &lt; 0 : infinite) to wait for a card swipe if no card data has been stored previously. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tracks</td><td>: Track data, may be NULL. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>: Decoded track data, may be NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga56ff5f02000b1dcc767ffeea8f6478a7">MSR_OK</a> : Magnetic card data is available or became available within the supplied timeout period.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2754c1ade01b6307220538b6bb3f885a">MSR_ERROR</a> : Magnetic card reader interface not activated or internal error.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga7748ace924420e05ea909b2944de3ba5">MSR_TIMEOUT</a> : No magnetic card data available within the specified timeout.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga82fd0492568ada8925a66121a6f03935">MSR_ABORTED</a> : Aborted by <a class="el" href="msr_8h.html#a70fedc4ea5687982f39102e2738d8ef5">MSR_AbortGetData()</a>.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#gade0e4ea4922a01a559e73f5c3d0e4f03">MSR_PARAM</a> : Callback function supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a> and timeout != 0.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2af4877ec63b78f5c2a85d77813bc056">MSR_PROCESS</a> : MSR_ONE_SWIPE was set and card data has already been obtained. Reactivation needed before next card swipe. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a1bf2f70013c79b94a09b3504607a0667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1bf2f70013c79b94a09b3504607a0667">&#9670;&nbsp;</a></span>MSR_GetData2()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MSR_GetData2 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout_msec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msr__common_8h.html#struct_m_s_r___track_data2">MSR_TrackData2</a> *&#160;</td>
          <td class="paramname"><em>tracks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msr__common_8h.html#struct_m_s_r___decoded_data">MSR_DecodedData</a> *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Obtain magnetic card data including card type. This is the same as <a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData()</a> but additionally offers <a class="el" href="group___m_s_r___c_a_r_d___c_o_d_e_s.html">Card Type Code</a>. With this function the internally stored card data can be obtained. In doing so, the internally stored data is erased, so that data of each card swipe can only be obtained once. If no card data is stored at the moment, the function waits for a specified time for a card swipe. If a timeout is supplied, the function is blocking and can be aborted by <a class="el" href="msr_8h.html#a70fedc4ea5687982f39102e2738d8ef5">MSR_AbortGetData()</a>. If a callback function is supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a>, setting a timeout != 0 is not allowed. <a class="el" href="msr_8h.html#a1bf2f70013c79b94a09b3504607a0667">MSR_GetData2()</a> can be called from within a callback function supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a> but there's no need to do so. </p><dl class="section note"><dt>Note</dt><dd>To clear the internal resources a succeeding call to <a class="el" href="msr_8h.html#aac28b2c3771f8221fc26a35f0fd6d0f8">MSR_Deactivate()</a> is mandatory. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_msec</td><td>: Time (in milliseconds, &lt; 0 : infinite) to wait for a card swipe if no card data has been stored previously. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tracks</td><td>: Track data, may be NULL. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>: Decoded track data, may be NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga56ff5f02000b1dcc767ffeea8f6478a7">MSR_OK</a> : Magnetic card data is available of became available within the supplied timeout period.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2754c1ade01b6307220538b6bb3f885a">MSR_ERROR</a> : Magnetic card reader interface not activated or internal error.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga7748ace924420e05ea909b2944de3ba5">MSR_TIMEOUT</a> : No magnetic card data available within the specified timeout.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga82fd0492568ada8925a66121a6f03935">MSR_ABORTED</a> : Aborted by <a class="el" href="msr_8h.html#a70fedc4ea5687982f39102e2738d8ef5">MSR_AbortGetData()</a>.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#gade0e4ea4922a01a559e73f5c3d0e4f03">MSR_PARAM</a> : Callback function supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a> and timeout != 0.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2af4877ec63b78f5c2a85d77813bc056">MSR_PROCESS</a> : MSR_ONE_SWIPE was set and card data has already been obtained. Reactivation needed before next card swipe. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ab2415e817a7d2a1189897757485ff660"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2415e817a7d2a1189897757485ff660">&#9670;&nbsp;</a></span>MSR_GetData3()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MSR_GetData3 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout_msec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msr__common_8h.html#struct_m_s_r___track_data3">MSR_TrackData3</a> *&#160;</td>
          <td class="paramname"><em>tracks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msr__common_8h.html#struct_m_s_r___decoded_data">MSR_DecodedData</a> *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Obtain magnetic card data including additional information. This is the same as <a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData()</a> but additionally offers <a class="el" href="group___m_s_r___c_a_r_d___c_o_d_e_s.html">Card Type Code</a> and <a class="el" href="group___m_s_r___t_r_a_c_k___t_y_p_e_s.html">Track Type Code</a>. With this function the internally stored card data can be obtained. In doing so, the internally stored data is erased, so that data of each card swipe can only be obtained once. If no card data is stored at the moment, the function waits for a specified time for a card swipe. If a timeout is supplied, the function is blocking and can be aborted by <a class="el" href="msr_8h.html#a70fedc4ea5687982f39102e2738d8ef5">MSR_AbortGetData()</a>. If a callback function is supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a>, setting a timeout != 0 is not allowed. <a class="el" href="msr_8h.html#ab2415e817a7d2a1189897757485ff660">MSR_GetData3()</a> can be called from within a callback function supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a> but there's no need to do so. </p><dl class="section note"><dt>Note</dt><dd>To clear the internal resources a succeeding call to <a class="el" href="msr_8h.html#aac28b2c3771f8221fc26a35f0fd6d0f8">MSR_Deactivate()</a> is mandatory. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_msec</td><td>: Time (in milliseconds, &lt; 0 : infinite) to wait for a card swipe if no card data has been stored previously. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tracks</td><td>: Track data, may be NULL. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>: Decoded track data, may be NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga56ff5f02000b1dcc767ffeea8f6478a7">MSR_OK</a> : Magnetic card data is available of became available within the supplied timeout period.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2754c1ade01b6307220538b6bb3f885a">MSR_ERROR</a> : Magnetic card reader interface not activated or internal error.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga7748ace924420e05ea909b2944de3ba5">MSR_TIMEOUT</a> : No magnetic card data available within the specified timeout.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga82fd0492568ada8925a66121a6f03935">MSR_ABORTED</a> : Aborted by <a class="el" href="msr_8h.html#a70fedc4ea5687982f39102e2738d8ef5">MSR_AbortGetData()</a>.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#gade0e4ea4922a01a559e73f5c3d0e4f03">MSR_PARAM</a> : Callback function supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a> and timeout != 0.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2af4877ec63b78f5c2a85d77813bc056">MSR_PROCESS</a> : MSR_ONE_SWIPE was set and card data has already been obtained. Reactivation needed before next card swipe. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="a7436a0f6d88d3eb717c10025325b47e8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7436a0f6d88d3eb717c10025325b47e8">&#9670;&nbsp;</a></span>MSR_GetData4()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MSR_GetData4 </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeout_msec</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msr__common_8h.html#struct_m_s_r___track_data4">MSR_TrackData4</a> *&#160;</td>
          <td class="paramname"><em>tracks</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="msr__common_8h.html#struct_m_s_r___decoded_data4">MSR_DecodedData4</a> *&#160;</td>
          <td class="paramname"><em>data</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Obtain magnetic card data including additional information. This is the same as <a class="el" href="msr_8h.html#ad00fdde838f486d43be689650ab58d43">MSR_GetData()</a> but additionally offers <a class="el" href="group___m_s_r___c_a_r_d___c_o_d_e_s.html">Card Type Code</a>, <a class="el" href="group___m_s_r___t_r_a_c_k___t_y_p_e_s.html">Track Type Code</a> and second magstripe data (if present). With this function the internally stored card data can be obtained. In doing so, the internally stored data is erased, so that data of each card swipe can only be obtained once. If no card data is stored at the moment, the function waits for a specified time for a card swipe. If a timeout is supplied, the function is blocking and can be aborted by <a class="el" href="msr_8h.html#a70fedc4ea5687982f39102e2738d8ef5">MSR_AbortGetData()</a>. If a callback function is supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a>, setting a timeout != 0 is not allowed. <a class="el" href="msr_8h.html#a7436a0f6d88d3eb717c10025325b47e8">MSR_GetData4()</a> can be called from within a callback function supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a> but there's no need to do so. </p><dl class="section note"><dt>Note</dt><dd>To clear the internal resources a succeeding call to <a class="el" href="msr_8h.html#aac28b2c3771f8221fc26a35f0fd6d0f8">MSR_Deactivate()</a> is mandatory. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">timeout_msec</td><td>: Time (in milliseconds, &lt; 0 : infinite) to wait for a card swipe if no card data has been stored previously. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">tracks</td><td>: Track data, may be NULL. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">data</td><td>: Decoded track data, may be NULL. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga56ff5f02000b1dcc767ffeea8f6478a7">MSR_OK</a> : Magnetic card data is available of became available within the supplied timeout period.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2754c1ade01b6307220538b6bb3f885a">MSR_ERROR</a> : Magnetic card reader interface not activated or internal error.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga7748ace924420e05ea909b2944de3ba5">MSR_TIMEOUT</a> : No magnetic card data available within the specified timeout.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga82fd0492568ada8925a66121a6f03935">MSR_ABORTED</a> : Aborted by <a class="el" href="msr_8h.html#a70fedc4ea5687982f39102e2738d8ef5">MSR_AbortGetData()</a>.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#gade0e4ea4922a01a559e73f5c3d0e4f03">MSR_PARAM</a> : Callback function supplied to <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a> and timeout != 0.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2af4877ec63b78f5c2a85d77813bc056">MSR_PROCESS</a> : MSR_ONE_SWIPE was set and card data has already been obtained. Reactivation needed before next card swipe. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="ac3c6f568aa57690a8b369936fc362c2a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac3c6f568aa57690a8b369936fc362c2a">&#9670;&nbsp;</a></span>MSR_SetOptions()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MSR_SetOptions </td>
          <td>(</td>
          <td class="paramtype">unsigned char *&#160;</td>
          <td class="paramname"><em>options</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned char&#160;</td>
          <td class="paramname"><em>options_len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>This function has to be called while MSR is <em>deactivated</em>. <a class="el" href="msr_8h.html#a1e92fd29720fecbf50da24a30c7b512f">MSR_Activate()</a> / <a class="el" href="msr_8h.html#aac28b2c3771f8221fc26a35f0fd6d0f8">MSR_Deactivate()</a> do not discard the options previously set, so setting the options once at terminal start is sufficient. <br  />
 Note: Options not overwritten by options_len remain unchanged. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">options</td><td>: data pointer, [0]-[2] <a class="el" href="group___m_s_r___o_p_t_i_o_n_s___b_i_t_m_a_s_k.html">Options bitmask</a>, [3] sensitivity (for Samsung MST usage, values 0-100) </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">options_len</td><td>: length of options </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga56ff5f02000b1dcc767ffeea8f6478a7">MSR_OK</a> : No error</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#gade0e4ea4922a01a559e73f5c3d0e4f03">MSR_PARAM</a> : options == NULL or options_len == 0</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2754c1ade01b6307220538b6bb3f885a">MSR_ERROR</a> : MSR is activated, call <a class="el" href="msr_8h.html#aac28b2c3771f8221fc26a35f0fd6d0f8">MSR_Deactivate()</a> first. </li>
</ul>
</dd></dl>

</div>
</div>
<a id="abca7e8953c8430d80f51c867c7699fa6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abca7e8953c8430d80f51c867c7699fa6">&#9670;&nbsp;</a></span>MSR_SwitchLeds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int MSR_SwitchLeds </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>led1</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>led2</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>led3</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>duration</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set state of MSR LEDs. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">led1</td><td>: state of LED 1 (top), see <a class="el" href="group___l_e_d___s_t_a_t_e_s.html">LED states</a>. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">led2</td><td>: state of LED 2 (mid), see <a class="el" href="group___l_e_d___s_t_a_t_e_s.html">LED states</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">led3</td><td>: state of LED 3 (bottom), see <a class="el" href="group___l_e_d___s_t_a_t_e_s.html">LED states</a> </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">duration</td><td>: if &gt; 0: all LEDs are switched off after this time (in seconds). </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd><ul>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga56ff5f02000b1dcc767ffeea8f6478a7">MSR_OK</a> : Successfully set LED state.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#gade0e4ea4922a01a559e73f5c3d0e4f03">MSR_PARAM</a> : Invalid parameter.</li>
<li><a class="el" href="group___m_s_r___e_r_r_o_r___c_o_d_e_s.html#ga2754c1ade01b6307220538b6bb3f885a">MSR_ERROR</a> : Internal error. </li>
</ul>
</dd></dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_b259c67979486db4cd1816234700c14a.html">msr</a></li><li class="navelem"><a class="el" href="dir_699851f087f6e6136e28f04fc8a16e7d.html">export</a></li><li class="navelem"><a class="el" href="msr_8h.html">msr.h</a></li>
    <li class="footer">Generated on Mon Jun 16 2025 16:03:57 for ADK-Programmers-Guides by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
