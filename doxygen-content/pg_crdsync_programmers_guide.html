<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ADK-Programmers-Guides: ADK-CRD-SYNC Programmers Guide</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="verifone.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="verifonelogo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ADK-Programmers-Guides
   &#160;<span id="projectnumber">5.0.3-CD1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('pg_crdsync_programmers_guide.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">ADK-CRD-SYNC Programmers Guide </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec_crd_sync_Preface"></a>
Preface</h1>
<p>The CRD-SYNC library is an optional component supporting reading and writing of synchronous contact chip cards. <br  />
</p>
<h1><a class="anchor" id="sec_crd_sync_Introduction"></a>
Introduction</h1>
<p>The operating system of VOS and VOS2 terminals supports handling of synchronous contact chip cards by means of L1 libraries. Based on this the so called "Card Reader Synchronous" was built. This shared library is wrapped by ADK-CRD-SYNC.</p>
<h1><a class="anchor" id="sec_crd_sync_Getting_Started"></a>
Getting Started</h1>
<ul>
<li>Analyze which preconditions are required: <a class="el" href="pg_crdsync_programmers_guide.html#sec_crd_sync_System_Setup">System Setup and Requirements</a> </li>
<li>Acquire synchronous contact test cards. </li>
<li>Study the sample code: <a class="el" href="pg_crdsync_programmers_guide.html#sub_sec_crd_sync_Sample">Sample Code</a></li>
</ul>
<h1><a class="anchor" id="sec_crd_sync_Programming"></a>
Programming</h1>
<h2><a class="anchor" id="sub_sec_crd_sync_API"></a>
API Functions</h2>
<ul>
<li><a class="el" href="crdsync__client_8h.html#aad6e42b9b4a77a320b963da0d9ebd455">crdSync_Version(char *version, unsigned char len)</a></li>
<li><a class="el" href="crdsync__client_8h.html#a3d9902893c6348c09d6d70f20b0a13b2">crdSync_SetTraceCallback(CRDSYNC_TraceCallback cbf, void *cb_data)</a></li>
<li><a class="el" href="crdsync_8h.html#af2e8b408142c3fdf772936352aaec87a" title="Open the synchronous card driver  .">crdSync_Open(unsigned Options)</a></li>
<li><a class="el" href="crdsync_8h.html#a6f7218a5eddce4c7a642d1c020192934" title="Close the synchronous card driver  .">crdSync_Close(unsigned Options)</a></li>
<li><a class="el" href="crdsync_8h.html#a0337406ca951ed912c718448567f0c86" title="Check if a card is inserted in the full-sized card reader.  .">crdSync_IsCardPresent(void)</a></li>
<li><a class="el" href="crdsync_8h.html#a54f538cdfe50976653de0ed7550a716b" title="Power up the synchronous card  .">crdSync_PowerUp(int CardType, unsigned char AtrBuf[], unsigned char *AtrLen)</a></li>
<li><a class="el" href="crdsync_8h.html#aa210b9d21f89580090da29bf7b9de69d" title="Power down the synchronous card  .">crdSync_PowerDown(void)</a></li>
<li><a class="el" href="crdsync_8h.html#afbd3dd4039b9bf6429ed7ea88d90826d" title="Read data from the synchronous card  .">crdSync_ReadData(int MemoryAddress, unsigned char RxBuf[], unsigned short RxLen)</a></li>
<li><a class="el" href="crdsync_8h.html#a74d8a2a3fedd23009bdbb24d34883b86" title="Write data to the synchronous card  .">crdSync_WriteData(int MemoryAddress, const unsigned char TxBuf[], unsigned short TxLen)</a></li>
<li><em> SLE cards: </em><ul>
<li><a class="el" href="crdsync_8h.html#a0956e82cc1a12c4f1b9f27b6dd2d576c" title="Present Secret code to the synchronous card  .">crdSync_PresentSecretCode(const unsigned char PinCode[], unsigned short nSize)</a></li>
<li><a class="el" href="crdsync_8h.html#ad3eccb6485c7583082120d95981a6a38" title="Read Security Memory from synchronous card  .">crdSync_ReadSecurityMem(unsigned char RxBuff[], unsigned char * BufLen)</a></li>
<li><a class="el" href="crdsync_8h.html#aa41d492f0275f153748ef692748b1f8c" title="Update PIN Code (PSC) in synchronous card  .">crdSync_WriteSecurityMem(const unsigned char TxBuf[], unsigned short TxLen)</a></li>
<li><em> SLE4442: </em><ul>
<li><a class="el" href="crdsync_8h.html#a89f8fa5cd76e3b6c9a86f57281339f32" title="SLE4442: Read Protection Memory from synchronous card  .">crdSync_ReadProtectionMem(unsigned char RxBuf[])</a></li>
<li><a class="el" href="crdsync_8h.html#a3e651310d7f0502e94062bffdadf102e" title="SLE4442: Write Protection Memory  .">crdSync_WriteProtectionMem(unsigned short MemoryAddress, const unsigned char TxBuf[], unsigned short TxLen)</a></li>
</ul>
</li>
<li><em> SLE4428: </em><ul>
<li><a class="el" href="crdsync_8h.html#aa7f47bb821fe3ca17f13e5db732f8aed" title="SLE4428: Read data with protection bit  .">crdSync_ReadWithProtectionBit(int MemoryAddress, unsigned char RxBuf[], unsigned short RxLen)</a></li>
<li><a class="el" href="crdsync_8h.html#a5d10ad831fab9466b20dd3ae4dccaa0e" title="SLE4428: Write data with protection bit  .">crdSync_WriteWithProtectionBit(int MemoryAddress, unsigned char TxBuf[], unsigned short TxLen)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="sub_sec_crd_sync_Sample"></a>
Sample Code</h2>
<p><a class="el" href="crdsync-demo_8cpp-example.html">C++ example source code</a></p>
<h1><a class="anchor" id="sec_crd_sync_System_Setup"></a>
System Setup and Requirements</h1>
<ul>
<li>No support for Verix platform.</li>
<li><b> Build Your Application </b><ul>
<li>use delivery package <b>crdsync-vos(2)-dev-x.x.x-x.zip</b></li>
<li>include header <em><a class="el" href="crdsync_8h.html">crdsync.h</a></em></li>
<li>link against <em>libcrdsync.so</em></li>
</ul>
</li>
<li><b> Terminal loading </b><ul>
<li>"Synchronous Card API Library" must be loaded to the terminal: <br  />
 <b> dl.vertexreadersync-x.x.x-xxx.tar</b>, <br  />
 see <a href="https://artifactory.verifone.com/artifactory/RMS_Release_CLW/ADK/CR-SYNC">https://artifactory.verifone.com/artifactory/RMS_Release_CLW/ADK/CR-SYNC</a></li>
<li>Load ADK-CRD-SYNC component to terminal: <br  />
 <b> dl.libcrdsync-x.x.x-xxx.tar</b>, <br  />
 see <a href="https://artifactory.verifone.com/artifactory/RMS_Release_CLW/ADK/CRD-SYNC">https://artifactory.verifone.com/artifactory/RMS_Release_CLW/ADK/CRD-SYNC</a></li>
</ul>
</li>
<li>For client/server see <a class="el" href="pg_crdsync_programmers_guide.html#subsec_crd_sync_Client_Server">Client/Server usage</a></li>
</ul>
<h1><a class="anchor" id="sec_crd_sync_Troubleshooting"></a>
Troubleshooting</h1>
<ul>
<li><b> Synchronous Card API Library </b> <br  />
 Check presence of needed component <em>dl.vertexreadersync-x.x.x-xxx.tar</em>. </li>
<li><b> Trace </b> <br  />
 Activate the trace with help of <a class="el" href="crdsync_8h.html#a3d9902893c6348c09d6d70f20b0a13b2">crdSync_SetTraceCallback()</a>. <br  />
 Provide the resulting output to ADK team for analysis.</li>
</ul>
<h1><a class="anchor" id="sec_crd_sync_Appendix"></a>
Appendix</h1>
<h2><a class="anchor" id="subsec_crd_sync_Client_Server"></a>
Client/Server usage</h2>
<p>ADK-CRD-SYNC delivery includes client/server components. <br  />
 These may be needed under special project requirements, e.g. the so called "two-piece-solution". <br  />
 In client/server architecture the application process links to <b>libcrdsyncclient</b>. <br  />
 A separate process (<b>crdsyncserver</b>) links the libcrdsync. <br  />
 Each command request and response is serialized and transferred via IPC between application and server process.</p>
<h3><a class="anchor" id="subsubsec_crd_sync_Client_Server_API"></a>
Client API</h3>
<p>The API is very similar to <a class="el" href="pg_crdsync_programmers_guide.html#sub_sec_crd_sync_API">API Functions</a>. <br  />
 All functions have the same names and parameters. But they have one additional parameter "server index" to identify which server to use. <br  />
 There is one additional function to set and connect the servers: <br  />
 <a class="el" href="crdsync__client_8h.html#ab2e78bd9c5c6b74f19cea21b58cc46ff">crdSync_ConfigureServer()</a></p>
<ul>
<li><a class="el" href="crdsync__client_8h.html#aad6e42b9b4a77a320b963da0d9ebd455">crdSync_Version(char *version, unsigned char len)</a></li>
<li><a class="el" href="crdsync__client_8h.html#a3d9902893c6348c09d6d70f20b0a13b2">crdSync_SetTraceCallback(CRDSYNC_TraceCallback cbf, void *cb_data)</a></li>
<li><a class="el" href="crdsync__client_8h.html#ae4db0dd5e9a3959cb1c275398d12a5ab" title="Open the synchronous card driver  .">crdSync_Open(unsigned char server_idx, unsigned Options)</a></li>
<li><a class="el" href="crdsync__client_8h.html#ab0c482a0301b187a94c57efcb14cadbc" title="Close the synchronous card driver  .">crdSync_Close(unsigned char server_idx, unsigned Options)</a></li>
<li><a class="el" href="crdsync__client_8h.html#a6c35c135ee3df66ce32f0046b68ff136" title="Check if a card is inserted in the full-sized card reader.  .">crdSync_IsCardPresent(unsigned char server_idx)</a></li>
<li><a class="el" href="crdsync__client_8h.html#a7ab38bf1f5e50e8abfcd793fbd0afaca" title="Power up the synchronous card  .">crdSync_PowerUp(unsigned char server_idx, int CardType, unsigned char AtrBuf[], unsigned char *AtrLen)</a></li>
<li><a class="el" href="crdsync__client_8h.html#ac07f135ba2e36dd12e6b119c6595173f" title="Power down the synchronous card  .">crdSync_PowerDown(unsigned char server_idx)</a></li>
<li><a class="el" href="crdsync__client_8h.html#a46ece5ab7da04e01c3e816dfbad788b9" title="Read data from the synchronous card  .">crdSync_ReadData(unsigned char server_idx, int MemoryAddress, unsigned char RxBuf[], unsigned short RxLen)</a></li>
<li><a class="el" href="crdsync__client_8h.html#ac37939611b8253d24be1eda8ec7ae0a9" title="Write data to the synchronous card  .">crdSync_WriteData(unsigned char server_idx, int MemoryAddress, const unsigned char TxBuf[], unsigned short TxLen)</a></li>
<li><em> SLE cards: </em><ul>
<li><a class="el" href="crdsync__client_8h.html#aac1af40e85e5849800866c522caed887" title="Present Secret code to the synchronous card  .">crdSync_PresentSecretCode(unsigned char server_idx, const unsigned char PinCode[], unsigned short nSize)</a></li>
<li><a class="el" href="crdsync__client_8h.html#af865ea38609963f14c129e150586ce0e" title="Read Security Memory from synchronous card  .">crdSync_ReadSecurityMem(unsigned char server_idx, unsigned char RxBuff[], unsigned char * BufLen)</a></li>
<li><a class="el" href="crdsync__client_8h.html#a5f567f6f82f15f84a73e08a589da5a55" title="Update PIN Code (PSC) in synchronous card  .">crdSync_WriteSecurityMem(unsigned char server_idx, const unsigned char TxBuf[], unsigned short TxLen)</a></li>
<li><em> SLE4442: </em><ul>
<li><a class="el" href="crdsync__client_8h.html#afce4d1364cf78742a866311f793fd433" title="SLE4442: Read Protection Memory  .">crdSync_ReadProtectionMem(unsigned char server_idx, unsigned char RxBuf[])</a></li>
<li><a class="el" href="crdsync__client_8h.html#a4d53646e79d8f7e0cd5ff8076328ebc7" title="SLE4442: Write Protection Memory  .">crdSync_WriteProtectionMem(unsigned char server_idx, unsigned short MemoryAddress, const unsigned char TxBuf[], unsigned short TxLen)</a></li>
</ul>
</li>
<li><em> SLE4428: </em><ul>
<li><a class="el" href="crdsync__client_8h.html#afcab5a3b6a0f4e7fa248da2652653d8f" title="SLE4428: Read data with protection bit  .">crdSync_ReadWithProtectionBit(unsigned char server_idx, int MemoryAddress, unsigned char RxBuf[], unsigned short RxLen)</a></li>
<li><a class="el" href="crdsync__client_8h.html#a55cf46f272ccde8eb8c2d1f4d37e490a" title="SLE4428: Write data with protection bit  .">crdSync_WriteWithProtectionBit(unsigned char server_idx, int MemoryAddress, unsigned char TxBuf[], unsigned short TxLen)</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="subsubsec_crd_sync_Client_Server_Delivery"></a>
Client/Server Delivery Packages</h3>
<p>To use client/server it's necessary to</p><ul>
<li>build your application<ul>
<li>include header <em><a class="el" href="crdsync__client_8h.html">crdsync_client.h</a></em></li>
<li>link against <em>libcrdsyncclient.so</em></li>
<li>these components are part of delivery package <em>crdsync-vos(2)-dev-x.x.x-x.zip</em></li>
</ul>
</li>
<li>load client and server to terminal:<ul>
<li><em>dl.libcrdsyncclient-x.x.x-x.tar</em></li>
<li><em>dl.crdsyncserver-x.x.x-x.tar</em></li>
<li>these components are part of delivery package <em>crdsync-vos(2)-load-x.x.x-x.zip</em> </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Application Development Kit (ADK)</a></li><li class="navelem"><a class="el" href="system_overview.html">System Overview</a></li><li class="navelem"><a class="el" href="pg_all_components.html">ADK Components</a></li>
    <li class="footer">Generated on Mon Jun 16 2025 16:04:01 for ADK-Programmers-Guides by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
