<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>ADK-Programmers-Guides: Supervisor Password Reset</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="verifone.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="verifonelogo.jpg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">ADK-Programmers-Guides
   &#160;<span id="projectnumber">5.0.3-CD1</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('pg_password_management_tools_reset_supervisor.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Supervisor Password Reset Tool (VOS1, VOS2) </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="pg_password_management_tools_reset_supervisor"></a>
Supervisor Password Reset Tool (VOS1, VOS2)</h1>
<h1><a class="anchor" id="sec_password_reset_intro"></a>
Introduction</h1>
<p>Password Reset Tool generates a package that sets a new value for the Supervisor password for a specific terminal, without the need to know the pre-existing value. This tool is supposed to be used on VOS1 and VOS2 terminals.</p>
<h1><a class="anchor" id="sec_password_reset_when"></a>
When to use</h1>
<p>This tool addresses the use cases of forgotten or unknown supervisor passwords.</p>
<h1><a class="anchor" id="sec_password_reset_functionality"></a>
Functionality</h1>
<p>This tool is a user-generated package for resetting a <b>supervisor</b> password only and works on devices with V/OS and V/OS2.</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">OS </th><th class="markdownTableHeadNone">Package  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">VOS1 </td><td class="markdownTableBodyNone">dl.pwreset-1.x.x_prod.tgz (located in the V/OS SYS-TOOL directory in full-ADK zip archive, starting with ADK-4.7)  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">VOS2 </td><td class="markdownTableBodyNone">dl.pwreset-1.x.x_prod.tgz (located in the V/OS2 SYS-TOOL directory in full-ADK zip archive, starting with ADK-4.7)  </td></tr>
</table>
<p>The tool contains the configuration file PWRESET.SYS with the following values:</p>
<table class="doxtable">
<tr>
<th>Value </th><th>Description </th><th>Mandatory </th></tr>
<tr>
<td>serialNumber </td><td>Nine digits serial number (S/N) of the terminal in format: "nnn-nnn-nnn". Only one specific terminal serial number allowed</td><td>Yes </td></tr>
<tr>
<td>password </td><td>Hashed value of the Supervisor password </td><td>Yes </td></tr>
<tr>
<td>expire </td><td><ul>
<li>
1: sets the password as pre-expired (force a change upon first use) </li>
<li>
0: not pre-expired </li>
</ul>
</td><td>Yes </td></tr>
</table>
<p>The example of values:</p>
<pre class="fragment">serialNumber=275-159-718
password=2558a34d4d20964ca1d272ab26ccce9511d880579593cd4c9e01ab91ed00f325  
expire=0
</pre><p>The package must be signed by the Terminal Sponsor. After the successful installation of the package on the terminal, the new Supervisor password value will be used to log in to System Mode. If the configuration was set to pre-expire the password, the user is forced to change the password value to a new one.</p>
<h1><a class="anchor" id="sec_password_reset_validations"></a>
Validations</h1>
<p>The terminal performs the following security checks during the installation of the Password Reset package:</p><ul>
<li>The correct formatting of the serial number (serialNumber) field.</li>
<li>The serial number of the package matches the serial number of the device.</li>
<li>The package timestamp is newer than the last password database change timestamp on the device.</li>
<li>The package timestamp is older than the device system timestamp</li>
</ul>
<p>If at least one validation fails then the password will not be changed. The result of the package installation is logged (see <a class="el" href="pg_password_management_tools_reset_supervisor.html#sec_password_logging">Logging</a>).</p>
<h1><a class="anchor" id="sec_password_logging"></a>
Logging</h1>
<p>Password reset tool uses ADK-LOG component for logging. After package installation, a new log file is created (or overwritten if a previous one exists). It is stored in the /mnt/flash/logs/system/pwreset.log file. Logfile content examples:</p>
<p>Successful password reset: </p><pre class="fragment">&lt;85&gt; Aug 21 10:43:54 Raptor authpriv.notice pwreset: ~~SECLOG~~ Running PWRESET v1.0.0
&lt;85&gt; Aug 21 10:43:54 Raptor authpriv.notice pwreset: ~~SECLOG~~ PWRESET: MIB serial number set: 275-159-718
&lt;85&gt; Aug 21 10:43:54 Raptor authpriv.notice pwreset: ~~SECLOG~~  All conditions have been met, resetting password
&lt;85&gt; Aug 21 10:43:54 Raptor authpriv.notice pwreset: ~~SECLOG~~ PWRESET: Resetting password to pre-expired default values
&lt;85&gt; Aug 21 10:43:54 Raptor authpriv.notice pwreset: ~~SECLOG~~ PWRESET: Finalize: Code=0 Line=0
</pre><p>Unsuccessful password reset: </p><pre class="fragment">&lt;85&gt; Aug 20 17:26:38 Raptor authpriv.notice pwreset: ~~SECLOG~~ Running PWRESET v1.0.0
&lt;85&gt; Aug 20 17:26:38 Raptor authpriv.notice pwreset: ~~SECLOG~~ PWRESET: MIB serial number set: 275-159-718
&lt;85&gt; Aug 20 17:26:38 Raptor authpriv.notice pwreset: ~~SECLOG~~ PWRESET: ERROR - Invalid length 12
&lt;85&gt; Aug 20 17:26:38 Raptor authpriv.notice pwreset: ~~SECLOG~~ PWRESET: ERROR - PWRESET.SYS format error in serial number field
&lt;85&gt; Aug 20 17:26:38 Raptor authpriv.notice pwreset: ~~SECLOG~~ PWRESET: Finalize: Code=-5 Line=0
</pre><h1><a class="anchor" id="sec_password_instruction"></a>
Instruction</h1>
<p>The sample Password Reset package should be updated: the "pwreset-control" bundle content should be changed - a correct Serial Number, new encrypted password value, and pre-expired state need to be added to the PWRESET.SYS file.</p>
<dl class="section note"><dt>Note</dt><dd>To hash a password value, use the Verifone Python executable file:<ul>
<li>copy the Python executable file "encryptPw" to your PC</li>
<li>run cmd</li>
<li>switch to the directory where the Phyton executable file is located</li>
<li>run command:<ul>
<li>Windows:<pre class="fragment">encryptPw &lt;password value&gt; </pre> Example:<pre class="fragment">encryptPw 1234567 </pre></li>
<li>Linux:<pre class="fragment">./encryptPw &lt;password value&gt;" </pre> Example:<pre class="fragment">./encryptPw 1234567 </pre></li>
</ul>
</li>
<li>the value entered should be at least 7 digits long. If not, the script will return an error message.</li>
<li>copy resulting hashed value to <b>PWRESET.SYS</b> file</li>
</ul>
</dd></dl>
<p>The updated package then should be user-signed using the "File Signing Tool (FST)" on ADK 4.7 and older releases or the "Online Signing Portal" on ADK 4.8 and newer releases.</p>
<dl class="section note"><dt>Note</dt><dd>UX (VOS1) devices which are running on ADK 4.8 and newer releases, should be still signed with the File Signing Tool.</dd></dl>
<h1><a class="anchor" id="sec_password_troubleshooting"></a>
Troubleshooting</h1>
<p>If the package install doesn't work and the following messages are found in the pwreset.log:</p>
<pre class="fragment">&lt;85&gt; Jun 12 23:35:19 Raptor authpriv.notice pwreset: ~~SECLOG~~  PWRESET.SYS timestamp is older than password database, needs to be newer
</pre><p>Check that date/time through Sysmode on the device is not newer than the timestamp of the PWRESET.SYS file.</p>
<pre class="fragment">&lt;85&gt; Jun 12 11:49:03 Raptor authpriv.notice pwreset: ~~SECLOG~~  PWRESET.SYS is newer than system time, needs to be older to reset password
</pre><p>Make sure time zone on the device through Sysmode matches time zone of PC which saved/packaged the PWRESET.SYS file. This issue may happen when package was made on a PC at local date/time in US&gt;Central Time zone, and date/time on the device in Sysmode was matching, but UTC setting was +0, causing PWRESET.SYS to appear as if it was created 5 hours earlier. <br  />
 Changing to US&gt;Central time zone (UDT-0500) and updating time on the device then rebooting, allowed PWRESET.SYS to reset the password properly. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">Application Development Kit (ADK)</a></li><li class="navelem"><a class="el" href="pg_system_tools.html">System Tools</a></li>
    <li class="footer">Generated on Mon Jun 16 2025 16:04:02 for ADK-Programmers-Guides by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
